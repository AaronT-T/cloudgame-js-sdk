/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(){return(()=>{var e={9669:(e,t,n)=>{e.exports=n(1609)},5448:(e,t,n)=>{"use strict";var r=n(4867),o=n(6026),i=n(5327),a=n(4097),s=n(4109),c=n(7985),u=n(5061);e.exports=function(e){return new Promise((function(t,l){var d=e.data,p=e.headers;r.isFormData(d)&&delete p["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var h=e.auth.username||"",m=e.auth.password||"";p.Authorization="Basic "+btoa(h+":"+m)}var v=a(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),i(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in f?s(f.getAllResponseHeaders()):null,r={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:n,config:e,request:f};o(t,l,r),f=null}},f.onabort=function(){f&&(l(u("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){l(u("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),l(u(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var y=n(4372),g=(e.withCredentials||c(v))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;g&&(p[e.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),l(e),f=null)})),void 0===d&&(d=null),f.send(d)}))}},1609:(e,t,n)=>{"use strict";var r=n(4867),o=n(1849),i=n(321),a=n(7185);function s(e){var t=new i(e),n=o(i.prototype.request,t);return r.extend(n,i.prototype,t),r.extend(n,t),n}var c=s(n(5655));c.Axios=i,c.create=function(e){return s(a(c.defaults,e))},c.Cancel=n(5263),c.CancelToken=n(4972),c.isCancel=n(6502),c.all=function(e){return Promise.all(e)},c.spread=n(8713),e.exports=c,e.exports.default=c},5263:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},4972:(e,t,n)=>{"use strict";var r=n(5263);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},6502:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},321:(e,t,n)=>{"use strict";var r=n(4867),o=n(5327),i=n(782),a=n(3572),s=n(7185);function c(e){this.defaults=e,this.interceptors={request:new i,response:new i}}c.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[a,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},c.prototype.getUri=function(e){return e=s(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){c.prototype[e]=function(t,n){return this.request(r.merge(n||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function(e){c.prototype[e]=function(t,n,o){return this.request(r.merge(o||{},{method:e,url:t,data:n}))}})),e.exports=c},782:(e,t,n)=>{"use strict";var r=n(4867);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},4097:(e,t,n)=>{"use strict";var r=n(1793),o=n(7303);e.exports=function(e,t){return e&&!r(t)?o(e,t):t}},5061:(e,t,n)=>{"use strict";var r=n(481);e.exports=function(e,t,n,o,i){var a=new Error(e);return r(a,t,n,o,i)}},3572:(e,t,n)=>{"use strict";var r=n(4867),o=n(8527),i=n(6502),a=n(5655);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},481:e=>{"use strict";e.exports=function(e,t,n,r,o){return e.config=t,n&&(e.code=n),e.request=r,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},7185:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){t=t||{};var n={},o=["url","method","params","data"],i=["headers","auth","proxy"],a=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];r.forEach(o,(function(e){void 0!==t[e]&&(n[e]=t[e])})),r.forEach(i,(function(o){r.isObject(t[o])?n[o]=r.deepMerge(e[o],t[o]):void 0!==t[o]?n[o]=t[o]:r.isObject(e[o])?n[o]=r.deepMerge(e[o]):void 0!==e[o]&&(n[o]=e[o])})),r.forEach(a,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])}));var s=o.concat(i).concat(a),c=Object.keys(t).filter((function(e){return-1===s.indexOf(e)}));return r.forEach(c,(function(r){void 0!==t[r]?n[r]=t[r]:void 0!==e[r]&&(n[r]=e[r])})),n}},6026:(e,t,n)=>{"use strict";var r=n(5061);e.exports=function(e,t,n){var o=n.config.validateStatus;!o||o(n.status)?e(n):t(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},8527:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},5655:(e,t,n)=>{"use strict";var r=n(4867),o=n(6016),i={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s,c={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(s=n(5448)),s),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(a(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){c.headers[e]=r.merge(i)})),e.exports=c},1849:e=>{"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},5327:(e,t,n)=>{"use strict";var r=n(4867);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(o(t)+"="+o(e))})))})),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},7303:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},4372:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},7985:(e,t,n)=>{"use strict";var r=n(4867);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=r.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},6016:(e,t,n)=>{"use strict";var r=n(4867);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},4109:(e,t,n)=>{"use strict";var r=n(4867),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,a={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},8713:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4867:(e,t,n)=>{"use strict";var r=n(1849),o=Object.prototype.toString;function i(e){return"[object Array]"===o.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function c(e){return"[object Function]"===o.call(e)}function u(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===o.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isUndefined:a,isDate:function(e){return"[object Date]"===o.call(e)},isFile:function(e){return"[object File]"===o.call(e)},isBlob:function(e){return"[object Blob]"===o.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:u,merge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]=n}for(var r=0,o=arguments.length;r<o;r++)u(arguments[r],n);return t},deepMerge:function e(){var t={};function n(n,r){"object"==typeof t[r]&&"object"==typeof n?t[r]=e(t[r],n):t[r]="object"==typeof n?e({},n):n}for(var r=0,o=arguments.length;r<o;r++)u(arguments[r],n);return t},extend:function(e,t,n){return u(t,(function(t,o){e[o]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},5098:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(7278)),i=r(n(9034)),a=r(n(319)),s=r(n(3018)),c=r(n(8077)),u=n(7040),l=c.default.log,d=["set_cursor","cursor_state","set_pointer_style","res_mode","game_op","reset_capslock"],p=function(){function e(){this.config=null,this.role=null,this.keysDeny={},this.keysAllow={},this.keysMap={},this.loginHelper=null,this.seatIndex=0,this.serverSideDescription=u.empty}return e.prototype.isAllowMsg=function(e){try{return!!d.includes(e.type)||("keyboard"===e.type?this.isAllow(e.key):this.isAllow(e.type))}catch(t){return console.log("isAllowMsg:",e,"to be added"),!0}},e.prototype.isAllow=function(e){return"number"==typeof e&&(e=e.toString()),!(this.keysDeny[e]&&!this.keysAllow[e])},e.prototype.keyMap=function(e){var t=this.keysMap[e]||e;return isNaN(t)?t:+t},e.prototype.setRole=function(e){this.role=e},e.prototype.setSeatIndex=function(e){this.seatIndex=e,this.parse()},e.prototype.setGameConfig=function(e){this.config=e;var t=e.sdk_conf;if(t){var n=o.default.getInitOptions(),r=n.webDraftLevel,s=n.keepLastFrame,c=n.tabletMode;"number"==typeof t.webdraft_level&&void 0!==r&&a.default.setWebDraftLevel(t.webdraft_level),t.connect_timeout&&i.default.setNewConnectTimeout(t.connect_timeout),t.noflow_timeout&&i.default.setNoflowTimeout(t.noflow_timeout),t.cursor_scale&&i.default.setMobileCursorScale(t.cursor_scale),t.cursor_style&&o.default.setRemoteCursorStyle(t.cursor_style),"boolean"==typeof t.keep_lastframe&&void 0===s&&i.default.setKeepLastFrame(t.keep_lastframe),"boolean"==typeof t.tablet_mode&&void 0===c&&o.default.mouseTabletMode(t.tablet_mode),"boolean"==typeof t.mobile_show_cursor&&i.default.setMobileShowCursor(t.mobile_show_cursor)}},e.prototype.getConfig=function(){return{login_helper:this.loginHelper,seat_index:this.seatIndex,role:this.role,game_config:this.config,server_side_description:this.serverSideDescription}},e.prototype.setServerSideDescription=function(e){this.serverSideDescription=e,s.default.setStaticStat()},e.prototype.getServerSideDescription=function(){return this.serverSideDescription||u.empty},e.prototype.parse=function(){if(l("enter gameConfig parse",this.config,this.role,this.seatIndex),!this.config)return l("game_config does not set");if(!this.role)return l("role does not set");var e=this.config.sdk_conf||u.empty,t=e.user_keys,n=e.login_helper;this.setUserKeys(t),n?this.loginHelper=n:l("no login helper loaded")},e.prototype.setUserKeys=function(e){var t;if(e)if(e[this.role]&&0!==(null===(t=e[this.role])||void 0===t?void 0:t.length)){var n=e[this.role];if(n.length>this.seatIndex&&this.seatIndex>=0){var r=n[this.seatIndex];if(r.deny&&(this.keysDeny=this.fillKeys(r.deny)),r.allow&&(this.keysAllow=this.fillKeys(r.allow)),r.map)for(var o in r.map){var i=o,a=r.map[o];"string"==typeof i&&((null===u.codeMap||void 0===u.codeMap?void 0:u.codeMap[i])&&(i=u.codeMap[i].key),(null===u.codeMap||void 0===u.codeMap?void 0:u.codeMap[a])&&(a=u.codeMap[a].key)),this.keysMap[i]=a}}else l("index is out of range, role config range is "+n.length)}else"player"===this.role?this.keysDeny={}:"viewer"===this.role?(this.keysDeny=this.fillKeys("*"),this.keysAllow={}):l("role",this.role,"is not configure yet");else l("no user keys config loaded")},e.prototype.fillKeys=function(e){l("fillKeys",e);var t={},n=e.split(",");for(var r in n){var o=n[r];"*"===o||"ALL"===o?(t=Object.assign(t,{8:1,9:1,12:1,13:1,16:1,17:1,18:1,20:1,27:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,45:1,46:1,144:1,186:1,187:1,188:1,189:1,190:1,191:1,192:1,219:1,220:1,221:1,222:1,170:1,171:1,172:1,173:1,174:1,175:1,179:1,180:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1,106:1,107:1,108:1,109:1,110:1,111:1,112:1,113:1,114:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,122:1,123:1,65:1,66:1,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,82:1,83:1,84:1,85:1,86:1,87:1,88:1,89:1,90:1,48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1}),t=Object.assign(t,{mouseleft:1,mouseright:1,mousemiddle:1,mousescroll:1,mousemove:1,mousedeltamove:1,key_seq:1}),t=Object.assign(t,{touchstart:1,touchmove:1,touchend:1,touchcancel:1}),t=Object.assign(t,{gamepadkey:1,axisleft:1,axisright:1,lt:1,rt:1})):"MOUSE"===o?t=Object.assign(t,{mouseleft:1,mouseright:1,mousemiddle:1,mousescroll:1,mousemove:1,mousedeltamove:1,key_seq:1}):"KEYBOARD"===o?t=Object.assign(t,{8:1,9:1,12:1,13:1,16:1,17:1,18:1,20:1,27:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,45:1,46:1,144:1,186:1,187:1,188:1,189:1,190:1,191:1,192:1,219:1,220:1,221:1,222:1,170:1,171:1,172:1,173:1,174:1,175:1,179:1,180:1,96:1,97:1,98:1,99:1,100:1,101:1,102:1,103:1,104:1,105:1,106:1,107:1,108:1,109:1,110:1,111:1,112:1,113:1,114:1,115:1,116:1,117:1,118:1,119:1,120:1,121:1,122:1,123:1,65:1,66:1,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1,80:1,81:1,82:1,83:1,84:1,85:1,86:1,87:1,88:1,89:1,90:1,48:1,49:1,50:1,51:1,52:1,53:1,54:1,55:1,56:1,57:1}):"GAMEPAD"===o?t=Object.assign(t,{gamepadkey:1,axisleft:1,axisright:1,lt:1,rt:1}):"TOUCHS"===o?t=Object.assign(t,{touchstart:1,touchmove:1,touchend:1,touchcancel:1}):(null===u.codeMap||void 0===u.codeMap?void 0:u.codeMap[o])?t[u.codeMap[o].key.toString()]=1:t[o]=1}return l("fillKeys target",t),t},e}();t.default=new p},7889:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={version:"1.0.5",reportHost:"cloud-gaming.myqcloud.com"}},2848:(e,t)=>{"use strict";var n,r,o,i,a,s,c,u;Object.defineProperty(t,"__esModule",{value:!0}),t.TOUCH_EVENT_TYPE=t.WEB_DRAFT_LEVEL=t.DATACHANNEL=t.RTC_CODE=t.CURSOR_MODE=t.STATUS=t.PAGE_STATS=t.STATS=void 0,(u=t.STATS||(t.STATS={})).LOADING="loading",u.PLAYING="playing",u.ENDED="ended",(c=t.PAGE_STATS||(t.PAGE_STATS={})).LOADING="loading",c.PLAYING="playing",c.ENDED="ended",(s=t.STATUS||(t.STATUS={}))[s.DISCONNECTED=0]="DISCONNECTED",s[s.CONNECTING=1]="CONNECTING",s[s.ESTABLISHED=2]="ESTABLISHED",(a=t.CURSOR_MODE||(t.CURSOR_MODE={}))[a.LOCAL=0]="LOCAL",a[a.REMOTE_SRC=1]="REMOTE_SRC",a[a.REMOTE_DRAW=2]="REMOTE_DRAW",a[a.REMOTE_CUSTOM=3]="REMOTE_CUSTOM",a[a.REMOTE_SRC_POS=4]="REMOTE_SRC_POS",(i=t.RTC_CODE||(t.RTC_CODE={}))[i.NEED_RECONNECT=-1]="NEED_RECONNECT",i[i.MANUAL_CLOSE=0]="MANUAL_CLOSE",i[i.OTHER_KICK=1]="OTHER_KICK",i[i.CONNECT_FAILED=2]="CONNECT_FAILED",i[i.TOKEN_ERROR=3]="TOKEN_ERROR",(o=t.DATACHANNEL||(t.DATACHANNEL={})).ACK="ack",o.HB="hb",o.CD="cd",o.KM="km",o.SV="sv",(r=t.WEB_DRAFT_LEVEL||(t.WEB_DRAFT_LEVEL={}))[r.CLOSE_HIGH_FREQUENCY=0]="CLOSE_HIGH_FREQUENCY",r[r.UNPACKAGE_SEND=1]="UNPACKAGE_SEND",r[r.PACKAGE_SEND=2]="PACKAGE_SEND",r[r.LIMIT_LENGTH=3]="LIMIT_LENGTH",(n=t.TOUCH_EVENT_TYPE||(t.TOUCH_EVENT_TYPE={}))[n.touchstart=0]="touchstart",n[n.touchmove=1]="touchmove",n[n.touchend=2]="touchend"},9667:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.KEYCODE=void 0,(n=t.KEYCODE||(t.KEYCODE={}))[n.Backspace=8]="Backspace",n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Shift=16]="Shift",n[n.Ctrl=17]="Ctrl",n[n.Alt=18]="Alt",n[n.PauseBreak=19]="PauseBreak",n[n.CapsLock=20]="CapsLock",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.LeftArrow=37]="LeftArrow",n[n.UpArrow=38]="UpArrow",n[n.RightArrow=39]="RightArrow",n[n.DownArrow=40]="DownArrow",n[n.Insert=45]="Insert",n[n.Delete=46]="Delete",n[n.Zero=48]="Zero",n[n.ClosedParen=48]="ClosedParen",n[n.One=49]="One",n[n.ExclamationMark=49]="ExclamationMark",n[n.Two=50]="Two",n[n.AtSign=50]="AtSign",n[n.Three=51]="Three",n[n.PoundSign=51]="PoundSign",n[n.Hash=51]="Hash",n[n.Four=52]="Four",n[n.DollarSign=52]="DollarSign",n[n.Five=53]="Five",n[n.PercentSign=53]="PercentSign",n[n.Six=54]="Six",n[n.Caret=54]="Caret",n[n.Hat=54]="Hat",n[n.Seven=55]="Seven",n[n.Ampersand=55]="Ampersand",n[n.Eight=56]="Eight",n[n.Star=56]="Star",n[n.Asterik=56]="Asterik",n[n.Nine=57]="Nine",n[n.OpenParen=57]="OpenParen",n[n.A=65]="A",n[n.B=66]="B",n[n.C=67]="C",n[n.D=68]="D",n[n.E=69]="E",n[n.F=70]="F",n[n.G=71]="G",n[n.H=72]="H",n[n.I=73]="I",n[n.J=74]="J",n[n.K=75]="K",n[n.L=76]="L",n[n.M=77]="M",n[n.N=78]="N",n[n.O=79]="O",n[n.P=80]="P",n[n.Q=81]="Q",n[n.R=82]="R",n[n.S=83]="S",n[n.T=84]="T",n[n.U=85]="U",n[n.V=86]="V",n[n.W=87]="W",n[n.X=88]="X",n[n.Y=89]="Y",n[n.Z=90]="Z",n[n.LeftWindowKey=91]="LeftWindowKey",n[n.RightWindowKey=92]="RightWindowKey",n[n.SelectKey=93]="SelectKey",n[n.Numpad0=96]="Numpad0",n[n.Numpad1=97]="Numpad1",n[n.Numpad2=98]="Numpad2",n[n.Numpad3=99]="Numpad3",n[n.Numpad4=100]="Numpad4",n[n.Numpad5=101]="Numpad5",n[n.Numpad6=102]="Numpad6",n[n.Numpad7=103]="Numpad7",n[n.Numpad8=104]="Numpad8",n[n.Numpad9=105]="Numpad9",n[n.Multiply=106]="Multiply",n[n.Add=107]="Add",n[n.Subtract=109]="Subtract",n[n.DecimalPoint=110]="DecimalPoint",n[n.Divide=111]="Divide",n[n.F1=112]="F1",n[n.F2=113]="F2",n[n.F3=114]="F3",n[n.F4=115]="F4",n[n.F5=116]="F5",n[n.F6=117]="F6",n[n.F7=118]="F7",n[n.F8=119]="F8",n[n.F9=120]="F9",n[n.F10=121]="F10",n[n.F11=122]="F11",n[n.F12=123]="F12",n[n.NumLock=144]="NumLock",n[n.ScrollLock=145]="ScrollLock",n[n.SemiColon=186]="SemiColon",n[n.Equals=187]="Equals",n[n.Comma=188]="Comma",n[n.Dash=189]="Dash",n[n.Period=190]="Period",n[n.UnderScore=189]="UnderScore",n[n.PlusSign=187]="PlusSign",n[n.ForwardSlash=191]="ForwardSlash",n[n.Tilde=192]="Tilde",n[n.GraveAccent=192]="GraveAccent",n[n.Backquote=192]="Backquote",n[n.OpenBracket=219]="OpenBracket",n[n.ClosedBracket=221]="ClosedBracket",n[n.Quote=222]="Quote"},7278:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(8117)),c=n(7889),u=n(2848),l=a(n(9034)),d=a(n(319)),p=n(4535),f=n(7040),h=a(n(5652)),m=a(n(3018)),v=a(n(5098)),y=a(n(8077)),g=y.default.log,b=new(function(){function e(){this.version=c.config.version,this.initOptions=null,this.sdkInitStartTime=null}return e.prototype.init=function(e){this.sdkInitStartTime=+new Date;var t=e.mount,n=e.showLogo,r=e.loadingText,o=e.showLoading;this.mountGamePoint({mount:t,showLogo:n,loadingText:r,showLoading:o}),this.initOptions=e,this.onPageLoad(e),g("init->",e)},Object.defineProperty(e.prototype,"initStartTime",{get:function(){return this.sdkInitStartTime},enumerable:!1,configurable:!0}),e.prototype.getInitOptions=function(){return this.initOptions},e.prototype.getClientSession=function(){return l.default.getClientSideDescription()},e.prototype.start=function(e){void 0===e&&(e=""),l.default.connect(e)},e.prototype.destroy=function(e){var t=void 0===e?f.empty:e,n=t.message,r=void 0===n?"主动关闭":n,o=t.code,i=void 0===o?u.RTC_CODE.MANUAL_CLOSE:o;g("destroy->","message: ",r,"code: ",i),l.default.disconnected({message:r,code:i})},e.prototype.reconnect=function(){l.default.disconnected({message:"manual reconnect",code:u.RTC_CODE.NEED_RECONNECT})},e.prototype.gameRestart=function(e,t){void 0===e&&(e=f.noop),void 0===t&&(t=0),g("gameRestart->",t),l.default.sendAckData({data:{type:"game_op",op:"restart"},retry:t,callback:e}),this.clearRemoteKeys()},e.prototype.gamePause=function(e,t){void 0===e&&(e=f.noop),void 0===t&&(t=0),g("gamePause->",t),l.default.sendAckData({data:{type:"game_op",op:"pause"},retry:t,callback:e}),l.default.setGameStatus("pause"),this.clearRemoteKeys()},e.prototype.gameResume=function(e,t){void 0===e&&(e=f.noop),void 0===t&&(t=0),g("gameResume->",t),l.default.sendAckData({data:{type:"game_op",op:"resume"},retry:t,callback:e}),l.default.setGameStatus("playing"),this.clearRemoteKeys()},e.prototype.loginHelper=function(e,t){var n=e.gameid,r=void 0===n?"":n,o=e.acc,i=void 0===o?"":o,a=e.pwd,s=void 0===a?"":a;void 0===t&&(t=f.noop),i&&s||console.error("require parameter is missing"),h.default.inputLoginInfo({loginData:{gameid:r,acc:i,pwd:s,appid:this.initOptions.appid},callback:t})},e.prototype.getLoginWindowStat=function(e,t){if(void 0===t&&(t=f.noop),"string"!=typeof e)throw"gameid is missing";h.default.loginWindowStat(t)},e.prototype.playVideo=function(e){var t,n;"play"===e&&(null===(t=f.getVideoElement())||void 0===t||t.play()),"pause"===e&&(null===(n=f.getVideoElement())||void 0===n||n.pause())},e.prototype.playAudio=function(e){var t,n;"play"===e&&(null===(t=f.getAudioElement())||void 0===t||t.play()),"pause"===e&&(null===(n=f.getAudioElement())||void 0===n||n.pause())},e.prototype.setVideoOrientation=function(e,t){void 0===e&&(e=0),void 0===t&&(t=!0),g("setVideoOrientation",e,t),d.default.setVideoOrientation(e,t)},e.prototype.sendKeyboardEvent=function(e){e.type="keyboard",this.sendRawEvent(e)},e.prototype.sendRawEvent=function(e){if(g("sendRawEvent->",e),"object"!=typeof e)throw"parameter is not object";l.default.sendAckData({data:e})},e.prototype.setMoveSensitivity=function(e){if(g("setMoveSensitivity->",e),"number"!=typeof e)throw"input value must be number";if(e-.01<Number.EPSILON||e-100>Number.EPSILON)throw"sensitivity is out of range";d.default.setMoveSensitivity(e)},e.prototype.sendSeqRawEvents=function(e){g("sendSeqRawEvents->",e),l.default.sendKmData({type:"key_seq",keys:e.map((function(e){return JSON.stringify(e)}))})},e.prototype.getMoveSensitivity=function(){return d.default?1/d.default.getMoveSensitivity():1},e.prototype.setMouseCanLock=function(e){g("setMouseCanLock->",e),l.default.setMouseCanLock(e),l.default.setForceShowCursor(!e)},e.prototype.mouseMove=function(e,t,n,r){d.default.mouseMove(e,t,n,r)},e.prototype.mouseTabletMode=function(e){g("mouseTabletMode->",e),d.default.setTabletMode(e),this.resetCursorPos(l.default.getCursorMode())},e.prototype.setRemoteCursor=function(e){if(void 0===e&&(e=0),g("setRemoteCursor->",e),![0,1,2,3,4].includes(e))return console.error("val is out of Range in [0, 1, 2, 3]");l.default.setCursorMode(e),this.resetCursorPos(e)},e.prototype.setCursorShowStat=function(e){g("setCursorShowStat->",e),l.default.setCursorShowing(e)},e.prototype.getCursorShowStat=function(){return g("getCursorShowStat->",l.default.getCursorShowStatus()),l.default.getCursorShowStatus()},e.prototype.setMobileCursorScale=function(e){g("setMobileCursorScale->",e),l.default.setMobileCursorScale(e)},e.prototype.setRemoteCursorStyle=function(e){g("setRemoteCursorStyle->",e),l.default.sendAckData({data:{type:"set_pointer_style",style:e}})},e.prototype.clearRemoteKeys=function(){g("clearRemoteKeys->"),d.default.clearRemoteKeys()},e.prototype.resetRemoteCapsLock=function(){g("resetRemoteCapsLock->"),l.default.sendAckData({data:{type:"reset_capslock"}})},e.prototype.setDefaultCursorImage=function(e){void 0===e&&(e=""),g("setDefaultCursorImage->",e),l.default.setDefaultCursorImage(e)},e.prototype.showKeyboard=function(e){void 0===e&&(e=!1),d.default.showKeyboard(e)},e.prototype.setDebugMode=function(e){var t=void 0===e?{}:e,n=t.showStats,o=void 0!==n&&n,i=t.showLog,a=void 0!==i&&i,s=t.showOnAckMessage,c=void 0!==s&&s,u=t.showOnCdMessage,l=void 0!==u&&u,d=t.showOnHbMessage,p=void 0!==d&&d,f=t.showOnKmMessage,h=void 0!==f&&f,v=t.showOnSvMessage,y=void 0!==v&&v,g=t.showSendAckData,b=void 0!==g&&g,C=t.showSendHbData,S=void 0!==C&&C,w=t.showSendKmData,k=void 0!==w&&w;m.default.show(o),this.initOptions.debugSetting||(this.initOptions.debugSetting={}),this.initOptions.debugSetting=r(r({},this.initOptions.debugSetting),{showLog:a,showOnAckMessage:c,showOnCdMessage:l,showOnHbMessage:p,showOnKmMessage:h,showOnSvMessage:y,showSendAckData:b,showSendHbData:S,showSendKmData:k})},e.prototype.reportLog=function(){g("reportLog, user manual upload"),y.default.reportLog()},e.prototype.setLogHandler=function(e){void 0===e&&(e=f.noop),g("setLogHandler"),y.default.setExternalLog(e)},e.prototype.toggleMetricReportBulk=function(e){void 0===e&&(e=!1),m.default.toggleMetricReportBulk(e)},e.prototype.setStreamProfile=function(e,t,n){if(void 0===t&&(t=f.noop),void 0===n&&(n=0),g("setStreamProfile->",e),!e.fps||"number"!=typeof e.fps)throw"fps must be set with integer";if(!e.max_bitrate||"number"!=typeof e.max_bitrate)throw"max_bitrate must be set with integer";if(!e.min_bitrate||"number"!=typeof e.min_bitrate)throw"min_bitrate must be set with integer";if(e.fps<10||e.fps>60)throw"fps out of range [10,60]";if(e.max_bitrate<1||e.max_bitrate>15)throw"max_bitrate out of range [1,15]";if(e.min_bitrate<1||e.min_bitrate>15)throw"min_bitrate out of range [1,15]";null===l.default||void 0===l.default||l.default.sendAckData({data:r(r({},e),{type:"res_mode",res:""}),retry:n,callback:t})},e.prototype.getDisplayRect=function(){return l.default.getDisplayRect()},e.prototype.setVolume=function(e){g("setVolume->",e),f.getAudioElement().volume=e},e.prototype.getVolume=function(){var e;return null!==(e=f.getAudioElement().volume)&&void 0!==e?e:0},e.prototype.setVideoVolume=function(e){g("setVideoVolume->",e),f.getVideoElement().volume=e},e.prototype.getVideoVolume=function(){var e;return null!==(e=f.getVideoElement().volume)&&void 0!==e?e:0},e.prototype.setPageBackground=function(e){void 0===e&&(e=""),g("setPageBackground->",e);var t=f.getCloudGamingContainerElement();t&&(t.style.background="url("+e+")")},e.prototype.sendText=function(e){void 0===e&&(e=""),g("sendText",e),l.default.sendAckData({data:{type:"paste",content:e}})},e.prototype.setRemoteDesktopResolution=function(e){var t=e.width,n=e.height;return new Promise((function(e){l.default.sendAckData({data:{type:"desktop_res",width:t,height:n},callback:function(t){var n=t.data;e(void 0===n?{code:-1}:n)}})}))},e.prototype.getRemoteStreamResolution=function(){return{width:f.getVideoElement().videoWidth,height:f.getVideoElement().videoHeight}},e.prototype.reshapeWindow=function(){d.default.reshapeWindow()},e.prototype.createCustomDataChannel=function(e){var t=e.destPort,n=e.onMessage;return o(this,void 0,void 0,(function(){var e,r,o,a,s;return i(this,(function(i){switch(i.label){case 0:return e=l.default.firstCreateDefaultChannel?"cs_0":"cs_"+ +new Date,r=function(t){l.default.sendCustomDataChannelMessage({label:e,msg:t})},[4,l.default.createCustomDataChannel({label:e,destPort:t,onMessage:n,onerror:function(e){g("createCustomDataChannel onerror",e)},onclose:function(e){g("createCustomDataChannel onclose",e)}})];case 1:return o=i.sent(),a=o.code,s=o.msg,g("createCustomDataChannel code",a,"msg",s),[2,{sendMessage:r,code:a,msg:s}]}}))}))},e.prototype.onOrientationChange=function(e){var t,n;null===(n=(t=this.initOptions).onOrientationChange)||void 0===n||n.call(t,e)},e.prototype.onInitSuccess=function(e){var t,n;null===(n=(t=this.initOptions).onInitSuccess)||void 0===n||n.call(t,e)},e.prototype.onNetworkChange=function(e){var t,n;null===(n=(t=this.initOptions).onNetworkChange)||void 0===n||n.call(t,e)},e.prototype.onWebrtcStatusChange=function(e){var t,n,r,o;null===(n=(t=this.initOptions).onWebrtcStat)||void 0===n||n.call(t,e),null===(o=(r=this.initOptions).onWebrtcStatusChange)||void 0===o||o.call(r,e)},e.prototype.onDisconnect=function(e){var t,n;null===(n=(t=this.initOptions).onDisconnect)||void 0===n||n.call(t,e)},e.prototype.onConnectFail=function(e){var t,n;null===(n=(t=this.initOptions).onConnectFail)||void 0===n||n.call(t,e)},e.prototype.onConnectSuccess=function(e){var t,n,r,o;null===(n=(t=this.initOptions).onConnectSucc)||void 0===n||n.call(t,e),null===(o=(r=this.initOptions).onConnectSuccess)||void 0===o||o.call(r,e)},e.prototype.onGameStartComplete=function(e){var t,n;null===(n=(t=this.initOptions).onGameStartComplete)||void 0===n||n.call(t,e)},e.prototype.onLoadGameArchive=function(e){var t,n;null===(n=(t=this.initOptions).onLoadGameArchive)||void 0===n||n.call(t,e)},e.prototype.onSaveGameArchive=function(e){var t,n;null===(n=(t=this.initOptions).onSaveGameArchive)||void 0===n||n.call(t,e)},e.prototype.onInputStatusChange=function(e){var t,n,r,o;null===(n=(t=this.initOptions).onInputStatusChanged)||void 0===n||n.call(t,e.oldStatus,e.newStatus),null===(o=(r=this.initOptions).onInputStatusChange)||void 0===o||o.call(r,e)},e.prototype.onTouchEvent=function(e){var t,n;null===(n=(t=this.initOptions).onTouchEvent)||void 0===n||n.call(t,e)},e.prototype.onCursorShowStatChange=function(e){var t,n,r,o;null===(n=(t=this.initOptions).onCursorShowStatChanged)||void 0===n||n.call(t,e.oldStatus,e.newStatus),null===(o=(r=this.initOptions).onCursorShowStatChange)||void 0===o||o.call(r,e)},e.prototype.onGamepadConnectChange=function(e){var t,n;null===(n=(t=this.initOptions).onGamepadConnectChange)||void 0===n||n.call(t,e)},e.prototype.onConfigurationChange=function(e){var t,n;null===(n=(t=this.initOptions).onConfigurationChange)||void 0===n||n.call(t,e)},e.prototype.onVmafChange=function(e){var t,n;null===(n=(t=this.initOptions).onVmafChange)||void 0===n||n.call(t,e)},e.prototype.onWebrtcStatsChange=function(e){var t,n,r,o;if(e===u.PAGE_STATS.PLAYING){d.default.addEventHandler();var i=v.default.getConfig().game_config,a=(void 0===i?f.empty:i).sdk_conf,s=void 0===a?f.empty:a;s||(s=f.empty),this.resetCursorPos(null!==(t=this.initOptions.cursorMode)&&void 0!==t?t:s.cursor_mode),this.setRemoteCursor(null!==(n=this.initOptions.cursorMode)&&void 0!==n?n:s.cursor_mode),this.setPageBackground(null!==(r=this.initOptions.bgImgUrl)&&void 0!==r?r:s.bgimg_url),this.setDefaultCursorImage(null!==(o=this.initOptions.defaultCursorImgUrl)&&void 0!==o?o:s.default_cursor_url)}},e.prototype.setFullscreen=function(e,t){void 0===t&&(t=document.documentElement),g("setFullscreen->",e),e?d.default.fullscreen(t):d.default.exitFullscreen(t)},e.prototype.getFullscreen=function(){return f.isFullScreen()},e.prototype.isMobile=function(){return f.isMobile()},e.prototype.getGameMountPoint=function(){return document.getElementById(this.initOptions.mount)},e.prototype.getGameConfig=function(){return v.default.getConfig()},e.prototype.showTouchPosition=function(e){l.default.sendAckData({data:{type:"show_touch_pos",show:e}})},e.prototype.mountGamePoint=function(e){var t=e.mount,n=void 0===t?"":t,r=e.showLogo,o=void 0===r||r,i=e.loadingText,a=void 0===i?"正在启动云游戏":i,s=e.showLoading,c=void 0===s||s,u=document.createElement("style");document.querySelector("head").append(u),u.appendChild(document.createTextNode(p.mountPointCss));var l=document.getElementById(n);if(!l)throw"mount point not set";l.innerHTML=p.htmlString;var d=document.querySelector("#cloud-logo");d&&(o||(d.style.display="none")),l.style.backgroundColor="black";var h=function(e){(null==e?void 0:e.style)&&(e.style.width="100%",e.style.height="100%")};h(l),h(document.body),h(document.getRootNode()),c||(f.getProgressBarElement().style.display="none"),document.querySelector(".starting").innerHTML=a,document.body.style.backgroundColor="black"},e.prototype.onPageLoad=function(e){g("init tcgsdk version->",c.config.version,"options->",e),g("webrtc-adapter",s.default.browserDetails.browser,s.default.browserDetails.version),e.onLog&&y.default.setExternalLog(e.onLog),l.default.init(e),d.default.init(e),this.setDebugMode(e.debugSetting),l.default.initWebRTCConnect()},e.prototype.resetCursorPos=function(e){if(f.isMobile()){var t=window.devicePixelRatio,n=this.getDisplayRect(),r=n.width/2*t,o=n.height/2*t;g("isMobile true, cursor will auto move to->",r,o),d.default.resetLastPosition({x:0,y:0}),this.mouseMove(0,e>=2?"touchstart":"dummy_touchstart",0,0),this.mouseMove(0,e>=2?"touchmove":"dummy_touchmove",r,o),this.mouseMove(0,"touchend",r,o)}},e}());window.TCGSDK=b,t.default=b},2302:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(7042),a=o(n(7278)),s=o(n(8077)),c=o(n(9034)),u=s.default.log,l=function(){function e(){this.gamepad="function"==typeof navigator.getGamepads?new i.GamepadListener:null}return e.prototype.addGamepadHandler=function(){var e=new Map;e.set(12,1),e.set(13,2),e.set(14,4),e.set(15,8),e.set(2,16384),e.set(3,32768),e.set(0,4096),e.set(1,8192),e.set(8,32),e.set(9,16),e.set(10,128),e.set(11,64),e.set(4,256),e.set(5,512),this.gamepad&&(this.gamepad.on("gamepad:connected",(function(e){var t=e.index,n=e.gamepad;u("gamepad connect, gamepad index is",t),c.default.sendKmData({type:"gamepadconnect"}),a.default.onGamepadConnectChange({status:"gamepadconnect",index:t,gamepad:n})})),this.gamepad.on("gamepad:disconnected",(function(e){var t=e.index;u("gamepad disconnected, gamepad index is",t),c.default.sendKmData({type:"gamepaddisconnect"}),a.default.onGamepadConnectChange({status:"gamepaddisconnect",index:t})})),this.gamepad.on("gamepad:button",(function(t){var n=t.detail,r=n.button,o=n.pressed,i=n.value,a=e.get(r);6===r||7===r?(6===r&&c.default.sendKmData({type:"lt",x:parseInt(""+255*i,10),down:o}),7===r&&c.default.sendKmData({type:"rt",x:parseInt(""+255*i,10),down:o})):c.default.sendKmData({type:"gamepadkey",key:a,down:o})})),this.gamepad.on("gamepad:axis",(function(e){var t=e.detail,n=t.stick,o=t.gamepad,i=r(o.axes,4),a=i[0],s=i[1],u=i[2],l=i[3];0===n&&c.default.sendKmData({type:"axisleft",x:parseInt(""+32767*a,10),y:-parseInt(""+32767*s,10)}),1===n&&c.default.sendKmData({type:"axisright",x:parseInt(""+32767*u,10),y:-parseInt(""+32767*l,10)})})),this.gamepad.start())},e}();t.default=new l},9034:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(7278)),u=n(4276),l=s(n(8506)),d=s(n(7037)),p=n(2848),f=n(7040),h=s(n(319)),m=s(n(5098)),v=s(n(3018)),y=s(n(2568)),g=s(n(8077)).default.log,b={},C=new(function(){function e(){this.firstCreateDefaultChannel=!0,this.forceShowCursor=!1,this.showCursor=!0,this.remoteCursorMode=p.CURSOR_MODE.LOCAL,this.mobileCursorScale=1,this.mobileShowCursor=!0,this.originCursorStyle="",this.hotSpot={x:0,y:0},this.remoteCursorImage="",this.token="",this.keepLastFrame=!1,this.serverSideDescription="",this.latestActionTime=+new Date,this.isMobileGame=!1,this.connectBeginTime=0,this.connectTimeoutCount=0,this.connectStatus=p.STATUS.DISCONNECTED,this.heartbeatTimer=null,this.newConnectTimeout=60,this.noflowTimeout=10,this.clientInfo=null,this.peerConnection=null,this.kmDataChannel=null,this.ackDataChannel=null,this.hbDataChannel=null,this.cdDataChannel=null,this.svDataChannel=null,this.customDataChannel=new Map,this.ackDataChannelTimer=null,this.clientSideDescription=null,this.mediaStream=null,this.dataChannelAckCallbacks={},this.dataChannelRetryTimers={},this.checkMouseShowInterval=null,this.idleThreshold=3e5,this.idleTimes=0,this.lastInputStatus=!1,this.noFlowCount=0,this.gameStatus="playing"}return e.prototype.init=function(e){var t,n,r;this.forceShowCursor=null!==(t=e.forceShowCursor)&&void 0!==t&&t,this.idleThreshold=null!==(n=1e3*e.idleThreshold)&&void 0!==n?n:3e5,this.keepLastFrame=null!==(r=e.keepLastFrame)&&void 0!==r&&r,this.isMobileGame=e.mobileGame},Object.defineProperty(e.prototype,"debugSetting",{get:function(){return c.default.getInitOptions().debugSetting||{}},enumerable:!1,configurable:!0}),e.prototype.initWebRTCConnect=function(){return o(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this.peerConnection?[2,g("please call disconnected before connect")]:(e=this,[4,this.newWebRtcConnect()]);case 1:return e.clientSideDescription=t.sent(),c.default.onInitSuccess({code:0,msg:"ok",description:this.clientSideDescription}),[2]}}))}))},e.prototype.sendKmData=function(e){this.idleTimes=0,this.latestActionTime=+new Date;var t=e.type,n=e.key;m.default.isAllowMsg(e)?("keyboard"===t?n=m.default.keyMap(n):t=m.default.keyMap(t),this.debugSetting.showSendKmData&&console.log("sendKmData",e),this.dataChannelSend(this.kmDataChannel,e)):g("km:",e,"is no allow for your client")},e.prototype.sendAckData=function(e){var t=e.data,n=void 0===t?b:t,r=e.retry,o=void 0===r?0:r,i=e.callback,a=void 0===i?f.noop:i,s=e.interval,c=void 0===s?200:s,u=n.type;if("cursor_state"!==u&&(this.latestActionTime=+new Date,this.idleTimes=0),m.default.isAllowMsg(n)){u=m.default.keyMap(u);var l=f.getSequence();this.dataChannelSendWithCallback({dataChannel:this.ackDataChannel,ackMsg:{seq:l,data:n},retry:o,callback:a,interval:c}),this.debugSetting.showSendAckData&&("cursor_state"===u||console.log("sendAckData:",n,l))}else g("ack:",n,"is no allow for your client")},e.prototype.connect=function(e){void 0===e&&(e=""),g("connect->"),v.default.setServerSessionTime(+new Date);var t=+new Date;if(t-this.connectBeginTime<5e3)return g("connect too frequently, please make sure the duration of two connection is longer than 5s, last is "+Math.ceil((t-this.connectBeginTime)/1e3)+"s"),c.default.onConnectFail({code:1,msg:"connect too frequently"}),void this.disconnected({code:p.RTC_CODE.CONNECT_FAILED,message:"connect too frequently"});this.connectBeginTime=t,this.connectTimeoutCount=0,this.connectStatus=p.STATUS.CONNECTING;try{this.serverSideDescription=u.Base64.decode(e)}catch(e){throw"serverSession is not base64 string format"}this.serverSideDescription?this.onAnswer(this.serverSideDescription):c.default.onWebrtcStatusChange({code:-1,msg:"set server description failed, please try again later."})},e.prototype.getClientSideDescription=function(){this.clientSideDescription||console.error("webrtc is not initialized");try{return u.Base64.encode(JSON.stringify(this.clientSideDescription))}catch(e){console.error("clientSideDescription is not in json string or encode fail")}},e.prototype.newWebRtcConnect=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){switch(t.label){case 0:try{this.peerConnection=new RTCPeerConnection({sdpSemantics:"unified-plan"})}catch(e){return g("new RTCPeerConnection error",e),"ReferenceError"===e.name&&e.message.includes("RTCPeerConnection")&&(c.default.onWebrtcStatusChange({code:255,message:"your browser without webrtc support"}),console.log("浏览器不支持WebRTC")),[2]}return this.connectStatus=p.STATUS.CONNECTING,this.peerConnection.ontrack=function(t){return e.onTrack(t)},this.peerConnection.onconnectionstatechange=function(){var t;g("onconnectionstatechange",null===(t=e.peerConnection)||void 0===t?void 0:t.connectionState)},this.peerConnection.oniceconnectionstatechange=function(){return e.onIceConnectionStateChange()},this.peerConnection.onicecandidate=function(){},this.peerConnection.onnegotiationneeded=function(){g("onnegotiationneeded")},this.createKmDataChannel(),this.createHbDataChannel(),this.createAckDataChannel(),this.createSvDataChannel(),this.createDefaultCustomDataChannel(),[4,this.createOffer()];case 1:return[2,t.sent()]}}))}))},e.prototype.startHeartbeatReport=function(){var e=this;clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return o(e,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:return[4,null===(n=this.peerConnection)||void 0===n?void 0:n.getStats(null)];case 1:return e=r.sent(),t=[],null==e||e.forEach((function(e){void 0===e&&(e=b),"inbound-rtp"!==e.type&&"track"!==e.type||t.push(e)})),0===t.length&&(t=[{type:"inbound-rtp",mediaType:"video"},{type:"track",jitterBufferDelay:100*Math.random()%30+10}]),v.default.setStat(t),this.reportStat(),[2]}}))}))}),1e3)},e.prototype.getCursorShowStatus=function(){return this.showCursor},e.prototype.mouseDeltaMove=function(){return this.remoteCursorMode===p.CURSOR_MODE.REMOTE_CUSTOM||this.remoteCursorMode===p.CURSOR_MODE.REMOTE_SRC_POS},e.prototype.setMouseCanLock=function(e){var t,n,r;e?null===(n=(t=f.getVideoElement()).requestPointerLock)||void 0===n||n.call(t):null===(r=document.exitPointerLock)||void 0===r||r.call(document),this.remoteCursorMode===p.CURSOR_MODE.REMOTE_SRC_POS&&(e?h.default.setDropMouseEvent(!1):h.default.setDropMouseEvent(!0))},e.prototype.setForceShowCursor=function(e){this.forceShowCursor=e},e.prototype.disconnected=function(e){var t=e.message,n=void 0===t?"":t,r=e.code,o=void 0===r?null:r;g("disconnected",o,n),this.connectStatus=p.STATUS.DISCONNECTED;var i=f.getVideoElement(),a=f.getAudioElement();if(this.keepLastFrame?(null==i||i.pause(),null==a||a.pause()):f.getCloudGamingContainerElement().style.display="none",this.mediaStream&&(this.mediaStream.getTracks().forEach((function(e){e.stop()})),this.mediaStream=null),this.dataChannelAckCallbacks={},this.peerConnection&&(this.kmDataChannel&&(this.kmDataChannel.close(),this.kmDataChannel=null),this.hbDataChannel&&(this.hbDataChannel.close(),this.hbDataChannel=null),this.ackDataChannel&&(this.ackDataChannel.close(),this.ackDataChannel=null),this.cdDataChannel&&(this.cdDataChannel.close(),this.cdDataChannel=null),this.customDataChannel.size&&(this.customDataChannel.forEach((function(e){return e.close()})),this.customDataChannel.clear()),this.peerConnection.close(),this.peerConnection.ontrack=null,this.peerConnection.oniceconnectionstatechange=null,this.peerConnection.onicecandidate=null,this.peerConnection=null),this.clientSideDescription=null,this.serverSideDescription=null,this.clientInfo=null,clearInterval(this.heartbeatTimer),o===p.RTC_CODE.OTHER_KICK){var s=f.getRestartElement();!1===this.keepLastFrame&&s&&(s.style.display="flex"),!0===this.keepLastFrame&&(s.style.background="rgba(0,0,0,0)",s.style.zIndex="999")}if(this.checkMouseShowInterval&&(clearInterval(this.checkMouseShowInterval),this.checkMouseShowInterval=null),v.default.toggleMetricReportBulk(!1),c.default.getInitOptions().reconnect||"manual reconnect"===n){if(o===p.RTC_CODE.NEED_RECONNECT)return g("destroy code="+o+", setup reconnect server_ip="+m.default.getServerSideDescription().server_ip+" and token="+this.token),l.default.setReconnectInfo({serverIp:m.default.getServerSideDescription().server_ip,token:this.token}),void l.default.autoReconnect({msg:n,code:o});g("destroy code: "+o+" and clear reconnect token"),l.default.setReconnectInfo({serverIp:"",token:""})}g("call onDisconnect"),c.default.onDisconnect({code:o,msg:n})},e.prototype.getRemoteCursorState=function(e){this.sendAckData({data:{type:e}})},e.prototype.getIdleTime=function(){return+new Date-this.latestActionTime},e.prototype.checkUserIdle=function(){var e=this.getIdleTime();if(e>this.idleThreshold){var t=Math.floor(e/this.idleThreshold);t>this.idleTimes&&(c.default.onNetworkChange({status:"idle",times:t}),this.idleTimes=t)}},e.prototype.setCursorMode=function(e){var t=this,n=e;e===p.CURSOR_MODE.REMOTE_SRC_POS&&(n=p.CURSOR_MODE.REMOTE_SRC);var r=n===p.CURSOR_MODE.REMOTE_DRAW;if(this.sendAckData({data:{type:"set_cursor",show:n},callback:function(){t.setCursorShowing(!r)}}),this.remoteCursorMode=e,f.isMobile()||e===p.CURSOR_MODE.REMOTE_SRC_POS){var o=f.getCursorElement();o&&(o.style.background=this.originCursorStyle),f.getCursorWrapElement().style.display="block"}else f.getCursorWrapElement().style.display="none";if(e===p.CURSOR_MODE.REMOTE_SRC?this.createCdDataChannel():this.cdDataChannel&&(this.cdDataChannel.close(),this.cdDataChannel=null),e===p.CURSOR_MODE.LOCAL){var i=f.getVideoElement();i&&(g("videoElement.style.cursor will set to origin style",this.originCursorStyle),i.style.cursor="url("+this.originCursorStyle+") "+this.hotSpot.x+" "+this.hotSpot.y+", auto")}},e.prototype.getCursorMode=function(){return this.remoteCursorMode},e.prototype.setMobileCursorScale=function(e){this.mobileCursorScale=e},e.prototype.mouseEvent=function(e,t){var n;if(t={bubbles:!0,cancelable:"mousemove"!==e,view:window,detail:0,screenX:0,screenY:0,clientX:1,clientY:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:void 0},document.createEvent&&((n=document.createEvent("MouseEvents")).initMouseEvent(e,t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget||document.body.parentNode),0===n.pageX&&0===n.pageY&&Object.defineProperty)){var r=n.relatedTarget.ownerDocument||document,o=r.documentElement.doc,i=r.body.body;Object.defineProperty(n,"pageX",{get:function(){return t.clientX+((null==o?void 0:o.scrollLeft)||(null==i?void 0:i.scrollLeft)||0)-((null==o?void 0:o.clientLeft)||(null==i?void 0:i.clientLeft)||0)}}),Object.defineProperty(n,"pageY",{get:function(){return t.clientY+((null==o?void 0:o.scrollTop)||(null==i?void 0:i.scrollTop)||0)-((null==o?void 0:o.clientTop)||(null==i?void 0:i.clientTop)||0)}})}return n},e.prototype.setCursorShowing=function(e){var t=f.getVideoElement(),n=f.getCursorElement();if(this.remoteCursorMode!==p.CURSOR_MODE.REMOTE_SRC_POS){if(this.remoteCursorMode===p.CURSOR_MODE.REMOTE_DRAW)return t.style.cursor="none";t&&(t.style.cursor=e?"url("+(this.remoteCursorImage?this.remoteCursorImage:this.originCursorStyle)+") "+this.hotSpot.x+" "+this.hotSpot.y+", auto":"none"),f.isMobile()&&(e&&this.mobileShowCursor?n.style.display="block":n.style.display="none")}else e&&this.mobileShowCursor?n.style.display="block":n.style.display="none"},e.prototype.getDisplayRect=function(){var e,t=(null===(e=f.getVideoElement())||void 0===e?void 0:e.getBoundingClientRect())||b,n=t.width,r=void 0===n?0:n,o=t.height,i=void 0===o?0:o,a=t.left,s=void 0===a?0:a,c=t.top;return{left:s,top:void 0===c?0:c,width:r,height:i,pixelRatio:window.devicePixelRatio||1}},e.prototype.setDefaultCursorImage=function(e){if(void 0===e&&(e=""),f.isMobile())f.getCursorElement().style.background="url("+e+")";else{var t=f.getVideoElement();this.originCursorStyle=e,t.style.cursor="url("+e+") "+this.hotSpot.x+" "+this.hotSpot.y+", auto"}},e.prototype.toggleStatisticsView=function(){var e=document.querySelector("#__vconsole");v.default.show(!v.default.isShowing()),e&&(e.style.display=v.default.isShowing()?"":"none")},e.prototype.setNewConnectTimeout=function(e){void 0===e&&(e=60),this.newConnectTimeout=e},e.prototype.setNoflowTimeout=function(e){void 0===e&&(e=10),this.noflowTimeout=e},e.prototype.setKeepLastFrame=function(e){void 0===e&&(e=!1),this.keepLastFrame=e},e.prototype.setMobileShowCursor=function(e){void 0===e&&(e=!0),this.mobileShowCursor=e},e.prototype.setGameStatus=function(e){this.gameStatus=e},e.prototype.getIsMobileGame=function(){return this.isMobileGame},e.prototype.createCustomDataChannel=function(e){var t,n,r,a=e.label,s=void 0===a?"":a,c=e.destPort,u=void 0===c?0:c,l=e.onMessage,d=void 0===l?f.noop:l,p=e.onclose,h=void 0===p?f.noop:p,m=e.onerror,v=void 0===m?f.noop:m;return o(this,void 0,Promise,(function(){var e,o=this;return i(this,(function(i){switch(i.label){case 0:return g("start createCustomDataChannel, label: "+s+", destPort: "+u+", ackDataChannel state: "+(null===(t=this.ackDataChannel)||void 0===t?void 0:t.readyState)),"open"!==(null===(n=this.ackDataChannel)||void 0===n?void 0:n.readyState)?[2,{code:1,msg:"ack dataChannel does not open, please try again later."}]:this.customDataChannel.has(s)&&!this.firstCreateDefaultChannel?[2,{code:2,msg:"this dataChannel is already exist, please try another label again."}]:(e=null,this.firstCreateDefaultChannel?(s="cs_0",e=this.customDataChannel.get(s),this.firstCreateDefaultChannel=!1):(e=null===(r=this.peerConnection)||void 0===r?void 0:r.createDataChannel(s),this.customDataChannel.set(s,e)),e?(e.onmessage=function(e){g("dataChannel:"+s+" onmessage",e.data),d(e.data)},e.onclose=function(e){return h(e)},e.onerror=function(e){return v(e)},[4,new Promise((function(e){o.sendAckData({data:{type:"udp_trans",dest_port:u,label:s},callback:function(t){var n=t.data;g("createCustomDataChannel "+s+" success",n),e({code:n.code})}}),setTimeout((function(){e({code:3,msg:"request timeout, please try again later."})}),5e3)}))]):[3,2]);case 1:return[2,i.sent()];case 2:return g("createCustomDataChannel fail"),[2,{code:1}]}}))}))},e.prototype.sendCustomDataChannelMessage=function(e){var t=e.label,n=void 0===t?"":t,r=e.msg,o=void 0===r?"":r;o.length>1e4&&(g("please limit message length to 10000"),o=o.slice(0,1e4));var i=this.customDataChannel.get(n);g("sendCustomDataChannelMessage",o,n),"open"===(null==i?void 0:i.readyState)&&i.send(o)},e.prototype.onAnswer=function(e){return void 0===e&&(e=""),o(this,void 0,void 0,(function(){var t,n,r,o,a,s,u,l;return i(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,,6]),t=JSON.parse(e),n=t.role,r=t.game_config,o=t.input_seat,a=t.code,s=t.message,u=t.screen_config,g("onAnswer-> serverSideDescriptionObject",t),c.default.onWebrtcStatusChange({code:a,msg:s}),c.default.onConfigurationChange({screen_config:u}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"}))];case 2:return i.sent(),m.default.setGameConfig(r),m.default.setRole(n),m.default.setSeatIndex(o),m.default.setServerSideDescription(t),g("remoteDescription",this.peerConnection.remoteDescription),[3,4];case 3:return l=i.sent(),g("setRemoteDescription exception->",l),c.default.onWebrtcStatusChange({code:-1,msg:"setRemoteDescription 失败，请稍后重试."}),[3,4];case 4:return[3,6];case 5:return i.sent(),g("parse serverSideDescription error"),c.default.onWebrtcStatusChange({code:-1,msg:"parse serverSideDescription error"}),[3,6];case 6:return[2]}}))}))},e.prototype.createOffer=function(){var e;return o(this,void 0,void 0,(function(){var t,n,r,o,s,u,l,d,f,h;return i(this,(function(i){switch(i.label){case 0:return this.peerConnection.addTransceiver?c.default.getInitOptions().mic?[4,null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia({video:!1,audio:!0})]:[3,2]:[3,9];case 1:t=i.sent();try{for(n=a(t.getTracks()),r=n.next();!r.done;r=n.next())o=r.value,this.peerConnection.addTrack(o,t)}catch(e){f={error:e}}finally{try{r&&!r.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return[3,3];case 2:this.peerConnection.addTransceiver("audio",{direction:"recvonly"}),i.label=3;case 3:this.peerConnection.addTransceiver("video",{direction:"recvonly"}),g("peerConnection addTransceiver"),i.label=4;case 4:return i.trys.push([4,7,,8]),s=this.onOffer,[4,this.peerConnection.createOffer()];case 5:return[4,s.apply(this,[i.sent()])];case 6:return[2,i.sent()];case 7:return u=i.sent(),g("create offer with addTransceiver error",u),this.disconnected({message:"create offer with addTransceiver is failed",code:p.RTC_CODE.NEED_RECONNECT}),[3,8];case 8:return[3,14];case 9:g("peerConnection no addTransceiver"),i.label=10;case 10:return i.trys.push([10,13,,14]),l=this.onOffer,[4,this.peerConnection.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0})];case 11:return[4,l.apply(this,[i.sent()])];case 12:return[2,i.sent()];case 13:return d=i.sent(),g("create offer without addTransceiver error",d),this.disconnected({message:"create offer without addTransceiver is failed",code:p.RTC_CODE.NEED_RECONNECT}),[3,14];case 14:return[2]}}))}))},e.prototype.onOffer=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(i){switch(i.label){case 0:t="",n=e.sdp.split("\r\n").map((function(e){return t&&e.includes(t)&&(e+=";stereo=1"),e.includes("a=rtpmap")&&e.includes("opus")&&(t=e.split(" ")[0].split(":").pop()),e})),e.sdp=n.join("\r\n"),g("onOffer->",e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.peerConnection.setLocalDescription(e)];case 2:return i.sent(),r=this.peerConnection.localDescription,f.checkProfileLevelId(r.sdp),this.clientSideDescription=r,[2,this.clientSideDescription];case 3:return o=i.sent(),g("onOffer exception->",o),[3,4];case 4:return[2]}}))}))},e.prototype.checkAckDataChannelStatus=function(){var e,t=this;"open"===(null===(e=this.ackDataChannel)||void 0===e?void 0:e.readyState)?(this.onLoadedMetaData(),clearInterval(this.ackDataChannelTimer),this.ackDataChannelTimer=null):this.ackDataChannelTimer||(this.ackDataChannelTimer=setInterval((function(){t.checkAckDataChannelStatus()}),500))},e.prototype.onTrack=function(e){var t=this;this.mediaStream||(this.mediaStream=new MediaStream),this.mediaStream.addTrack(e.track);var n=f.getVideoElement();n.srcObject=this.mediaStream,"video"===e.track.kind&&(g("on video Track",e.streams[0].id),"wx"===f.checkBrowser()?this.checkAckDataChannelStatus():n.onloadedmetadata=function(){return t.checkAckDataChannelStatus()})},e.prototype.onLoadedMetaData=function(){var e=this;if(g("onLoadedMetaData->"),this.connectStatus===p.STATUS.DISCONNECTED)return g("connectStatus is disconnected, onLoadedMetaData return");f.getCloudGamingContainerElement().style.display="flex",f.getProgressBarElement().style.display="none",f.getVideoElement().focus(),f.getVideoElement().play().then((function(){g("video play success")})).catch((function(e){return g("onLoadedMetaData play error, ",e)})),c.default.onWebrtcStatsChange(p.PAGE_STATS.PLAYING),c.default.onConnectSuccess({code:0,index:m.default.getConfig().seat_index,seat_index:m.default.getConfig().seat_index,role:m.default.getConfig().role}),v.default.setConnectSuccessTime(+new Date),v.default.toggleMetricReportBulk(!0),this.connectStatus=p.STATUS.ESTABLISHED,this.checkMouseShowInterval||(this.checkMouseShowInterval=setInterval((function(){e.getRemoteCursorState("cursor_state"),e.checkUserIdle()}),100)),this.notifyGameLaunched(),this.startHeartbeatReport()},e.prototype.onIceConnectionStateChange=function(){g("onIceConnectionStateChange",this.peerConnection.iceConnectionState),"connected"===this.peerConnection.iceConnectionState&&v.default.setIceConnectedTime(+new Date),"disconnected"===this.peerConnection.iceConnectionState&&(g("连接已断开，请重试"),this.disconnected({message:"连接已断开，请重试",code:p.RTC_CODE.NEED_RECONNECT}))},e.prototype.createKmDataChannel=function(){var e=this;g("start createKmDataChannel"),this.kmDataChannel=this.peerConnection.createDataChannel(p.DATACHANNEL.KM,{ordered:!0,maxRetransmits:0}),this.kmDataChannel.onmessage=function(t){return e.onKmMessage(t)},this.kmDataChannel.onopen=function(t){return e.onDataChannelOpen(t)},this.kmDataChannel.onclose=function(t){return e.onDataChannelClose(t)},this.kmDataChannel.onerror=function(t){return e.onDataChannelError(t)}},e.prototype.createHbDataChannel=function(){var e=this;g("start createHbDataChannel"),this.hbDataChannel=this.peerConnection.createDataChannel(p.DATACHANNEL.HB,{ordered:!0,maxRetransmits:0}),this.hbDataChannel.onmessage=function(t){return e.onHbMessage(t)},this.hbDataChannel.onopen=function(t){return e.onDataChannelOpen(t)},this.hbDataChannel.onclose=function(t){return e.onDataChannelClose(t)},this.hbDataChannel.onerror=function(t){return e.onDataChannelError(t)}},e.prototype.createAckDataChannel=function(){var e=this;g("start createAckDataChannel"),this.ackDataChannel=this.peerConnection.createDataChannel(p.DATACHANNEL.ACK,{ordered:!0,maxRetransmits:0}),this.ackDataChannel.onmessage=function(t){return e.onAckMessage(t)},this.ackDataChannel.onopen=function(t){return e.onDataChannelOpen(t)},this.ackDataChannel.onclose=function(t){return e.onDataChannelClose(t)},this.ackDataChannel.onerror=function(t){return e.onDataChannelError(t)}},e.prototype.createCdDataChannel=function(){var e,t=this;g("start createCdDataChannel"),this.cdDataChannel=null===(e=this.peerConnection)||void 0===e?void 0:e.createDataChannel(p.DATACHANNEL.CD,{ordered:!0,maxRetransmits:0}),this.cdDataChannel&&(this.cdDataChannel.onmessage=function(e){return t.onCdMessage(e)},this.cdDataChannel.onopen=function(e){return t.onDataChannelOpen(e)},this.cdDataChannel.onclose=function(e){return t.onDataChannelClose(e)},this.cdDataChannel.onerror=function(e){return t.onDataChannelError(e)})},e.prototype.createSvDataChannel=function(){var e,t=this;g("start createSvDataChannel"),this.svDataChannel=null===(e=this.peerConnection)||void 0===e?void 0:e.createDataChannel(p.DATACHANNEL.SV,{ordered:!0,maxRetransmits:0}),this.svDataChannel&&(this.svDataChannel.onmessage=function(e){return t.onSvMessage(e)},this.svDataChannel.onopen=function(e){return t.onDataChannelOpen(e)},this.svDataChannel.onclose=function(e){return t.onDataChannelClose(e)},this.svDataChannel.onerror=function(e){return t.onDataChannelError(e)})},e.prototype.createDefaultCustomDataChannel=function(){var e,t=this;g("start createDefaultCustomDataChannel");var n=null===(e=this.peerConnection)||void 0===e?void 0:e.createDataChannel("cs_0",{ordered:!0,maxRetransmits:0});n.onopen=function(e){return t.onDataChannelOpen(e)},n.onmessage=function(e){g("defaultCustomDataChannel onmessage",e)},this.customDataChannel.set("cs_0",n)},e.prototype.onDataChannelError=function(e){var t=e||{},n=t.target,r=t.error;g(n.label+" datachannel error->",null==r?void 0:r.message)},e.prototype.onDataChannelOpen=function(e){var t=(e||{}).target;g(t.label+" datachannel open->",t.readyState),"hb"===t.label&&this.startHeartbeatReport()},e.prototype.onDataChannelClose=function(e){var t=(e||{}).target;g(t.label+" datachannel close->",t.readyState)},e.prototype.onKmMessage=function(e){var t=JSON.parse(e.data);this.debugSetting.showOnKmMessage&&console.log("onKmMessage",t);var n=t.screen_width,r=t.screen_height,o=t.screen_left,i=t.screen_top,a=t.orientation,s=t.cursor_showing;h.default.remoteScreenResolutionChange({width:n,height:r,left:o,top:i,orientation:a}),v.default.setCpuAndGpuUsage({cpu:t.cpu_usage,gpu:t.gpu_usage}),this.setCursorShowStatus(s)},e.prototype.onHbMessage=function(e){var t=JSON.parse(e.data),n=t.token,r=t.code,o=t.user_id,i=t.timestamp,a=t.message;if(n&&(this.token=n),this.debugSetting.showOnHbMessage&&console.log("onHbMessage",t),r>=0&&(g("onHbMessage",a),this.disconnected({message:a,code:r})),o&&c.default.onNetworkChange({status:"stats",stats:t}),i){var s=+new Date-+i;v.default.setRTT(s)&&c.default.onNetworkChange({status:"jitter",value:s})}},e.prototype.onAckMessage=function(e){try{var t=JSON.parse(e.data),n=t.data,r=void 0===n?b:n,o=t.seq;if(this.debugSetting.showOnAckMessage&&("cursor_state"===r.type||console.log("onAckMessage",r,o)),o){var i=this.dataChannelAckCallbacks[o];if(v.default.setInputEnd(o),i){var a=(i.ackMsg||b).data,s=a.type,u=a.down;if("mouseleft"===s&&!u){var l=r.hit_input;c.default.onInputStatusChange({oldStatus:this.lastInputStatus,newStatus:l}),this.lastInputStatus=l}var f=i.callback;delete this.dataChannelAckCallbacks[o],this.dataChannelRetryTimers[o]&&(clearTimeout(this.dataChannelRetryTimers[o]),delete this.dataChannelRetryTimers[o]),null==f||f({code:0,msg:"on ack message",data:r})}}switch(r.type){case"cursor_state":if(!r.state)return;this.setCursorShowStatus("showing"===r.state);break;case"game_launched":this.clientInfo=r,g("got client info",r),d.default.set("gamelaunched",JSON.stringify(r),90),this.notifyGameLaunched();break;case"input_seat":g("got new input_seat",r),m.default.setSeatIndex(r.input_seat);break;case"user_state":g("got user state",r),c.default.onNetworkChange({status:"userstate",data:r});break;case"open_url":g("got open_url",r),c.default.onNetworkChange({status:"openurl",data:r.url});break;case"vmaf_test":c.default.onVmafChange(r);case"cursor_pos":if(this.remoteCursorMode===p.CURSOR_MODE.REMOTE_SRC_POS){var y=r.x,C=r.y,S=h.default.transferLocalScale({width:y-this.hotSpot.x,height:C-this.hotSpot.y}),w=S.width,k=S.height;h.default.updateCursorPosition({displayX:w,displayY:k})}}}catch(e){g("onAckMessage exception->",e)}},e.prototype.onCdMessage=function(e){var t=this,n=e.data;if(n)try{var r=JSON.parse(n),o=r.data,i=r.hotspotx,a=void 0===i?0:i,s=r.hotspoty,c=void 0===s?0:s;this.debugSetting.showOnCdMessage&&g("onCdMessage image data->"+o.length+" "+y.default(o),"hotspotx",a,"hotspoty",c),this.hotSpot.x=a,this.hotSpot.y=c;var u="data:image/png;base64,"+o;this.remoteCursorImage=u;var l=new Image;l.onload=function(){if(f.isMobile()||t.remoteCursorMode===p.CURSOR_MODE.REMOTE_SRC_POS){f.getCursorElement().style.background="url("+u+")";var e=h.default.transferLocalScale({width:l.width,height:l.height}),n=e.width,r=e.height;t.resizeMobileCursor({width:n,height:r})}else{var o=f.getVideoElement();o&&(o.style.cursor="url("+u+") "+t.hotSpot.x+" "+t.hotSpot.y+", auto")}},l.onerror=function(e){g("onCdMessage image data load failed",e)},l.src=u}catch(e){g("onCdMessage data parse failed",e)}else g("onCdMessage no data")},e.prototype.onSvMessage=function(e){var t=e.data;if(t)try{var n=JSON.parse(t),o=n.type,i=n.data;switch(this.debugSetting.showOnSvMessage&&g("onSvMessage","type: ",o,"data",t),o){case"game_start_complete":c.default.onGameStartComplete(i);break;case"archive_load_status":c.default.onLoadGameArchive(i);break;case"archive_save_status":c.default.onSaveGameArchive(i);break;case"metric_sig_key":m.default.setServerSideDescription(r(r({},m.default.getServerSideDescription()),{sig_key:i.sig_key}));break;case"screen_config_change":c.default.onConfigurationChange({screen_config:i});break;default:g("onSvMessage, type:",o,"data: ",i)}}catch(e){g("onSvMessage data parse failed",e)}else g("onCdMessage no data")},e.prototype.resizeMobileCursor=function(e){var t=e.width,n=void 0===t?13:t,r=e.height,o=void 0===r?13:r,i=f.getCursorElement();i.style.width=Math.round(n*this.mobileCursorScale)+"px",i.style.height=Math.round(o*this.mobileCursorScale)+"px",i.style.backgroundSize="contain"},e.prototype.notifyGameLaunched=function(){var e=d.default.get("gamelaunched");e?c.default.onNetworkChange({status:"gamelaunched",data:{begin:e.launch_begin,finish:e.launch_complete}}):g("gamelaunched cookie expired")},e.prototype.reportStat=function(){var e=v.default.getStats(),t=e.fps;if(this.connectStatus===p.STATUS.CONNECTING&&(this.connectTimeoutCount+=1,this.connectTimeoutCount>=this.newConnectTimeout&&(g("connecting timeout, no-flow notify"),c.default.onNetworkChange({status:"noflow"}),this.disconnected({message:"connect "+this.newConnectTimeout+" times and timeout, please reconnecting",code:p.RTC_CODE.NEED_RECONNECT}),this.connectTimeoutCount=0)),this.connectStatus===p.STATUS.ESTABLISHED&&(0===t&&"playing"===this.gameStatus?(this.noFlowCount+=1,this.noFlowCount>=this.noflowTimeout&&(g("noFlowCount reach, no-flow notify"),c.default.onNetworkChange({status:"noflowcenter"}),this.disconnected({message:"no flow and fps is 0, please reconnecting",code:p.RTC_CODE.NEED_RECONNECT}),this.noFlowCount=0)):this.noFlowCount=0),!this.hbDataChannel)return g("hbDataChannel has been closed");if(e.timestamp=+new Date,this.connectStatus!==p.STATUS.DISCONNECTED){var n=e.fps,o=e.delay,i=e.bit_rate,a=e.packet_lost,s=e.nack,u=e.packet_received,l=r(r({},e),{fps:""+n,delay:""+o,bit_rate:""+i,packet_lost:""+a,nack:""+s,packet_received:""+u});this.dataChannelSend(this.hbDataChannel,l),this.debugSetting.showSendHbData&&console.log("sendHbData",l),c.default.onNetworkChange({status:"stats",stats:e})}v.default.addReportStat(),this.clientInfo&&d.default.set("gamelaunched",this.clientInfo,90)},e.prototype.dataChannelSend=function(e,t){"open"===(null==e?void 0:e.readyState)&&e.send(JSON.stringify(t))},e.prototype.dataChannelSendWithCallback=function(e){var t=this,n=e.dataChannel,r=void 0===n?null:n,o=e.ackMsg,i=void 0===o?b:o,a=e.retry,s=void 0===a?0:a,c=e.callback,u=void 0===c?f.noop:c,l=e.interval,d=void 0===l?1e3:l;if("open"===(null==r?void 0:r.readyState))try{var p=i.seq;if(p||(p=f.getSequence(),v.default.setInputStart(p)),r.send(JSON.stringify(i)),this.dataChannelAckCallbacks[p]={ackMsg:i,retry:s,callback:u,interval:d,ackTimeout:function(){if(!t.dataChannelAckCallbacks[p])return g(r.label,p,"ackItem not exist");var e=t.dataChannelAckCallbacks[p];if(e.retry>=1||-1===e.retry)g(r.label,p,"ackItem retry, remain "+(e.retry+1)+" times"),e.retry=e.retry>=1?e.retry-1:e.retry,t.dataChannelSendWithCallback({dataChannel:r,ackMsg:e.ackMsg,retry:e.retry,callback:e.callback,interval:e.interval});else{var n=e.callback;delete t.dataChannelAckCallbacks[p],t.dataChannelRetryTimers[p]&&(v.default.setInputEnd(p),clearTimeout(t.dataChannelRetryTimers[p]),delete t.dataChannelRetryTimers[p],g("ack msg timer timeout clear:",p)),n({code:1,msg:"ack timeout"}),g("ack timeout:",p)}}},s>0){var h=setTimeout((function(){var e;null===(e=t.dataChannelAckCallbacks[p])||void 0===e||e.ackTimeout()}),d);this.dataChannelRetryTimers[p]=h}}catch(e){g("ack msg exception:",e)}},e.prototype.setCursorShowStatus=function(e){this.isMobileGame?(this.showCursor=!1,this.setCursorShowing(!1)):(this.forceShowCursor?this.setMouseCanLock(!1):e?this.remoteCursorMode===p.CURSOR_MODE.REMOTE_SRC_POS?this.setMouseCanLock(!0):this.setMouseCanLock(!1):this.setMouseCanLock(!0),e!==this.showCursor&&(g("cursor show stat will set to",e),c.default.onCursorShowStatChange({oldStatus:this.showCursor,newStatus:e})),this.showCursor=e,this.setCursorShowing(e))},e}());window.CloudGamingWebRTC=C,t.default=C},7037:function(e,t,n){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4276),i=function(){function e(){}return e.set=function(e,t,n){"object"==typeof t&&(t=JSON.stringify(t)),t=o.Base64.encode(t),document.cookie=e+"="+t+";max-age="+n},e.get=function(e){var t,n,i,a=document.cookie.replace(/[ ]/g,"").split(";");try{for(var s=r(a),c=s.next();!c.done;c=s.next()){var u=c.value.split("=");if(e===u[0]){i=o.Base64.decode(u[1]);try{i=JSON.parse(i)}catch(e){}break}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i},e.remove=function(e){document.cookie=e+"=;max-age=0"},e}();t.default=i},5652:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(7278)),u=s(n(5098)),l=n(9667),d=n(7040),p=s(n(9034)),f=s(n(8077)).default.log,h=function(){function e(){this.loginTaskFinish=!0,this.repeatKey=function(e,t){for(var n=[],r=0;r<t;++r)n.push({type:"keyboard",key:e,down:!0}),n.push({type:"keyboard",key:e,down:!1});return n},this.eventFromChar=function(e){var t=[],n=d.codeMap[e];return n&&(n.shift&&t.push({type:"keyboard",key:16,down:!0}),t.push({type:"keyboard",key:n.key,down:!0}),t.push({type:"keyboard",key:n.key,down:!1}),n.shift&&t.push({type:"keyboard",key:16,down:!1})),t}}return e.prototype.getLoginHelperInfo=function(){return u.default.getConfig().login_helper},e.prototype.inputLoginInfo=function(e){var t=this,n=e.loginData,s=void 0===n?d.empty:n,u=e.callback,h=void 0===u?d.noop:u;this.loginTaskFinish||h({code:1,finish:!1,msg:"last task is not complete"});var m=s.acc,v=s.pwd,y=this.getLoginHelperInfo();if(null==y?void 0:y.title){var g=y.before_script,b=void 0===g?[]:g,C=y.acc_pos,S=y.pwd_pos,w=y.title,k=y.after_script,E=void 0===k?[]:k;p.default.sendAckData({data:{type:"wnd_pos",name:w},callback:function(e){return r(t,void 0,void 0,(function(){var t,n,r,s,u,p,y,g,w,k,T=this;return o(this,(function(o){switch(o.label){case 0:return f("internalLoginHelper->res",e),t=e.code,n=e.data,r=n.found,s=n.left,u=void 0===s?0:s,p=n.top,y=void 0===p?0:p,0!==t||1!==r?[3,3]:(f("login helper script is running->",n),this.loginTaskFinish=!1,g=b.map((function(e){return"mousemove"===e.type?{type:e.type,x:e.x+u,y:e.y+y}:e})),c.default.sendSeqRawEvents(g),[4,d.sleep(1500)]);case 1:return o.sent(),f("account and password input is running"),(w=[]).push({type:"mousemove",x:u+C.x,y:y+C.y}),w.push({type:"mouseleft",down:!0}),w.push({type:"mouseleft",down:!1}),w.push({type:"keyboard",key:l.KEYCODE.End,down:!0}),w.push({type:"keyboard",key:l.KEYCODE.End,down:!1}),w=w.concat(this.repeatKey(l.KEYCODE.Backspace,32)),a([],i(m)).map((function(e){return w.push.apply(w,a([],i(T.eventFromChar(e))))})),w.push({type:"mousemove",x:u+S.x,y:y+S.y}),w.push({type:"mouseleft",down:!0}),w.push({type:"mouseleft",down:!1}),w.push({type:"keyboard",key:l.KEYCODE.End,down:!0}),w.push({type:"keyboard",key:l.KEYCODE.End,down:!1}),w=w.concat(this.repeatKey(l.KEYCODE.Backspace,32)),a([],i(v)).map((function(e){return w.push.apply(w,a([],i(T.eventFromChar(e))))})),c.default.sendSeqRawEvents(w),[4,d.sleep(1500)];case 2:o.sent(),k=E.map((function(e){return"mousemove"===e.type?{type:e.type,x:e.x+u,y:e.y+y}:e})),c.default.sendSeqRawEvents(k),this.loginTaskFinish=!0,h({code:0,finish:this.loginTaskFinish,msg:"success"}),o.label=3;case 3:return[2]}}))}))}})}else this.loginTaskFinish=!0,h({code:1,finish:this.loginTaskFinish,msg:"does not find loginHelper info."}),f("internalLoginHelper loginInfo failed",y)},e.prototype.loginWindowStat=function(e){void 0===e&&(e=d.noop);var t=this.getLoginHelperInfo().title;p.default.sendAckData({data:{type:"wnd_pos",name:t||"cloud_gaming_dummy_title"},callback:e})},e}();t.default=new h},319:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(7278)),u=n(2848),l=n(2561),d=n(7040),p=s(n(9034)),f=n(9667),h=s(n(8077)),m=s(n(2302)),v=s(n(1033)),y=s(n(5315)),g=s(n(1795)),b=h.default.log,C=!0,S=new(function(){function e(){var e=this;this.moveSensitivity=1,this.touchesForDelta=null,this.touchesIdentifierMap=new Map,this.mousePosition={x:0,y:0,movementX:0,movementY:0},this.tabletModeLastPosition=null,this.deltaMoveToCalcX=0,this.deltaMoveToCalcY=0,this.escPressTime=null,this.tabletMode=!1,this.clickToFullscreen=!1,this.webDraftLevel=u.WEB_DRAFT_LEVEL.CLOSE_HIGH_FREQUENCY,this.videoWidth=0,this.videoHeight=0,this.videoLeft=0,this.videoTop=0,this.remoteScreenWidth=0,this.remoteScreenHeight=0,this.remoteScreenLeft=0,this.remoteScreenTop=0,this.orientation=0,this.dropMouseEvent=!1,this.videoOrientation=0,this.resizeObserver=null,window.addEventListener("online",(function(t){e.onNetwork(t)}),!1),window.addEventListener("offline",(function(t){e.onNetwork(t)}),!1)}return e.prototype.init=function(e){var t,n;this.tabletMode=e.tabletMode,this.clickToFullscreen=e.clickToFullscreen,this.webDraftLevel=null!==(t=e.webDraftLevel)&&void 0!==t?t:u.WEB_DRAFT_LEVEL.CLOSE_HIGH_FREQUENCY,C=null===(n=e.enableEventIntercept)||void 0===n||n},e.prototype.addEventHandler=function(){var e=this;this.addKMHandler(),this.addTouchHandler(),d.isMobile()||m.default.addGamepadHandler(),document.body.addEventListener("click",(function(){e.onBodyClick()}),!1),d.getVideoElement().addEventListener("click",(function(){d.getVideoElement().focus()})),d.getCursorWrapElement().addEventListener("click",(function(){d.getVideoElement().focus()})),window.addEventListener("orientationchange",(function(){b("orientationchange"),e.reshapeWindow()})),window.addEventListener("resize",(function(t){b("onresize",t),e.reshapeWindow()})),this.fullscreenChange(),p.default.sendKmData({type:"mousedeltamove",x:1,y:1}),this.addOrientationDetector()},e.prototype.setTabletMode=function(e){this.tabletMode=e},e.prototype.setMoveSensitivity=function(e){this.moveSensitivity=1/e},e.prototype.getMoveSensitivity=function(){return this.moveSensitivity},e.prototype.remoteScreenResolutionChange=function(e){var t=e.width,n=e.height,r=e.left,o=e.top,i=e.orientation;this.remoteScreenWidth===t&&this.remoteScreenHeight===n&&this.remoteScreenLeft===r&&this.remoteScreenTop===o&&this.orientation===i||(this.remoteScreenWidth=t,this.remoteScreenHeight=n,this.remoteScreenLeft=r,this.remoteScreenTop=o,this.orientation=i,b("remoteScreenResolutionChange->"+t+" "+n+" "+r+" "+o+" "+i))},e.prototype.clearRemoteKeys=function(){p.default.sendAckData({data:{type:"keys_clean"},retry:5,interval:2e3})},e.prototype.transferLocalScale=function(e){var t=e.width,n=void 0===t?1:t,r=e.height,o=void 0===r?1:r;return{width:this.videoWidth/this.remoteScreenWidth*n,height:this.videoHeight/this.remoteScreenHeight*o}},e.prototype.mouseMove=function(e,t,n,r){var o,i,a=p.default.getDisplayRect(),s=a.left,c=a.top,u=a.width,l=a.height;if(this.tabletMode?(this.tabletModeLastPosition||(this.tabletModeLastPosition={x:n,y:r}),this.mousePosition.x=this.mousePosition.x+(n-this.tabletModeLastPosition.x),this.mousePosition.y=this.mousePosition.y+(r-this.tabletModeLastPosition.y),this.mousePosition.x<=s&&(this.mousePosition.x=s),this.mousePosition.x>=u+s&&(this.mousePosition.x=u+s),this.mousePosition.y<=c&&(this.mousePosition.y=c),this.mousePosition.y>=l+c&&(this.mousePosition.y=l+c),this.tabletModeLastPosition={x:n,y:r}):this.mousePosition={x:n,y:r,movementX:n-this.mousePosition.x,movementY:r-this.mousePosition.y},90===this.videoOrientation?(o=this.mousePosition.y-c,i=this.videoWidth-this.mousePosition.x+s):(o=this.mousePosition.x-s,i=this.mousePosition.y-c),this.updateCursorPosition({displayX:o,displayY:i}),"touchstart"===t)if(p.default.getCursorShowStatus()){var d=this.moveTo(o,i),f=d.remoteX,h=d.remoteY;p.default.sendKmData({type:"mousemove",x:f,y:h})}else b("cursor is not showing, cursor will not move");if("touchmove"===t)if(p.default.getCursorShowStatus()){var m=this.moveTo(o,i);f=m.remoteX,h=m.remoteY,p.default.sendKmData({type:"mousemove",x:f,y:h})}else{var v=this.deltaMoveTo(this.mousePosition.movementX,this.mousePosition.movementY),y=v.remoteDeltaX,g=v.remoteDeltaY;p.default.sendKmData({type:"mousedeltamove",x:y,y:g})}"touchend"!==t&&"touchcancel"!==t||(this.tabletModeLastPosition=null)},e.prototype.mobileTouchMove=function(e){var t=e.finger_id,n=e.event_type,r=e.x,o=e.y,i=e.width,a=e.height,s=e.timestamp;p.default.sendKmData({type:"event_touch",finger_id:t,event_type:n,x:r,y:o,width:i,height:a,timestamp:s})},e.prototype.fullscreen=function(e){var t,n;void 0===e&&(e=document.documentElement),b("enter fullscreen"),y.default.requestFullscreen?e[y.default.requestFullscreen]():e.webkitEnterFullScreen();try{null===(n=null===(t=navigator)||void 0===t?void 0:t.keyboard)||void 0===n||n.lock(["Escape","F11"])}catch(e){b("lockKeyboard",e)}},e.prototype.exitFullscreen=function(e){var t,n;return void 0===e&&(e=document.documentElement),o(this,void 0,void 0,(function(){return i(this,(function(r){return b("exit fullscreen"),y.default.exitFullscreen?null===(n=null===(t=document[y.default.exitFullscreen]())||void 0===t?void 0:t.catch)||void 0===n||n.call(t,(function(e){return console.log("exit full screen failed, ",null==e?void 0:e.message)})):e.webkitExitFullScreen(),[2]}))}))},e.prototype.resetLastPosition=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,o=void 0===r?0:r;this.mousePosition.x=n,this.mousePosition.y=o},e.prototype.updateCursorPosition=function(e){var t=e.displayX,n=e.displayY,r=d.getCursorElement(),o=d.getCursorWrapElement(),i=p.default.getDisplayRect(),a=i.width,s=i.height;o&&(t>a&&(t=a),n>s&&(n=s),t<0&&(t=0),n<0&&(n=0)),r&&(r.style.top=n+"px",r.style.left=t+"px",r.style.zIndex="999")},e.prototype.setDropMouseEvent=function(e){this.dropMouseEvent=e},e.prototype.setWebDraftLevel=function(e){void 0===e&&(e=0),this.webDraftLevel=e},e.prototype.setEnableEventIntercept=function(e){void 0===e&&(e=!0),C=e},e.prototype.setVideoOrientation=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!0),this.videoOrientation=e,d.isMobile()&&t){var n=document.querySelector("html");90===e&&(n.className="rotate-html-90"),270===e&&(n.className="rotate-html-270"),0===e&&(n.className="")}},e.prototype.showKeyboard=function(e){var t=this;if(void 0===e&&(e=!1),d.isMobile()){var n=d.getFakeInput();e?(n.style.display="block",n.focus(),n.onkeydown=function(e){t.onKeyEvent(e)},n.onkeyup=function(e){t.onKeyEvent(e)}):null==n||n.blur(),n.onfocus=function(){n.style.display="block"},n.onblur=function(){n.style.display="none"}}},e.prototype.reshapeWindow=function(){var e=this,t=d.getVideoElement(),n=d.getCursorWrapElement();if(t){var r=d.getCloudGamingContainerElement(),o=c.default.getInitOptions().fullVideoToScreen;r.clientWidth>t.videoWidth&&r.clientHeight>t.videoHeight&&o&&(r.clientWidth/r.clientHeight>t.videoWidth/t.videoHeight?(t.style.height="100%",t.style.width=null):(t.style.width="100%",t.style.height=null)),(r.clientWidth<t.videoWidth||r.clientHeight<t.videoHeight)&&(t.style.width=null,t.style.height=null);var i=function(){var r=t.getBoundingClientRect(),o=r.width,i=r.height,a=r.top,s=r.left;n.style.height=i+"px",n.style.width=o+"px",n.style.left=s+"px",n.style.top=a+"px",e.videoWidth=o,e.videoHeight=i,e.videoLeft=s,e.videoTop=a,b("videoResolutionChange-> width: "+e.videoWidth+", height: "+e.videoHeight+", left: "+e.videoLeft+", top: "+e.videoTop)};i(),this.resizeObserver||(this.resizeObserver=new v.default((function(){i()})),this.resizeObserver.observe(t))}},e.prototype.addKMHandler=function(){var e=this;d.isMobile()||(this.webDraftLevel===u.WEB_DRAFT_LEVEL.CLOSE_HIGH_FREQUENCY?document.addEventListener("mousemove",(function(t){e.onMouseMove(t)}),!1):document.addEventListener("pointermove",(function(t){e.onMouseMove(t)}),!1),document.addEventListener("mousedown",(function(t){e.onMouseDown(t)}),!1),document.addEventListener("mouseup",(function(t){e.onMouseUp(t)}),!1)),document.addEventListener("wheel",(function(t){e.onWheel(t)}),!1),document.addEventListener("keydown",(function(t){e.onKeyEvent(t)}),!1),document.addEventListener("keyup",(function(t){e.onKeyEvent(t)}),!1),document.addEventListener("keypress",(function(){e.onKeyPress()}),!1),document.addEventListener("contextmenu",(function(t){e.onContextMenu(t)}),!1),document.addEventListener("fullscreenchange",(function(){e.fullscreenChange()}),!1),window.addEventListener("visibilitychange",(function(){e.visibilityChange()}),!1),window.addEventListener("focus",(function(){e.focusChange()}),!1),window.addEventListener("blur",(function(){e.focusChange()}),!1),document.addEventListener("pointerlockchange",(function(){e.pointerlockchange()})),document.addEventListener("paste",(function(t){e.onPaste(t)}))},e.prototype.addTouchHandler=function(){var e=this;document.addEventListener("touchmove",(function(t){return e.onTouch(t)}),!1),document.addEventListener("touchstart",(function(t){return e.onTouch(t)}),!1),document.addEventListener("touchend",(function(t){return e.onTouch(t)}),!1),document.addEventListener("touchcancel",(function(t){return e.onTouch(t)}),!1),document.addEventListener("gesturestart",(function(e){e.preventDefault()}))},e.prototype.fullscreenChange=function(){if(d.isFullScreen()){b("enter fullscreenChange");try{d.getVideoElement().focus()}catch(e){b("fullscreenChange error,",e)}}this.reshapeWindow()},e.prototype.addOrientationDetector=function(){var e=c.default.getInitOptions(),t=e.autoRotateContainer,n=e.mobileGame,r=window.matchMedia("(orientation: portrait)");(null==r?void 0:r.matches)?(c.default.onOrientationChange({type:"portrait"}),t&&(n?c.default.setVideoOrientation(0):c.default.setVideoOrientation(90))):(c.default.onOrientationChange({type:"landscape"}),t&&(n?c.default.setVideoOrientation(270):c.default.setVideoOrientation(0))),r.addListener((function(e){e.matches?(c.default.onOrientationChange({type:"portrait"}),t&&(n?c.default.setVideoOrientation(0):c.default.setVideoOrientation(90))):(c.default.onOrientationChange({type:"landscape"}),t&&(n?c.default.setVideoOrientation(270):c.default.setVideoOrientation(0)))}))},e.prototype.visibilityChange=function(){return this.clearRemoteKeys(),document.hidden},e.prototype.onNetwork=function(e){b("onNetwork",e.type),c.default.onNetworkChange({status:e.type})},e.prototype.focusChange=function(){this.clearRemoteKeys()},e.prototype.pointerlockchange=function(){},e.prototype.onPaste=function(e){console.log("onPaste",e,e.clipboardData.getData("text/plain"))},e.prototype.onContextMenu=function(e){e.preventDefault()},e.prototype.transferRemotePosition=function(e){var t=e.displayX,n=void 0===t?1:t,r=e.displayY,o=void 0===r?1:r,i=e.moveSensitivity,a=void 0===i?1:i,s=Math.round(n*this.remoteScreenWidth/this.videoWidth/a)+this.remoteScreenLeft,c=Math.round(o*this.remoteScreenHeight/this.videoHeight/a)+this.remoteScreenTop;return 90!==this.videoOrientation&&270!==this.videoOrientation||(s=Math.round(n*this.remoteScreenWidth/this.videoHeight/a)+this.remoteScreenLeft,c=Math.round(o*this.remoteScreenHeight/this.videoWidth/a)+this.remoteScreenTop),{x:s,y:c}},e.prototype.onTouch=function(e){var t,n,r=e.type,o=e.changedTouches,i=e.timeStamp,s=[];try{for(var l=a(o),d=l.next();!d.done;d=l.next()){var f=d.value,h=f.pageX,m=f.pageY,v=f.identifier,y=this.transferRemotePosition({displayX:h-this.videoLeft,displayY:m-this.videoTop}),g=y.x,b=y.y;g-=this.remoteScreenLeft,b-=this.remoteScreenTop;var C=this.touchesForDelta||{lastX:g,lastY:b},S=(g-C.lastX)/this.moveSensitivity,w=(b-C.lastY)/this.moveSensitivity;if(this.touchesForDelta={lastX:g,lastY:b},p.default.getIsMobileGame()){var k=r;if("touchstart"===r&&this.touchesIdentifierMap.set(v,this.touchesIdentifierMap.size),270===this.videoOrientation){var E=this.transferRemotePosition({displayX:this.videoHeight-m,displayY:h-this.videoLeft}),T=E.x,_=E.y;g=T-this.remoteScreenLeft,b=_-this.remoteScreenTop}this.mobileTouchMove({finger_id:this.touchesIdentifierMap.get(v),event_type:u.TOUCH_EVENT_TYPE[k],x:g,y:b,width:this.remoteScreenWidth,height:this.remoteScreenHeight,timestamp:i}),"touchend"!==r&&"touchcancel"!==r||this.touchesIdentifierMap.delete(v)}s.push({id:v,type:r,cursorShow:p.default.getCursorShowStatus(),x:g,y:b,pageX:h,pageY:m,movementX:S,movementY:w})}}catch(e){t={error:e}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(t)throw t.error}}c.default.onTouchEvent(s)},e.prototype.onMouseMove=function(e){var t,n;if(!p.default.getIsMobileGame()&&!this.dropMouseEvent){var r="getCoalescedEvents"in e?e.getCoalescedEvents():[e],o=null;this.webDraftLevel===u.WEB_DRAFT_LEVEL.UNPACKAGE_SEND&&r.length>3?(b("webDraftLevel 1 and events length is "+r.length+", only pick 3 events"),r.splice(0,r.length-3)):this.webDraftLevel===u.WEB_DRAFT_LEVEL.PACKAGE_SEND&&(b("webDraftLevel 2 and events length is "+r.length+", will send seq events"),o=[]);try{for(var i=a(r),s=i.next();!s.done;s=i.next()){var c=s.value,l=c.offsetX,d=c.offsetY,f=c.movementX,h=c.movementY,m=l,v=d;if(m<0&&(m=0),v<0&&(v=0),p.default.mouseDeltaMove()||!p.default.getCursorShowStatus()&&m===this.mousePosition.x&&v===this.mousePosition.y){var y=this.deltaMoveTo(f,h),g=y.remoteDeltaX,C=y.remoteDeltaY;o?o.push({type:"mousedeltamove",x:g,y:C}):p.default.sendKmData({type:"mousedeltamove",x:g,y:C})}else{var S=this.moveTo(m,v),w=S.remoteX,k=S.remoteY;o?o.push({type:"mousemove",x:w,y:k}):p.default.sendKmData({type:"mousemove",x:w,y:k})}this.mousePosition.x=m,this.mousePosition.y=v}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}this.webDraftLevel===u.WEB_DRAFT_LEVEL.PACKAGE_SEND&&p.default.sendKmData({type:"key_seq",keys:o.map((function(e){return JSON.stringify(e)}))})}},e.prototype.moveTo=function(e,t){var n=this.transferRemotePosition({displayX:e,displayY:t});return{remoteX:n.x,remoteY:n.y}},e.prototype.deltaMoveTo=function(e,t){var n,r,o=this.transferRemotePosition({displayX:e,displayY:t,moveSensitivity:this.moveSensitivity}),i=o.x,a=o.y,s=null!==(n=i-this.remoteScreenLeft)&&void 0!==n?n:0,c=null!==(r=a-this.remoteScreenTop)&&void 0!==r?r:0;return this.deltaMoveToCalcX+=s,this.deltaMoveToCalcY+=c,this.deltaMoveToCalcX<0&&(this.deltaMoveToCalcX=0),this.deltaMoveToCalcY<0&&(this.deltaMoveToCalcY=0),this.deltaMoveToCalcX>this.remoteScreenWidth&&(this.deltaMoveToCalcX=this.remoteScreenWidth),this.deltaMoveToCalcY>this.remoteScreenHeight&&(this.deltaMoveToCalcX=this.remoteScreenHeight),{remoteDeltaX:s,remoteDeltaY:c}},e.prototype.isRightClick=function(e){return"which"in e?3===e.which:"button"in e?2===e.button:void 0},e.prototype.determineButtonType=function(e){var t;return null!==(t=["mouseleft","mousemiddle","mouseright","mousebackward","mouseforward","unused","unused"][e.button])&&void 0!==t?t:""},e.prototype.onMouseDown=function(e){p.default.sendKmData({type:this.determineButtonType(e),down:!0}),this.isRightClick(e)&&this.tryToCursorLock(),3!==e.button&&4!==e.button||e.preventDefault()},e.prototype.onMouseUp=function(e){p.default.sendKmData({type:this.determineButtonType(e),down:!1})},e.prototype.onWheel=function(e){p.default.sendKmData({type:"mousescroll",delta:e.deltaY})},e.prototype.onKeyEvent=function(e){e.preventDefault();var t=e.which||e.keyCode,n=e.ctrlKey,r=e.altKey,o=e.type;if("keyup"===o){if(n){if(t===f.KEYCODE.Space)return p.default.sendKmData({type:"keyboard",key:t,down:!0}),void setTimeout((function(){p.default.sendKmData({type:"keyboard",key:t,down:!1})}),10);t===f.KEYCODE.Backquote&&p.default.toggleStatisticsView()}t===f.KEYCODE.Escape&&(+new Date-this.escPressTime>300&&(p.default.setMouseCanLock(!1),p.default.setForceShowCursor(!0)),this.escPressTime=null)}if("keydown"===o&&(t===f.KEYCODE.X&&r||t===f.KEYCODE.Escape?(t===f.KEYCODE.X&&r&&(p.default.setMouseCanLock(!1),p.default.setForceShowCursor(!0)),t===f.KEYCODE.Escape&&(this.escPressTime||(this.escPressTime=+new Date))):this.tryToCursorLock()),g.default.ua.includes("Mac")&&t===f.KEYCODE.CapsLock)return p.default.sendKmData({type:"keyboard",key:t,down:!0}),void setTimeout((function(){p.default.sendKmData({type:"keyboard",key:t,down:!1})}),10);p.default.sendKmData({type:"keyboard",key:t,down:"keydown"===o})},e.prototype.onKeyPress=function(){},e.prototype.onBodyClick=function(){this.playAudioVideo(),d.isMobile()||d.isFullScreen()||!this.clickToFullscreen||(b("click to fullscreen->",this.clickToFullscreen),this.fullscreen())},e.prototype.tryToCursorLock=function(){document.pointerLockElement||p.default.getCursorShowStatus()&&!p.default.mouseDeltaMove()||(p.default.setMouseCanLock(!0),p.default.setForceShowCursor(!1),b("toggleMouseLock true, auto run requestPointerLock"))},e.prototype.playAudioVideo=function(){var e=d.getVideoElement();if(e){e.muted=!1;try{e.play()}catch(e){b("play video error",e)}}var t=d.getAudioElement();if(t)try{t.play()}catch(e){b("play audio error",e)}},r([l.interceptUserEvent(C)],e.prototype,"onTouch",null),r([l.interceptUserEvent(C)],e.prototype,"onMouseMove",null),r([l.interceptUserEvent(C)],e.prototype,"onMouseDown",null),r([l.interceptUserEvent(C)],e.prototype,"onMouseUp",null),r([l.interceptUserEvent(C)],e.prototype,"onWheel",null),r([l.interceptUserEvent(C)],e.prototype,"onKeyEvent",null),e}());window.PageEvent=S,t.default=S},8506:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(7278)),s=i(n(365)),c=n(2848),u=i(n(9034)),l=i(n(5098)),d=i(n(8077)),p=n(4276),f=d.default.log,h=function(){function e(){this.token="",this.serverIp="",this.tokenExpired=0}return e.prototype.autoReconnect=function(e){var t=e.msg,n=e.code;return r(this,void 0,void 0,(function(){var e,r,i,d=this;return o(this,(function(o){switch(o.label){case 0:return this.serverIp&&this.token?(0===this.tokenExpired&&(this.tokenExpired=(new Date).getTime()+8e4),[4,u.default.newWebRtcConnect()]):(f("Watchdog, autoReconnect, serverIp:"+this.serverIp+" or token:"+this.token+" is not set, abort"),[2,a.default.onDisconnect({code:2,msg:"reconnect failed"})]);case 1:return o.sent(),u.default.startHeartbeatReport(),e=u.default.getClientSideDescription(),r=l.default.getServerSideDescription().user_id,i="https://service-rapy5zig-1258344699.gz.apigw.tencentcs.com/release/cg_proxy_js?host="+this.serverIp+"&port=7392&token="+this.token+"&css="+e+"&uid="+r,f("Watchdog reconnect url",i),s.default(i,(function(e,r){var o,i=null;try{i=JSON.parse(p.Base64.decode(r))}catch(e){f("serverSession parse error",e)}if(f("Watchdog jsonp serverSession",i),0===i.code)f("Watchdog, reconnect proxy successful, reset token expired"),u.default.connect(r),d.tokenExpired=0;else{if(2===(null===(o=i)||void 0===o?void 0:o.retcode))return d.tokenExpired=0,void a.default.onDisconnect({code:c.RTC_CODE.TOKEN_ERROR,msg:"reconnect failed"});+new Date<d.tokenExpired?(setTimeout((function(){d.autoReconnect({msg:t,code:n}),a.default.onConnectFail({code:2,msg:"auto connecting"})}),5e3),f("Watchdog, reconnect proxy failed, try again")):(d.tokenExpired=0,a.default.onDisconnect({code:2,msg:"reconnect failed"}),f("Watchdog, reconnect proxy failed, token was expired, give up"))}})),[2]}}))}))},e.prototype.setReconnectInfo=function(e){var t=e.serverIp,n=void 0===t?"":t,r=e.token,o=void 0===r?"":r;this.serverIp=n,this.token=o},e}();t.default=new h},3018:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n(9669)),c=a(n(7278)),u=n(7040),l=a(n(5098)),d=n(7889),p=a(n(8077)),f=a(n(1795)),h=a(n(8010)),m=p.default.log,v=new(function(){function e(){this.innerClientIp="",this.lastBytesRevc=0,this.minFps=0,this.lastTimeFreshMinFps=0,this.inputDelay=0,this.inputSeqMap={},this.rttSum=0,this.rttCount=0,this.rtt=0,this.fps=null,this.delay=null,this.cpu="0",this.bitrate=null,this.packetLost=null,this.nack=null,this.packetsReceived=null,this.framesDecoded=null,this.framesDropped=null,this.framesReceived=null,this.firCount=null,this.pliCount=null,this.decodems=null,this.interfameDelayMaxMs=null,this.jitterBuffer=0,this.lastFramesReceived=0,this.gpu="",this.audioPacketsLost=null,this.audioPacketsReceived=null,this.metricBulk=[],this.reportTimer=null,this.serverSessionCost=0,this.connectSuccessTimeCost=0,this.iceConnectedCost=0,setTimeout((function(){}),1e3)}return Object.defineProperty(e.prototype,"clientIp",{get:function(){return this.innerClientIp},set:function(e){this.innerClientIp=e},enumerable:!1,configurable:!0}),e.prototype.isShowing=function(){return!!u.getQcloudStatElement()&&"none"!==u.getQcloudStatElement().style.display},e.prototype.show=function(e){if(u.getQcloudStatElement()){var t=u.getQcloudStatElement();e?(t.style.display="flex",t.style.top=""):(t.style.display="none",t.style.top="-100000px")}},e.prototype.getStats=function(){var e=(l.default.getServerSideDescription()||u.empty).user_id;return{fps:this.fps,delay:this.delay,rtt:this.rtt,cpu:this.cpu,load_cost_time:this.connectSuccessTimeCost-this.serverSessionCost,bit_rate:this.bitrate,packet_lost:this.packetLost,nack:this.nack,packet_received:this.packetsReceived,gpu:this.gpu,input_delay:this.inputDelay,user_id:e,timestamp:+new Date}},e.prototype.setStat=function(e){var t,n,r,o,a=[],s=[];e.forEach((function(e){"video"===e.mediaType&&s.push(e),"audio"===e.mediaType&&a.push(e),"track"===e.type&&(e.frameHeight||e.frameWidth||"video"===e.kind)&&s.push(e),"track"!==e.type||e.frameHeight&&e.frameWidth||a.push(e)}));try{for(var c=i(s),l=c.next();!l.done;l=c.next()){var d=l.value,p=d.type,h=d.frameWidth,m=void 0===h?0:h,v=d.frameHeight,y=void 0===v?0:v,g=d.framesPerSecond,b=d.framerateMean,C=d.totalDecodeTime,S=void 0===C?0:C,w=d.framesDecoded,k=void 0===w?0:w,E=d.framesDropped,T=void 0===E?0:E,_=d.firCount,R=void 0===_?0:_,x=d.pliCount,D=void 0===x?0:x,P=d.jitterBufferDelay,M=void 0===P?0:P,O=d.jitterBufferEmittedCount,A=void 0===O?0:O,L=d.packetsLost,I=void 0===L?null:L,N=d.bytesReceived,j=void 0===N?0:N,F=d.nackCount,B=void 0===F?0:F,q=d.packetsReceived,G=void 0===q?0:q,U=d.framesReceived,H=void 0===U?0:U,K=d.jitter,W=d.totalInterFrameDelay,V=void 0===W?0:W;if("track"===p&&(this.selector(".qcloud-resolution .qcloud-stat-right").innerHTML=m+"x"+y,!f.default.name.toLowerCase().includes("safari")&&g||(this.fps=H-this.lastFramesReceived,this.selector(".qcloud-data-fps .qcloud-stat-right").innerHTML=""+this.fps,this.lastFramesReceived=H),this.jitterBuffer=u.getFixedDecimal(+M/A*1e3),this.selector(".qcloud-jitter-buffer .qcloud-stat-right").innerHTML=this.jitterBuffer+"ms"),"inbound-rtp"===p){g&&(this.fps=g,this.selector(".qcloud-data-fps .qcloud-stat-right").innerHTML=""+this.fps),b&&(this.fps=Math.floor(b),this.selector(".qcloud-data-fps .qcloud-stat-right").innerHTML=""+this.fps,this.jitterBuffer=Math.floor(1e3*K),this.selector(".qcloud-jitter-buffer .qcloud-stat-right").innerHTML=this.jitterBuffer+"ms");var z=+new Date;z-this.lastTimeFreshMinFps>6e4&&(this.lastTimeFreshMinFps=z,this.selector(".qcloud-min-fps .qcloud-stat-right").innerHTML=""+this.minFps),this.bitrate=j-this.lastBytesRevc;var Y=u.getFixedDecimal(+this.bitrate/1024/1024*8);this.selector(".qcloud-video-bitrates .qcloud-stat-right").innerHTML=Y+"Mbit/s",this.lastBytesRevc=j,this.packetLost=I,this.selector(".qcloud-packet-lost .qcloud-stat-right").innerHTML=""+this.packetLost,this.nack=B,this.selector(".qcloud-nack .qcloud-stat-right").innerHTML=""+this.nack,this.delay=u.getFixedDecimal(+(S/k*1e3+this.jitterBuffer)),this.selector(".qcloud-target-delay .qcloud-stat-right").innerHTML=this.delay+"ms",this.packetsReceived=G,this.framesDecoded=k,this.framesDropped=T,this.framesReceived=H,this.decodems=Math.floor(S/k*1e3),this.interfameDelayMaxMs=Math.floor(V/k*1e3),this.firCount=R,this.pliCount=D}var X=+this.fps;(0===this.minFps||this.minFps>X)&&(this.minFps=X)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}try{for(var J=i(a),$=J.next();!$.done;$=J.next()){var Z=$.value,Q=(p=Z.type,Z.packetsLost),ee=(I=void 0===Q?0:Q,Z.packetsReceived);G=void 0===ee?0:ee,"inbound-rtp"===p&&(this.audioPacketsLost=I,this.audioPacketsReceived=G)}}catch(e){r={error:e}}finally{try{$&&!$.done&&(o=J.return)&&o.call(J)}finally{if(r)throw r.error}}},e.prototype.setInputStart=function(e){this.inputSeqMap[e]=(new Date).getTime()},e.prototype.setInputEnd=function(e){void 0===e&&(e=0),this.inputSeqMap[e]&&(this.inputDelay=Math.round((+new Date-this.inputSeqMap[e])/2),delete this.inputSeqMap[e])},e.prototype.setRTT=function(e){this.rtt=e,this.selector(".qcloud-rtt .qcloud-stat-right").innerHTML=e.toString()+"ms",this.rttSum+=e,this.rttCount+=1;var t=e/(this.rttSum/this.rttCount)>2;return this.rttCount>60&&(this.rttSum=0,this.rttCount=0),t},e.prototype.setCpuAndGpuUsage=function(e){var t=e.cpu,n=void 0===t?"0":t,r=e.gpu,o=void 0===r?"":r;this.cpu=n,this.selector(".qcloud-cpu-usage .qcloud-stat-right").innerHTML=n+"%",this.gpu=o,this.selector(".qcloud-gpu-usage .qcloud-stat-right").innerHTML=o},e.prototype.setStaticStat=function(){var e=l.default.getServerSideDescription(),t=e.server_ip,n=e.region,r=e.instance_type;this.selector(".qcloud-server-ip .qcloud-stat-right").innerHTML=t,this.selector(".qcloud-region .qcloud-stat-right").innerHTML=n,this.selector(".qcloud-instance-type .qcloud-stat-right").innerHTML=r},e.prototype.setServerSessionTime=function(e){this.serverSessionCost=e,this.selector(".qcloud-server-session .qcloud-stat-right").innerHTML=u.getFixedDecimal((e-c.default.initStartTime)/1e3)+"s"},e.prototype.setIceConnectedTime=function(e){this.iceConnectedCost=e},e.prototype.setConnectSuccessTime=function(e){this.connectSuccessTimeCost=e,this.selector(".qcloud-connect-success .qcloud-stat-right").innerHTML=u.getFixedDecimal((e-c.default.initStartTime)/1e3)+"s"},e.prototype.getClientIp=function(){var e=this,t="https://"+d.config.reportHost+"/cloudapi/get_wan_ip";u.loadjs(t,(function(){var t=(window.returnCitySN||u.empty).cip,n=void 0===t?"":t;e.clientIp=n}))},e.prototype.addReportStat=function(){var e,t,n=l.default.getServerSideDescription(),r=n.server_ip,o=n.request_id,i=n.server_version,a=n.user_id;this.metricBulk.push({user_id:a,request_id:o,server_ip:r,server_version:i,timestamp:+new Date,bit_rate:this.bitrate,packet_lost:this.packetLost,packet_received:this.packetsReceived,bytes_received:this.lastBytesRevc,audio_packet_lost:this.audioPacketsLost,audio_packet_received:this.audioPacketsReceived,fps:this.fps,delay:this.delay,nack:this.nack,cpu:+this.cpu,gpu:this.gpu,load_cost_time:this.iceConnectedCost-this.serverSessionCost,first_frame:this.connectSuccessTimeCost-this.serverSessionCost,jitter_buffer:this.jitterBuffer,input_delay:this.inputDelay,rtt:this.rtt,frame_decoded:this.framesDecoded,frame_dropped:this.framesDropped,frame_received:this.framesReceived,render_frame_rate:this.framesDecoded,receive_frame_rate:this.framesReceived,decoded_frame_rate:this.framesDecoded,decode_ms:this.decodems,version:""+d.config.version,platform:"0",pli_count:this.pliCount,fir_count:this.firCount,browser:f.default.os.family+"/"+f.default.os.version+"/"+f.default.name,app_id:""+(null!==(t=null===(e=l.default.getServerSideDescription())||void 0===e?void 0:e.app_id)&&void 0!==t?t:0)})},e.prototype.toggleMetricReportBulk=function(e){var t=this;e?this.reportTimer=setInterval((function(){t.metricReportBulk()}),1e4):clearInterval(this.reportTimer)},e.prototype.metricReportBulk=function(){return r(this,void 0,void 0,(function(){var e,t,n,r,i,a,c,u;return o(this,(function(o){switch(o.label){case 0:e=JSON.stringify({metric:"cg_client_stat",bulk:this.metricBulk}),t=l.default.getServerSideDescription().sig_key,n=null;try{n=t&&h.default(e.slice(0,128),t).toString()}catch(e){m("encode sig_key error",e)}r=n?" https://metrics.cloud-gaming.myqcloud.com/report_metric_bulk?sig="+n:" https://metrics.cloud-gaming.myqcloud.com/report_metric_bulk",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,s.default.post(r,e)];case 2:return i=o.sent(),a=i.status,c=i.data,200===a||m("metricReport failed",c),this.metricBulk=[],[3,4];case 3:return u=o.sent(),m("metricReportBulk failed",u),[3,4];case 4:return[2]}}))}))},e.prototype.selector=function(e){var t=u.getQcloudStatElement();return t?t.querySelector(e):document.createElement("div")},e}());t.default=v},4535:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mountPointCss=t.htmlString=t.htmlStats=void 0;var r=n(7889);t.htmlStats='\n<div class="qcloud-stat">\n  <div class="qcloud-stat-row qcloud-sdk-version">\n    <div class="qcloud-stat-left">Version</div>\n    <div class="qcloud-stat-right">'+r.config.version+'</div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-resolution">\n    <div class="qcloud-stat-left">Resolution</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-data-fps">\n    <div class="qcloud-stat-left">FPS</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-min-fps">\n    <div class="qcloud-stat-left">MinFPSPerMin</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-target-delay">\n    <div class="qcloud-stat-left">Delay</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-jitter-buffer">\n    <div class="qcloud-stat-left">JitterBuffer</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-rtt">\n    <div class="qcloud-stat-left">RTT</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-packet-lost">\n    <div class="qcloud-stat-left">PacketLost</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-nack">\n    <div class="qcloud-stat-left">NACK</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-video-bitrates">\n    <div class="qcloud-stat-left">VideoBitrate</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-server-session">\n    <div class="qcloud-stat-left">ServerSessionTime</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-connect-success">\n    <div class="qcloud-stat-left">ConnectSuccessTime</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-cpu-usage">\n    <div class="qcloud-stat-left">CpuUsage</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-gpu-usage">\n    <div class="qcloud-stat-left">GpuUsage</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-server-ip">\n    <div class="qcloud-stat-left">ServerIp</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-region">\n    <div class="qcloud-stat-left">Region</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n  <div class="qcloud-stat-row qcloud-instance-type">\n    <div class="qcloud-stat-left">InstanceType</div>\n    <div class="qcloud-stat-right"></div>\n  </div>\n\n</div>',t.htmlString='\n<div id="cloud-gaming-container" tabindex="-1">\n  <div id="cursor-wrap">\n    <div class="cursor" id="cursor"></div>\n  </div>\n  <audio id="audio-stream" tabindex="-1" playsinline webkit-playsinline x5-playsinline autoplay></audio>\n  <video id="video-stream" tabindex="-1" playsinline webkit-playsinline x5-playsinline autoplay muted preload="auto"></video>\n  <div class="logo" id="cloud-logo">\n    <img src="https://ex.cloud-gaming.myqcloud.com/assets/images/logo.png" alt=""/>\n  </div>\n</div>\n\n'+t.htmlStats+'\n\n<div class="progress-bar-container">\n  <div class="spinner"> </div>\n  <p class="starting">正在启动云游戏</p>\n  <p id="speed" class="starting"></p>\n</div>\n\n<div class="restart" id="id-restart">\n  <a id="id-restart-a" href="javascript:window.location.reload();">重新连接</a>\n</div>\n\n<input type="text" id="fake-input"/>',t.mountPointCss="\n#cloud-gaming-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  display: none;\n  background-size: cover !important; /* stylelint-disable-line */\n}\n.qcloud-stat {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  line-height: 18px;\n  padding: 5px 10px;\n  transform: translateZ(0);\n  z-index: 5;\n  color: #eee;\n  background: rgba(0, 0, 0, .5);\n  border-radius: 5px;\n  text-align: left;\n  font-size: 12px;\n  pointer-events: none;\n  display: none;\n  flex-direction: column;\n  width: 220px;\n}\n.qcloud-stat-left {\n  width: 120px;\n}\n.qcloud-stat-right {\n  flex: 1;\n}\n.qcloud-stat-row {\n  text-align: left;\n  display: flex;\n}\n.logo {\n  position: absolute;\n  width: 200px;\n  right: 35px;\n  bottom: 0px;\n  user-select: none;\n}\n.logo img{\n  width: 100%;\n  user-select: none;\n}\n\n@keyframes spinner {\n  to {transform: rotate(360deg);}\n}\n.progress-bar-container {\n  text-align: center;\n  position: absolute;\n  width: 40%;\n  height: 15%;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.starting {\n  color:white;\n  font-weight:bold;\n  margin-top:30px;\n}\n.spinner:before {\n  content: '';\n  box-sizing: border-box;\n  position: absolute;\n  top: 60px;\n  width: 20px;\n  height: 20px;\n  margin-top: -5px;\n  margin-left: -10px;\n  border-radius: 50%;\n  border: 4px solid #ccc;\n  border-top-color: #000;\n  animation: spinner .6s linear infinite;\n}\n.restart {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  display: none;\n  align-items: center;\n  justify-content: center;\n  background: url(\"https://ex.cloud-gaming.myqcloud.com/assets/images/loading.jpg\");\n  background-position: center;\n  background-size: cover;  \n  font-size: 24px;\n}\n.cursor {\n  position: absolute;\n  width: 26px;\n  height: 26px;\n  background: url('https://ex.cloud-gaming.myqcloud.com/assets/images/cursor-default.png');\n  top: 0px;\n  left: 0px;\n  z-index: 1;\n  background-size: cover;\n  display: none;\n}\n.queue-wrapper {\n  width: 200px;\n  height: 120px;\n  background-color: rgba(0,0,0,.3);\n  border-radius: 8px;\n  color: #fff;\n  font: caption;\n}\n#audio-stream {\n  width: 0px;\n}\n#video-stream {\n  max-width: 100%;\n  max-height: 100%;\n}\n#cursor-wrap {\n  position: absolute;\n}\n#cursor {\n  position: absolute;\n}\n#fake-input {\n  background-color:rgba(0, 0, 0, 0);\n  position: absolute;\n  top:0;\n  left:0;\n  bottom:0;\n  width: 0px;\n  color:white;\n  border: none;\n  outline:none;\n  height:0px;\n}\n#fake-input:focus {\n  height:0px;\n}\n.rotate-html-90 {\n  transform: rotate(90deg);\n  transform-origin: left top;\n  width: 100vh;\n  height: 100vw;\n  overflow-x: hidden;\n  position: absolute;\n  top: 0;\n  left: 100%;\n}\n.rotate-html-270 {\n  transform: rotate(270deg);\n  transform-origin: left top;\n  width: 100vh;\n  height: 100vw;\n  overflow-x: hidden;\n  position: absolute;\n  top: 100%;\n  left: 0;\n}"},8077:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=c(n(9669)),l=c(n(5098)),d=n(7040),p=c(n(7278)),f=c(n(8010)),h=new(function(){function e(){this.logStr=[],this.externalLogHandler=d.noop}return e.prototype.log=function(){for(var e,t,n,r,o,c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];(null===(n=p.default.getInitOptions().debugSetting)||void 0===n?void 0:n.showLog)&&console.log.apply(console,a([],i(c)));var f="";try{for(var m=s(c),v=m.next();!v.done;v=m.next()){var y=v.value;f+=("object"==typeof y?JSON.stringify(y):y)+" "}}catch(t){e={error:t}}finally{try{v&&!v.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}var g=l.default.getServerSideDescription(),b=g.request_id,C=void 0===b?"":b,S=g.server_ip,w=void 0===S?"":S,k=g.user_id,E=void 0===k?"":k,T=null!==(r=w||C)&&void 0!==r?r:"";f="[TCG/"+T+"]["+E+"]:"+f,null===(o=h.externalLogHandler)||void 0===o||o.call(h,f),h.logStr.push({timestamp:+new Date,server_ip:w,request_id:C,content:d.formatTime(new Date,"yyyy-mm-dd hh:ii:ss")+" "+f+"\n",report_ip:""})},e.prototype.getLog=function(){var e=l.default.getServerSideDescription(),t=e.request_id,n=void 0===t?"":t,r=e.server_ip,o=void 0===r?"":r;return this.logStr.forEach((function(e){e.server_ip||(e.server_ip=o),e.request_id||(e.request_id=n)})),this.logStr},e.prototype.reportLog=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return this.metricLogReport(this.getLog()),[2]}))}))},e.prototype.setExternalLog=function(e){void 0===e&&(e=d.noop),this.externalLogHandler=e},e.prototype.metricLogReport=function(e){return r(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,d;return o(this,(function(o){switch(o.label){case 0:t=JSON.stringify({metric:"cg_client_log",bulk:e}),n=l.default.getServerSideDescription().sig_key,r=null;try{r=n&&f.default(t.slice(0,128),n).toString()}catch(e){this.log("encode sig_key error",e)}i=r?"https://metrics.cloud-gaming.myqcloud.com/report_log_bulk?sig="+r:"https://metrics.cloud-gaming.myqcloud.com/report_log_bulk",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,u.default.post(i,t)];case 2:return a=o.sent(),s=a.status,c=a.data,200===s?this.log("metricReport",c):this.log("metricReport failed",c),[3,4];case 3:return d=o.sent(),this.log("metricReport failed",d),[3,4];case 4:return[2]}}))}))},e}());window.TCGLogger=h,t.default=h},2561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.interceptUserEvent=void 0,t.interceptUserEvent=function(e){return function(t,n,r){void 0===t&&(t=null);var o=r.value;return r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=["video-stream","cursor-wrap","fake-input"],i=t[0].target.id;e&&!r.includes(i)||o.apply(this,t)},r}}},5315:function(e,t){"use strict";var n,r,o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.supportFullScreen=void 0;var a,s={},c=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=o(c,1)[0];try{for(var l=i(c),d=l.next();!d.done;d=l.next()){var p=d.value;if(p[1]in document){a=p;break}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}if(a)for(var f=0;f<a.length;f++)s[u[f]]=a[f];t.default=s,t.supportFullScreen=function(e){if("function"==typeof e.webkitEnterFullScreen){var t=navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1}},7040:function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getFakeInput=t.getRestartElement=t.getQcloudSpeedElement=t.getQcloudStatElement=t.getGameMountPointElement=t.getCloudGamingContainerElement=t.getCursorElement=t.getCursorWrapElement=t.getProgressBarElement=t.getAudioElement=t.getVideoElement=t.empty=t.getSequence=t.getFixedDecimal=t.checkProfileLevelId=t.getH264Info=t.isPlanB=t.getSearch=t.noop=t.loadjs=t.formatTime=t.addZero=t.sleep=t.checkBrowser=t.isMobile=t.isFullScreen=t.isWegameChrome=t.codeMap=void 0;var i=o(n(8077)).default.log;t.codeMap={0:{key:48,shift:!1},")":{key:48,shift:!0},1:{key:49,shift:!1},"!":{key:49,shift:!0},2:{key:50,shift:!1},"@":{key:50,shift:!0},3:{key:51,shift:!1},"#":{key:51,shift:!0},4:{key:52,shift:!1},$:{key:52,shift:!0},5:{key:53,shift:!1},"%":{key:53,shift:!0},6:{key:54,shift:!1},"^":{key:54,shift:!0},7:{key:55,shift:!1},"&":{key:55,shift:!0},8:{key:56,shift:!1},"*":{key:56,shift:!0},9:{key:57,shift:!1},"(":{key:57,shift:!0},a:{key:65,shift:!1},A:{key:65,shift:!0},b:{key:66,shift:!1},B:{key:66,shift:!0},c:{key:67,shift:!1},C:{key:67,shift:!0},d:{key:68,shift:!1},D:{key:68,shift:!0},e:{key:69,shift:!1},E:{key:69,shift:!0},f:{key:70,shift:!1},F:{key:70,shift:!0},g:{key:71,shift:!1},G:{key:71,shift:!0},h:{key:72,shift:!1},H:{key:72,shift:!0},i:{key:73,shift:!1},I:{key:73,shift:!0},j:{key:74,shift:!1},J:{key:74,shift:!0},k:{key:75,shift:!1},K:{key:75,shift:!0},l:{key:76,shift:!1},L:{key:76,shift:!0},m:{key:77,shift:!1},M:{key:77,shift:!0},n:{key:78,shift:!1},N:{key:78,shift:!0},o:{key:79,shift:!1},O:{key:79,shift:!0},p:{key:80,shift:!1},P:{key:80,shift:!0},q:{key:81,shift:!1},Q:{key:81,shift:!0},r:{key:82,shift:!1},R:{key:82,shift:!0},s:{key:83,shift:!1},S:{key:83,shift:!0},t:{key:84,shift:!1},T:{key:84,shift:!0},u:{key:85,shift:!1},U:{key:85,shift:!0},v:{key:86,shift:!1},V:{key:86,shift:!0},w:{key:87,shift:!1},W:{key:87,shift:!0},x:{key:88,shift:!1},X:{key:88,shift:!0},y:{key:89,shift:!1},Y:{key:89,shift:!0},z:{key:90,shift:!1},Z:{key:90,shift:!0},"=":{key:187,shift:!1},"+":{key:187,shift:!0},",":{key:188,shift:!1},"<":{key:188,shift:!0},"-":{key:189,shift:!1},_:{key:189,shift:!0},".":{key:190,shift:!1},">":{key:190,shift:!0},"/":{key:191,shift:!1},"?":{key:191,shift:!0},"`":{key:192,shift:!1},"~":{key:192,shift:!0},"[":{key:219,shift:!1},"{":{key:219,shift:!0},"\\":{key:220,shift:!1},"|":{key:220,shift:!0},"]":{key:221,shift:!1},"}":{key:221,shift:!0},"'":{key:222,shift:!1},'"':{key:222,shift:!0},"↑":{key:38,shift:!1},"↓":{key:40,shift:!1},"←":{key:37,shift:!1},"→":{key:39,shift:!1},Home:{key:36,shift:!1},Ctrl:{key:17,shift:!1},Alt:{key:18,shift:!1},Win:{key:91,shift:!1},NumLock:{key:144,shift:!1},Tab:{key:9,shift:!1},CapsLock:{key:20,shift:!1},Shift:{key:16,shift:!1},Enter:{key:13,shift:!1},BackSpace:{key:8,shift:!1},Insert:{key:45,shift:!1},Delete:{key:46,shift:!1},PageUp:{key:33,shift:!1},PageDown:{key:34,shift:!1},End:{key:35,shift:!1},PrintScreen:{key:42,shift:!1},ScrollLock:{key:145,shift:!1},PauseBreak:{key:19,shift:!1},Space:{key:32,shift:!1},Esc:{key:27,shift:!1},F1:{key:112,shift:!1},F2:{key:113,shift:!1},F3:{key:114,shift:!1},F4:{key:115,shift:!1},F5:{key:116,shift:!1},F6:{key:117,shift:!1},F7:{key:118,shift:!1},F8:{key:119,shift:!1},F9:{key:120,shift:!1},F10:{key:121,shift:!1},F11:{key:122,shift:!1},F12:{key:123,shift:!1},"^0":{key:96,shift:!1},"^1":{key:97,shift:!1},"^2":{key:98,shift:!1},"^3":{key:99,shift:!1},"^4":{key:100,shift:!1},"^5":{key:101,shift:!1},"^6":{key:102,shift:!1},"^7":{key:103,shift:!1},"^8":{key:104,shift:!1},"^9":{key:105,shift:!1},"^.":{key:110,shift:!1},"^+":{key:107,shift:!1},"^/":{key:111,shift:!1},"^*":{key:106,shift:!1},"^-":{key:109,shift:!1},"^Enter":{key:108,shift:!1},"^,":{key:188,shift:!1}},t.isWegameChrome=function(){return!(!window.external||!window.external.callcpp)},t.isFullScreen=function(){return!(!document.fullscreenElement&&!document.webkitIsFullScreen)},t.isMobile=function(){return!!(/Android|iPhone|iPad|iOS/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>0)},t.checkBrowser=function(){var e=navigator.userAgent.toLowerCase();return/micromessenger/gi.test(e)?"wx":/qq/gi.test(e)?"qq":"system"},t.sleep=function(e){return new Promise((function(t){setTimeout(t,e)}))},t.addZero=function(e,t){for(var n=0,r=t-(""+e).length;n<r;n++)e="0"+e;return""+e},t.formatTime=function(e,n){return n.replace(/yyyy|YYYY/,e.getFullYear()).replace(/yy|YY/,t.addZero(e.getFullYear()%100,2)).replace(/mm|MM/,t.addZero(e.getMonth()+1,2)).replace(/m|M/g,e.getMonth()+1).replace(/dd|DD/,t.addZero(e.getDate(),2)).replace(/d|D/g,e.getDate()).replace(/hh|HH/,t.addZero(e.getHours(),2)).replace(/h|H/g,e.getHours()).replace(/ii|II/,t.addZero(e.getMinutes(),2)).replace(/i|I/g,e.getMinutes()).replace(/ss|SS/,t.addZero(e.getSeconds(),2)).replace(/s|S/g,e.getSeconds()).replace(/w/g,e.getDay()).replace(/W/g,["日","一","二","三","四","五","六"][e.getDay()])},t.loadjs=function(e,n){void 0===n&&(n=t.noop);var r=document.createElement("script");r.type="text/javascript",r.id=(Date.now()+Math.round(1e4*Math.random())).toString();var o=function(){n(),setTimeout((function(){var e=document.getElementById(r.id);null==e||e.parentNode.removeChild(e)}),500)};r.onload=o,r.onerror=o,r.onabort=o,r.src=e,document.body.insertBefore(r,document.body.firstChild)},t.noop=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.getSearch=function(){var e={};return window.location.search.replace("?","").split("&").forEach((function(t){var n=r(t.split("="),2),o=n[0],i=n[1];e[o]=i})),e},t.isPlanB=function(e){return e.sdp.includes("mid:video")||e.sdp.includes("mid:audio")||e.sdp.includes("mid:data")},t.getH264Info=function(e){void 0===e&&(e="");var t={profile:"notset",payloadType:0};if(!e)return i("sdp is null"),t;var n=e.split("\r\n").find((function(e){return e.includes("42e01f")}));if(!n)return i("Your client do not support webrtc with H264, but continue try to load"),t;var o=r(n.split(" "),2),a=o[0],s=o[1];return t.payloadType=+a.split(":")[1],t.profile=s?s.trim():"notset",t.payloadType?"notset"===t.profile?(i("get profile failed, but continue try to load"),t):(i("payloadType->"+t.payloadType+",profile->"+t.profile),t):(i("get payloadType failed, but continue try to load"),t)},t.checkProfileLevelId=function(e){void 0===e&&(e="");var t=[];return e.split("\r\n").forEach((function(e){e.includes("profile-level-id")&&(e=e.split("profile-level-id").pop().slice(1),t.push(e))})),i("available profile-level-ids: ",t.join(",")),t},t.getFixedDecimal=function(e,t){return void 0===t&&(t=2),Math.floor(10*e*t)/(10*t)},t.getSequence=function(){return+(+new Date+Math.round(1e4*Math.random()))},t.empty={},t.getVideoElement=function(){return document.getElementById("video-stream")},t.getAudioElement=function(){return document.getElementById("audio-stream")},t.getProgressBarElement=function(){return document.querySelector(".progress-bar-container")},t.getCursorWrapElement=function(){return document.getElementById("cursor-wrap")},t.getCursorElement=function(){return document.getElementById("cursor")},t.getCloudGamingContainerElement=function(){return document.getElementById("cloud-gaming-container")},t.getGameMountPointElement=function(){return document.getElementById("game-mount-point")},t.getQcloudStatElement=function(){return document.querySelector(".qcloud-stat")},t.getQcloudSpeedElement=function(){return document.querySelector(".qcloud-speed")},t.getRestartElement=function(){return document.getElementById("id-restart")},t.getFakeInput=function(){return document.getElementById("fake-input")}},487:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},1012:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?n.push(t.charAt(o>>>6*(3-i)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return n}},e.exports=n},8249:function(e,t,n){var r;e.exports=r=r||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&void 0!==n.g&&n.g.crypto&&(r=n.g.crypto),!r)try{r=n(2480)}catch(e){}var o=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},i=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},c=s.Base={extend:function(e){var t=i(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=s.WordArray=c.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new u.init(t,e)}}),l=a.enc={},d=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new u.init(n,t/2)}},p=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new u.init(n,t)}},f=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},h=s.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,l=e.min(4*c,i);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(o,d);n=o.splice(0,c),r.sigBytes-=l}return new u.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(s.Hasher=h.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math)},8010:function(e,t,n){var r;e.exports=(r=n(8249),n(2153),n(9824),r.HmacSHA256)},9824:function(e,t,n){var r,o,i;e.exports=(o=(r=n(8249)).lib.Base,i=r.enc.Utf8,void(r.algo.HMAC=o.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;o.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},2153:function(e,t,n){var r;e.exports=(r=n(8249),function(e){var t=r,n=t.lib,o=n.WordArray,i=n.Hasher,a=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(s[o]=n(e.pow(r,.5))),c[o]=n(e.pow(r,1/3)),o++),r++}();var u=[],l=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],l=n[5],d=n[6],p=n[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var h=u[f-15],m=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,v=u[f-2],y=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;u[f]=m+u[f-7]+y+u[f-16]}var g=r&o^r&i^o&i,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),C=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&d)+c[f]+u[f];p=d,d=l,l=s,s=a+C|0,a=i,i=o,o=r,r=C+(b+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(l),t.HmacSHA256=i._createHmacHelper(l)}(Math),r.SHA256)},7042:function(e){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._events={},this.on=this.addEventListener,this.off=this.removeEventListener}var t;return(t=[{key:"emit",value:function(e,t){if(this._events.hasOwnProperty(e))for(var n=this._events[e],r={type:e,detail:t},o=n.length,i=0;i<o;i++)this.handle(n[i],r)}},{key:"handle",value:function(e,t){e(t)}},{key:"addEventListener",value:function(e,t){this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].indexOf(t)<0&&this._events[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(this._events.hasOwnProperty(e)){var n=this._events[e],r=n.indexOf(t);r>=0&&n.splice(r,1),0===n.length&&delete this._events[e]}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}()}]).default},function(e,t,n){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return u}));var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(this,e),this.allowExtra=t,this.defaults=new Map,this.types=new Map,this.optional=new Set,this.required=new Set}var t;return(t=[{key:"setDefaults",value:function(e){var t=this;return Object.entries(e).forEach((function(e){var n=i(e,2),r=n[0],o=n[1];return t.defaults.set(r,o)})),this}},{key:"setTypes",value:function(e){var t=this;return Object.entries(e).forEach((function(e){var n=i(e,2),r=n[0],o=n[1];return t.types.set(r,o)})),this}},{key:"setOptional",value:function(e){var t=this;return e.forEach((function(e){return t.optional.add(e)})),this}},{key:"setRequired",value:function(e){var t=this;return e.forEach((function(e){return t.required.add(e)})),this}},{key:"resolve",value:function(e){var t=Object.assign(this.getDefaults(),e);return this.validate(t),t}},{key:"getDefaults",value:function(){var e,t={},n=o(this.defaults);try{for(n.s();!(e=n.n()).done;){var r=i(e.value,2),a=r[0],s=r[1];t[a]=s}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"validate",value:function(e){for(var t in e){if(!this.optionExists(t))throw new Error('Unkown option "'.concat(t,'".'));this.checkType(t,e[t])}var n,r=o(this.required.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;if(void 0===e[i])throw new Error('Option "'.concat(i,'" is required.'))}}catch(e){r.e(e)}finally{r.f()}}},{key:"checkType",value:function(e,t){if(this.types.has(e)){var n=this.types.get(e),o=r(t);if(o!==n)throw new Error('Wrong value for option "'.concat(e,'". Expected type "').concat(n,'" but got "').concat(o,'".'))}}},{key:"optionExists",value:function(e){return!!this.allowExtra||this.defaults.has(e)||this.optional.has(e)||this.required.has(e)||this.types.has(e)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}()}]).default},function(e,t,n){"use strict";n.r(t),n.d(t,"GamepadHandler",(function(){return h})),n.d(t,"GamepadListener",(function(){return E}));var r=n(0),o=n.n(r),i=n(1),a=n.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,r,o=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}(i);function i(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return c(this,i),(n=o.call(this)).index=e,n.options=n.constructor.resolveOptions(r),n.sticks=new Array(t.axes.length/2).fill(null).map((function(){return[null,null]})),n.buttons=new Array(t.buttons.length).fill(null),n.updateStick=n.updateStick.bind(p(n)),n.updateButton=n.updateButton.bind(p(n)),n}return t=i,r=[{key:"resolveOptions",value:function(e){var t=void 0!==e.stick,n=void 0!==e.button,r={stick:this.optionResolver.resolve(t?e.stick:n?{}:e),button:this.optionResolver.resolve(n?e.button:t?{}:e)};return r.stick.deadZone=Math.max(Math.min(r.stick.deadZone,1),0),r.button.deadZone=Math.max(Math.min(r.button.deadZone,1),0),r.stick.precision=r.stick.precision?Math.pow(10,r.stick.precision):0,r.button.precision=r.button.precision?Math.pow(10,r.button.precision):0,r}}],(n=[{key:"update",value:function(e){for(var t=0,n=this.sticks.length,r=0;r<n;r++)for(var o=0;o<2;o++)this.updateStick(e,r,o,e.axes[t++]);var i=this.buttons.length;for(t=0;t<i;t++)this.updateButton(e,e.buttons[t],t)}},{key:"updateStick",value:function(e,t,n,r){var o=this.options.stick,i=o.deadZone,a=o.analog,s=o.precision;i&&r<i&&r>-i&&(r=0),a?s&&(r=Math.round(r*s)/s):r=r>0?1:r<0?-1:0,this.sticks[t][n]!==r&&(this.sticks[t][n]=r,this.emit("axis",{gamepad:e,stick:t,axis:n,value:r,index:this.index}))}},{key:"updateButton",value:function(e,t,n){var r=this.options.button,o=r.deadZone,i=r.analog,a=r.precision,s=t.value,c=t.pressed,u=s;o&&t.value<o&&t.value>-o&&(u=0),i?a&&(u=Math.round(u*a)/a):u=c?1:0,this.buttons[n]!==u&&(this.buttons[n]=u,this.emit("button",{gamepad:e,button:n,pressed:c,value:u,index:this.index}))}}])&&u(t.prototype,n),r&&u(t,r),i}(o.a);function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}h.optionResolver=(new a.a).setDefaults({analog:!0,deadZone:0,precision:0}).setTypes({analog:"boolean",deadZone:"number",precision:"number"});var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t,this.frame=null,this.update=this.update.bind(this)}var t,n;return t=e,(n=[{key:"setCallback",value:function(e){this.callback=e}},{key:"start",value:function(){this.frame||(this.frame=window.requestAnimationFrame(this.update))}},{key:"stop",value:function(){this.frame&&(window.cancelAnimationFrame(this.frame),this.frame=null)}},{key:"update",value:function(){this.frame=window.requestAnimationFrame(this.update),this.callback()}}])&&m(t.prototype,n),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}(o);function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g(this,o),e=r.call(this),"function"!=typeof navigator.getGamepads)throw new Error("This browser does not support gamepad API.");return e.options=t,e.onAxis=e.onAxis.bind(w(e)),e.update=e.update.bind(w(e)),e.start=e.start.bind(w(e)),e.stop=e.stop.bind(w(e)),e.discover=e.discover.bind(w(e)),e.onButton=e.onButton.bind(w(e)),e.handlers=new Array(4).fill(null),e.loop=new v(e.update),window.addEventListener("error",e.stop),e}return t=o,(n=[{key:"start",value:function(){this.loop.start()}},{key:"stop",value:function(){this.loop.stop()}},{key:"update",value:function(){var e=navigator.getGamepads();this.discover(e[0],0),this.discover(e[1],1),this.discover(e[2],2),this.discover(e[3],3)}},{key:"discover",value:function(e,t){e?(this.handlers[t]||this.registerHandler(t,e),this.handlers[t].update(e)):this.handlers[t]&&this.removeGamepad(t)}},{key:"registerHandler",value:function(e,t){if(this.handlers[e])throw new Error("Gamepad #".concat(e," is already registered."));var n=new h(e,t,this.options);this.handlers[e]=n,n.addEventListener("axis",this.onAxis),n.addEventListener("button",this.onButton),this.emit("gamepad:connected",{index:e,gamepad:t}),this.emit("gamepad:".concat(e,":connected"),{index:e,gamepad:t})}},{key:"removeGamepad",value:function(e){if(!this.handlers[e])throw new Error("Gamepad #".concat(e," is not registered."));this.handlers[e].removeEventListener("axis",this.onAxis),this.handlers[e].removeEventListener("button",this.onButton),this.handlers[e]=null,this.emit("gamepad:disconnected",{index:e}),this.emit("gamepad:".concat(e,":disconnected"),{index:e})}},{key:"onAxis",value:function(e){var t=e.detail.index;this.emit("gamepad:axis",e.detail),this.emit("gamepad:".concat(t,":axis"),e.detail),this.emit("gamepad:".concat(t,":axis:").concat(e.detail.axis),e.detail)}},{key:"onButton",value:function(e){var t=e.detail.index;this.emit("gamepad:button",e.detail),this.emit("gamepad:".concat(t,":button"),e.detail),this.emit("gamepad:".concat(t,":button:").concat(e.detail.button),e.detail)}}])&&b(t.prototype,n),o}(o.a)}])},8738:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},4276:(e,t,n)=>{"use strict";n.r(t),n.d(t,{version:()=>r,VERSION:()=>o,atob:()=>M,atobPolyfill:()=>P,btoa:()=>g,btoaPolyfill:()=>y,fromBase64:()=>N,toBase64:()=>T,utob:()=>k,encode:()=>T,encodeURI:()=>_,encodeURL:()=>_,btou:()=>D,decode:()=>N,fromUint8Array:()=>C,toUint8Array:()=>A,extendString:()=>F,extendUint8Array:()=>B,extendBuiltins:()=>q,Base64:()=>G});const r="3.5.2",o=r,i="function"==typeof atob,a="function"==typeof btoa,s="function"==typeof Buffer,c="function"==typeof TextDecoder?new TextDecoder:void 0,u="function"==typeof TextEncoder?new TextEncoder:void 0,l=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],d=(e=>{let t={};return e.forEach(((e,n)=>t[e]=n)),t})(l),p=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),h="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),m=e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""),v=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),y=e=>{let t,n,r,o,i="";const a=e.length%3;for(let a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|o,i+=l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}return a?i.slice(0,a-3)+"===".substring(a):i},g=a?e=>btoa(e):s?e=>Buffer.from(e,"binary").toString("base64"):y,b=s?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let n=0,r=e.length;n<r;n+=4096)t.push(f.apply(null,e.subarray(n,n+4096)));return g(t.join(""))},C=(e,t=!1)=>t?m(b(e)):b(e),S=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?f(192|t>>>6)+f(128|63&t):f(224|t>>>12&15)+f(128|t>>>6&63)+f(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return f(240|t>>>18&7)+f(128|t>>>12&63)+f(128|t>>>6&63)+f(128|63&t)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,k=e=>e.replace(w,S),E=s?e=>Buffer.from(e,"utf8").toString("base64"):u?e=>b(u.encode(e)):e=>g(k(e)),T=(e,t=!1)=>t?m(E(e)):E(e),_=e=>T(e,!0),R=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,x=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return f(55296+(t>>>10))+f(56320+(1023&t));case 3:return f((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return f((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},D=e=>e.replace(R,x),P=e=>{if(e=e.replace(/\s+/g,""),!p.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,n,r,o="";for(let i=0;i<e.length;)t=d[e.charAt(i++)]<<18|d[e.charAt(i++)]<<12|(n=d[e.charAt(i++)])<<6|(r=d[e.charAt(i++)]),o+=64===n?f(t>>16&255):64===r?f(t>>16&255,t>>8&255):f(t>>16&255,t>>8&255,255&t);return o},M=i?e=>atob(v(e)):s?e=>Buffer.from(e,"base64").toString("binary"):P,O=s?e=>h(Buffer.from(e,"base64")):e=>h(M(e),(e=>e.charCodeAt(0))),A=e=>O(I(e)),L=s?e=>Buffer.from(e,"base64").toString("utf8"):c?e=>c.decode(O(e)):e=>D(M(e)),I=e=>v(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),N=e=>L(I(e)),j=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),F=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,j(t));e("fromBase64",(function(){return N(this)})),e("toBase64",(function(e){return T(this,e)})),e("toBase64URI",(function(){return T(this,!0)})),e("toBase64URL",(function(){return T(this,!0)})),e("toUint8Array",(function(){return A(this)}))},B=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,j(t));e("toBase64",(function(e){return C(this,e)})),e("toBase64URI",(function(){return C(this,!0)})),e("toBase64URL",(function(){return C(this,!0)}))},q=()=>{F(),B()},G={version:r,VERSION:o,atob:M,atobPolyfill:P,btoa:g,btoaPolyfill:y,fromBase64:N,toBase64:T,encode:T,encodeURI:_,encodeURL:_,utob:k,btou:D,decode:N,fromUint8Array:C,toUint8Array:A,extendString:F,extendUint8Array:B,extendBuiltins:q}},365:(e,t,n)=>{var r=n(1445)("jsonp");e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),t||(t={});var a,s,c=t.prefix||"__jp",u=t.name||c+o++,l=t.param||"callback",d=null!=t.timeout?t.timeout:6e4,p=encodeURIComponent,f=document.getElementsByTagName("script")[0]||document.head;function h(){a.parentNode&&a.parentNode.removeChild(a),window[u]=i,s&&clearTimeout(s)}return d&&(s=setTimeout((function(){h(),n&&n(new Error("Timeout"))}),d)),window[u]=function(e){r("jsonp got",e),h(),n&&n(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+l+"="+p(u)).replace("?&","?"),r('jsonp req "%s"',e),(a=document.createElement("script")).src=e,f.parentNode.insertBefore(a,f),function(){window[u]&&h()}};var o=0;function i(){}},1445:(e,t,n)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(4805)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),n){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},4805:(e,t,n)=>{var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var i=a[c];n=o.call(e,i),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7824),t.names=[],t.skips=[],t.formatters={}},2568:(e,t,n)=>{var r,o,i,a,s;r=n(1012),o=n(487).utf8,i=n(8738),a=n(487).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):o.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,f=0;f<n.length;f++)n[f]=16711935&(n[f]<<8|n[f]>>>24)|4278255360&(n[f]<<24|n[f]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var h=s._ff,m=s._gg,v=s._hh,y=s._ii;for(f=0;f<n.length;f+=16){var g=u,b=l,C=d,S=p;u=h(u,l,d,p,n[f+0],7,-680876936),p=h(p,u,l,d,n[f+1],12,-389564586),d=h(d,p,u,l,n[f+2],17,606105819),l=h(l,d,p,u,n[f+3],22,-1044525330),u=h(u,l,d,p,n[f+4],7,-176418897),p=h(p,u,l,d,n[f+5],12,1200080426),d=h(d,p,u,l,n[f+6],17,-1473231341),l=h(l,d,p,u,n[f+7],22,-45705983),u=h(u,l,d,p,n[f+8],7,1770035416),p=h(p,u,l,d,n[f+9],12,-1958414417),d=h(d,p,u,l,n[f+10],17,-42063),l=h(l,d,p,u,n[f+11],22,-1990404162),u=h(u,l,d,p,n[f+12],7,1804603682),p=h(p,u,l,d,n[f+13],12,-40341101),d=h(d,p,u,l,n[f+14],17,-1502002290),u=m(u,l=h(l,d,p,u,n[f+15],22,1236535329),d,p,n[f+1],5,-165796510),p=m(p,u,l,d,n[f+6],9,-1069501632),d=m(d,p,u,l,n[f+11],14,643717713),l=m(l,d,p,u,n[f+0],20,-373897302),u=m(u,l,d,p,n[f+5],5,-701558691),p=m(p,u,l,d,n[f+10],9,38016083),d=m(d,p,u,l,n[f+15],14,-660478335),l=m(l,d,p,u,n[f+4],20,-405537848),u=m(u,l,d,p,n[f+9],5,568446438),p=m(p,u,l,d,n[f+14],9,-1019803690),d=m(d,p,u,l,n[f+3],14,-187363961),l=m(l,d,p,u,n[f+8],20,1163531501),u=m(u,l,d,p,n[f+13],5,-1444681467),p=m(p,u,l,d,n[f+2],9,-51403784),d=m(d,p,u,l,n[f+7],14,1735328473),u=v(u,l=m(l,d,p,u,n[f+12],20,-1926607734),d,p,n[f+5],4,-378558),p=v(p,u,l,d,n[f+8],11,-2022574463),d=v(d,p,u,l,n[f+11],16,1839030562),l=v(l,d,p,u,n[f+14],23,-35309556),u=v(u,l,d,p,n[f+1],4,-1530992060),p=v(p,u,l,d,n[f+4],11,1272893353),d=v(d,p,u,l,n[f+7],16,-155497632),l=v(l,d,p,u,n[f+10],23,-1094730640),u=v(u,l,d,p,n[f+13],4,681279174),p=v(p,u,l,d,n[f+0],11,-358537222),d=v(d,p,u,l,n[f+3],16,-722521979),l=v(l,d,p,u,n[f+6],23,76029189),u=v(u,l,d,p,n[f+9],4,-640364487),p=v(p,u,l,d,n[f+12],11,-421815835),d=v(d,p,u,l,n[f+15],16,530742520),u=y(u,l=v(l,d,p,u,n[f+2],23,-995338651),d,p,n[f+0],6,-198630844),p=y(p,u,l,d,n[f+7],10,1126891415),d=y(d,p,u,l,n[f+14],15,-1416354905),l=y(l,d,p,u,n[f+5],21,-57434055),u=y(u,l,d,p,n[f+12],6,1700485571),p=y(p,u,l,d,n[f+3],10,-1894986606),d=y(d,p,u,l,n[f+10],15,-1051523),l=y(l,d,p,u,n[f+1],21,-2054922799),u=y(u,l,d,p,n[f+8],6,1873313359),p=y(p,u,l,d,n[f+15],10,-30611744),d=y(d,p,u,l,n[f+6],15,-1560198380),l=y(l,d,p,u,n[f+13],21,1309151649),u=y(u,l,d,p,n[f+4],6,-145523070),p=y(p,u,l,d,n[f+11],10,-1120210379),d=y(d,p,u,l,n[f+2],15,718787259),l=y(l,d,p,u,n[f+9],21,-343485551),u=u+g>>>0,l=l+b>>>0,d=d+C>>>0,p=p+S>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,n,r,o,i,a){var s=e+(t^n^r)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?a.bytesToString(n):r.bytesToHex(n)}},7824:e=>{var t=1e3,n=60*t,r=60*n,o=24*r;function i(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,a){a=a||{};var s,c=typeof e;if("string"===c&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(e);if("number"===c&&!1===isNaN(e))return a.long?i(s=e,o,"day")||i(s,r,"hour")||i(s,n,"minute")||i(s,t,"second")||s+" ms":function(e){return e>=o?Math.round(e/o)+"d":e>=r?Math.round(e/r)+"h":e>=n?Math.round(e/n)+"m":e>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},1795:function(e,t,n){var r;e=n.nmd(e),function(){"use strict";var o={function:!0,object:!0},i=o[typeof window]&&window||this,a=o[typeof t]&&t,s=o.object&&e&&!e.nodeType&&e,c=a&&s&&"object"==typeof n.g&&n.g;!c||c.global!==c&&c.window!==c&&c.self!==c||(i=c);var u=Math.pow(2,53)-1,l=/\bOpera/,d=Object.prototype,p=d.hasOwnProperty,f=d.toString;function h(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function m(e){return e=C(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:h(e)}function v(e,t){for(var n in e)p.call(e,n)&&t(e[n],n,e)}function y(e){return null==e?h(e):f.call(e).slice(8,-1)}function g(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function b(e,t){var n=null;return function(e,t){var n=-1,r=e?e.length:0;if("number"==typeof r&&r>-1&&r<=u)for(;++n<r;)t(e[n],n);else v(e,t)}(e,(function(r,o){n=t(n,r,o,e)})),n}function C(e){return String(e).replace(/^ +| +$/g,"")}var S=function e(t){var n=i,r=t&&"object"==typeof t&&"String"!=y(t);r&&(n=t,t=null);var o=n.navigator||{},a=o.userAgent||"";t||(t=a);var s,c,u,d,p=r?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(f.toString()),h="Object",S=r?h:"ScriptBridgingProxyObject",w=r?h:"Environment",k=r&&n.java?"JavaPackage":y(n.java),E=r?h:"RuntimeObject",T=/\bJava/.test(k)&&n.java,_=T&&y(n.environment)==w,R=T?"a":"α",x=T?"b":"β",D=n.document||{},P=n.operamini||n.opera,M=l.test(M=r&&P?P["[[Class]]"]:y(P))?M:P=null,O=t,A=[],L=null,I=t==a,N=I&&P&&"function"==typeof P.version&&P.version(),j=b([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,n){return e||RegExp("\\b"+(n.pattern||g(n))+"\\b","i").exec(t)&&(n.label||n)})),F=b(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,n){return e||RegExp("\\b"+(n.pattern||g(n))+"\\b","i").exec(t)&&(n.label||n)})),B=U([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),q=b({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},(function(e,n,r){return e||(n[B]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(B)]||RegExp("\\b"+g(r)+"(?:\\b|\\w*\\d)","i").exec(t))&&r})),G=b(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,n){var r=n.pattern||g(n);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),m(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,n.label||n)),e}));function U(e){return b(e,(function(e,n){var r=n.pattern||g(n);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=m(e[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function H(e){return b(e,(function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(j&&(j=[j]),/\bAndroid\b/.test(G)&&!B&&(s=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(B=C(s[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),q&&!B?B=U([q]):q&&B&&(B=B.replace(RegExp("^("+g(q)+")[-_.\\s]","i"),q+" ").replace(RegExp("^("+g(q)+")[-_.]?(\\w)","i"),q+" $2")),(s=/\bGoogle TV\b/.exec(B))&&(B=s[0]),/\bSimulator\b/i.test(t)&&(B=(B?B+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(t)&&A.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(t)?(q=(s=e(t.replace(/like iPhone OS/,""))).manufacturer,B=s.product):/^iP/.test(B)?(F||(F="Safari"),G="iOS"+((s=/ OS ([\d_]+)/i.exec(t))?" "+s[1].replace(/_/g,"."):"")):"Konqueror"==F&&/^Linux\b/i.test(G)?G="Kubuntu":q&&"Google"!=q&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(B))||/\bAndroid\b/.test(G)&&/^Chrome/.test(F)&&/\bVersion\//i.test(t)?(F="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==F?(/\bMobi/i.test(t)||(G="Android",A.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&A.unshift("accelerated")):"UC Browser"==F&&/\bUCWEB\b/.test(t)?A.push("speed mode"):"PaleMoon"==F&&(s=/\bFirefox\/([\d.]+)\b/.exec(t))?A.push("identifying as Firefox "+s[1]):"Firefox"==F&&(s=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),B||(B=s[1])):!F||(s=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!B&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(s+"/")+8))&&(F=null),(s=B||q||G)&&(B||q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:s)+" Browser")):"Electron"==F&&(s=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&A.push("Chromium "+s),N||(N=H(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",g(F),"(?:Firefox|Minefield|NetFront)"])),(s=("iCab"==j&&parseFloat(N)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(j=[s]),"IE"==F&&(s=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(F+=" Mobile",G="Windows Phone "+(/\+$/.test(s)?s:s+".x"),A.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(F="IE Mobile",G="Windows Phone 8.x",A.unshift("desktop mode"),N||(N=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=F&&"Trident"==j&&(s=/\brv:([\d.]+)/.exec(t))&&(F&&A.push("identifying as "+F+(N?" "+N:"")),F="IE",N=s[1]),I){if("global",d=null!=(u=n)?typeof u.global:"number",/^(?:boolean|number|string|undefined)$/.test(d)||"object"==d&&!u.global)y(s=n.runtime)==S?(F="Adobe AIR",G=s.flash.system.Capabilities.os):y(s=n.phantom)==E?(F="PhantomJS",N=(s=s.version||null)&&s.major+"."+s.minor+"."+s.patch):"number"==typeof D.documentMode&&(s=/\bTrident\/(\d+)/i.exec(t))?(N=[N,D.documentMode],(s=+s[1]+4)!=N[1]&&(A.push("IE "+N[1]+" mode"),j&&(j[1]=""),N[1]=s),N="IE"==F?String(N[1].toFixed(1)):N[0]):"number"==typeof D.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(A.push("masking as "+F+" "+N),F="IE",N="11.0",j=["Trident"],G="Windows");else if(T&&(O=(s=T.lang.System).getProperty("os.arch"),G=G||s.getProperty("os.name")+" "+s.getProperty("os.version")),_){try{N=n.require("ringo/engine").version.join("."),F="RingoJS"}catch(e){(s=n.system)&&s.global.system==n.system&&(F="Narwhal",G||(G=s[0].os||null))}F||(F="Rhino")}else"object"==typeof n.process&&!n.process.browser&&(s=n.process)&&("object"==typeof s.versions&&("string"==typeof s.versions.electron?(A.push("Node "+s.versions.node),F="Electron",N=s.versions.electron):"string"==typeof s.versions.nw&&(A.push("Chromium "+N,"Node "+s.versions.node),F="NW.js",N=s.versions.nw)),F||(F="Node.js",O=s.arch,G=s.platform,N=(N=/[\d.]+/.exec(s.version))?N[0]:null));G=G&&m(G)}if(N&&(s=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(N)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(I&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(L=/b/i.test(s)?"beta":"alpha",N=N.replace(RegExp(s+"\\+?$"),"")+("beta"==L?x:R)+(/\d+\+?/.exec(s)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(G))F="Firefox Mobile";else if("Maxthon"==F&&N)N=N.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(B))"Xbox 360"==B&&(G=null),"Xbox 360"==B&&/\bIEMobile\b/.test(t)&&A.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||B||/Browser|Mobi/.test(F))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==F&&I)try{null===n.external&&A.unshift("platform preview")}catch(e){A.unshift("embedded")}else(/\bBlackBerry\b/.test(B)||/\bBB10\b/.test(t))&&(s=(RegExp(B.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||N)?(G=((s=[s,/BB10/.test(t)])[1]?(B=null,q="BlackBerry"):"Device Software")+" "+s[0],N=null):this!=v&&"Wii"!=B&&(I&&P||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==F&&(G&&!/^Win/.test(G)&&N>5.5||/\bWindows XP\b/.test(G)&&N>8||8==N&&!/\bTrident\b/.test(t)))&&!l.test(s=e.call(v,t.replace(l,"")+";"))&&s.name&&(s="ing as "+s.name+((s=s.version)?" "+s:""),l.test(F)?(/\bIE\b/.test(s)&&"Mac OS"==G&&(G=null),s="identify"+s):(s="mask"+s,F=M?m(M.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(s)&&(G=null),I||(N=null)),j=["Presto"],A.push(s));else F+=" Mobile";(s=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(s=[parseFloat(s.replace(/\.(\d)$/,".0$1")),s],"Safari"==F&&"+"==s[1].slice(-1)?(F="WebKit Nightly",L="alpha",N=s[1].slice(0,-1)):N!=s[1]&&N!=(s[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(N=null),s[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==s[0]&&537.36==s[2]&&parseFloat(s[1])>=28&&"WebKit"==j&&(j=["Blink"]),I&&(p||s[1])?(j&&(j[1]="like Chrome"),s=s[1]||((s=s[0])<530?1:s<532?2:s<532.05?3:s<533?4:s<534.03?5:s<534.07?6:s<534.1?7:s<534.13?8:s<534.16?9:s<534.24?10:s<534.3?11:s<535.01?12:s<535.02?"13+":s<535.07?15:s<535.11?16:s<535.19?17:s<536.05?18:s<536.1?19:s<537.01?20:s<537.11?"21+":s<537.13?23:s<537.18?24:s<537.24?25:s<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),s=(s=s[0])<400?1:s<500?2:s<526?3:s<533?4:s<534?"4+":s<535?5:s<537?6:s<538?7:s<601?8:s<602?9:s<604?10:s<606?11:s<608?12:"12"),j&&(j[1]+=" "+(s+="number"==typeof s?".x":/[.+]/.test(s)?"":"+")),"Safari"==F&&(!N||parseInt(N)>45)?N=s:"Chrome"==F&&/\bHeadlessChrome/i.test(t)&&A.unshift("headless")),"Opera"==F&&(s=/\bzbov|zvav$/.exec(G))?(F+=" ",A.unshift("desktop mode"),"zvav"==s?(F+="Mini",N=null):F+="Mobile",G=G.replace(RegExp(" *"+s+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(j&&j[1])?(A.unshift("desktop mode"),F="Chrome Mobile",N=null,/\bOS X\b/.test(G)?(q="Apple",G="iOS 4.3+"):G=null):/\bSRWare Iron\b/.test(F)&&!N&&(N=H("Chrome")),N&&0==N.indexOf(s=/[\d.]+$/.exec(G))&&t.indexOf("/"+s+"-")>-1&&(G=C(G.replace(s,""))),G&&-1!=G.indexOf(F)&&!RegExp(F+" OS").test(G)&&(G=G.replace(RegExp(" *"+g(F)+" *"),"")),j&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(G)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(F)&&j[1])&&(s=j[j.length-1])&&A.push(s),A.length&&(A=["("+A.join("; ")+")"]),q&&B&&B.indexOf(q)<0&&A.push("on "+q),B&&A.push((/^on /.test(A[A.length-1])?"":"on ")+B),G&&(s=/ ([\d.+]+)$/.exec(G),c=s&&"/"==G.charAt(G.length-s[0].length-1),G={architecture:32,family:s&&!c?G.replace(s[0],""):G,version:s?s[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(s=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(O))&&!/\bi686\b/i.test(O)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+s),"")),F&&(/\bWOW64\b/i.test(t)||I&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&A.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==F&&parseFloat(N)>=39&&(G.architecture=64),t||(t=null);var K={};return K.description=t,K.layout=j&&j[0],K.manufacturer=q,K.name=F,K.prerelease=L,K.product=B,K.ua=t,K.version=F&&N,K.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},K.parse=e,K.toString=function(){return this.description||""},K.version&&A.unshift(N),K.name&&A.unshift(F),G&&F&&(G!=String(G).split(" ")[0]||G!=F.split(" ")[0]&&!B)&&A.push(B?"("+G+")":"on "+G),A.length&&(K.description=A.join(" ")),K}();i.platform=S,void 0===(r=function(){return S}.call(t,n,t,e))||(e.exports=r)}.call(this)},1033:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>k});var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),o="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),a="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&c()}function s(){a(i)}function c(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);o=e}return c}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;s.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),l=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||i},p=y(0,0,0,0);function f(e){return parseFloat(e)||0}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+f(e["border-"+n+"-width"])}),0)}var m="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return o?m(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return p;var r=d(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=f(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=f(r.width),c=f(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=h(r,"left","right")+i),Math.round(c+a)!==n&&(c-=h(r,"top","bottom")+a)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(s+i)-t,l=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return y(o.left,o.top,s,c)}(e):p}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,o,i,a,s,c,u=(r=(n=t).x,o=n.y,i=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),c);l(this,{target:e,contentRect:u})},C=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),S="undefined"!=typeof WeakMap?new WeakMap:new r,w=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new C(t,n,this);S.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){w.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}));const k=void 0!==i.ResizeObserver?i.ResizeObserver:w},2539:(e,t,n)=>{"use strict";var r=n(7539);function o(e,t,n,o,i){var a=r.writeRtpDescription(e.kind,t);if(a+=r.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=r.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===n?"actpass":i||"active"),a+="a=mid:"+e.mid+"\r\n",e.rtpSender&&e.rtpReceiver?a+="a=sendrecv\r\n":e.rtpSender?a+="a=sendonly\r\n":e.rtpReceiver?a+="a=recvonly\r\n":a+="a=inactive\r\n",e.rtpSender){var s=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=s;var c="msid:"+(o?o.id:"-")+" "+s+"\r\n";a+="a="+c,a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+c,e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+c,a+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return a+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+r.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+r.localCName+"\r\n"),a}function i(e,t){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(e,t){e=parseInt(e,10);for(var n=0;n<t.length;n++)if(t[n].payloadType===e||t[n].preferredPayloadType===e)return t[n]},o=function(e,t,n,o){var i=r(e.parameters.apt,n),a=r(t.parameters.apt,o);return i&&a&&i.name.toLowerCase()===a.name.toLowerCase()};return e.codecs.forEach((function(r){for(var i=0;i<t.codecs.length;i++){var a=t.codecs[i];if(r.name.toLowerCase()===a.name.toLowerCase()&&r.clockRate===a.clockRate){if("rtx"===r.name.toLowerCase()&&r.parameters&&a.parameters.apt&&!o(r,a,e.codecs,t.codecs))continue;(a=JSON.parse(JSON.stringify(a))).numChannels=Math.min(r.numChannels,a.numChannels),n.codecs.push(a),a.rtcpFeedback=a.rtcpFeedback.filter((function(e){for(var t=0;t<r.rtcpFeedback.length;t++)if(r.rtcpFeedback[t].type===e.type&&r.rtcpFeedback[t].parameter===e.parameter)return!0;return!1}));break}}})),e.headerExtensions.forEach((function(e){for(var r=0;r<t.headerExtensions.length;r++){var o=t.headerExtensions[r];if(e.uri===o.uri){n.headerExtensions.push(o);break}}})),n}function a(e,t,n){return-1!=={offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[t][e].indexOf(n)}function s(e,t){var n=e.getRemoteCandidates().find((function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type}));return n||e.addRemoteCandidate(t),!n}function c(e,t){var n=new Error(t);return n.name=e,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],n}e.exports=function(e,t){function n(t,n){n.addTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("addtrack",{track:t}))}function u(t,n,r,o){var i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=o,e.setTimeout((function(){t._dispatchEvent("track",i)}))}var l=function(n){var o=this,i=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach((function(e){o[e]=i[e].bind(i)})),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",n=JSON.parse(JSON.stringify(n||{})),this.usingBundle="max-bundle"===n.bundlePolicy,"negotiate"===n.rtcpMuxPolicy)throw c("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(n.rtcpMuxPolicy||(n.rtcpMuxPolicy="require"),n.iceTransportPolicy){case"all":case"relay":break;default:n.iceTransportPolicy="all"}switch(n.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:n.bundlePolicy="balanced"}if(n.iceServers=function(e,t){var n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((function(e){if(e&&(e.urls||e.url)){var r=e.urls||e.url;e.url&&!e.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o="string"==typeof r;return o&&(r=[r]),r=r.filter((function(e){return 0!==e.indexOf("turn:")||-1===e.indexOf("transport=udp")||-1!==e.indexOf("turn:[")||n?0===e.indexOf("stun:")&&t>=14393&&-1===e.indexOf("?transport=udp"):(n=!0,!0)})),delete e.url,e.urls=o?r[0]:r,!!r.length}}))}(n.iceServers||[],t),this._iceGatherers=[],n.iceCandidatePoolSize)for(var a=n.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:n.iceServers,gatherPolicy:n.iceTransportPolicy}));else n.iceCandidatePoolSize=0;this._config=n,this.transceivers=[],this._sdpSessionId=r.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),"function"==typeof this["on"+e]&&this["on"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var n=this.transceivers.length>0,r={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&n)r.iceTransport=this.transceivers[0].iceTransport,r.dtlsTransport=this.transceivers[0].dtlsTransport;else{var o=this._createIceAndDtlsTransports();r.iceTransport=o.iceTransport,r.dtlsTransport=o.dtlsTransport}return t||this.transceivers.push(r),r},l.prototype.addTrack=function(t,n){if(this._isClosed)throw c("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var r;if(this.transceivers.find((function(e){return e.track===t})))throw c("InvalidAccessError","Track already exists.");for(var o=0;o<this.transceivers.length;o++)this.transceivers[o].track||this.transceivers[o].kind!==t.kind||(r=this.transceivers[o]);return r||(r=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(n)&&this.localStreams.push(n),r.track=t,r.stream=n,r.rtpSender=new e.RTCRtpSender(t,r.dtlsTransport),r.rtpSender},l.prototype.addStream=function(e){var n=this;if(t>=15025)e.getTracks().forEach((function(t){n.addTrack(t,e)}));else{var r=e.clone();e.getTracks().forEach((function(e,t){var n=r.getTracks()[t];e.addEventListener("enabled",(function(e){n.enabled=e.enabled}))})),r.getTracks().forEach((function(e){n.addTrack(e,r)}))}},l.prototype.removeTrack=function(t){if(this._isClosed)throw c("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(t instanceof e.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var n=this.transceivers.find((function(e){return e.rtpSender===t}));if(!n)throw c("InvalidAccessError","Sender was not created by this connection.");var r=n.stream;n.rtpSender.stop(),n.rtpSender=null,n.track=null,n.stream=null,-1===this.transceivers.map((function(e){return e.stream})).indexOf(r)&&this.localStreams.indexOf(r)>-1&&this.localStreams.splice(this.localStreams.indexOf(r),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach((function(e){var n=t.getSenders().find((function(t){return t.track===e}));n&&t.removeTrack(n)}))},l.prototype.getSenders=function(){return this.transceivers.filter((function(e){return!!e.rtpSender})).map((function(e){return e.rtpSender}))},l.prototype.getReceivers=function(){return this.transceivers.filter((function(e){return!!e.rtpReceiver})).map((function(e){return e.rtpReceiver}))},l.prototype._createIceGatherer=function(t,n){var r=this;if(n&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var o=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(o,"state",{value:"new",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var n=!e.candidate||0===Object.keys(e.candidate).length;o.state=n?"completed":"gathering",null!==r.transceivers[t].bufferedCandidateEvents&&r.transceivers[t].bufferedCandidateEvents.push(e)},o.addEventListener("localcandidate",this.transceivers[t].bufferCandidates),o},l.prototype._gather=function(t,n){var o=this,i=this.transceivers[n].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[n].bufferedCandidateEvents;this.transceivers[n].bufferedCandidateEvents=null,i.removeEventListener("localcandidate",this.transceivers[n].bufferCandidates),i.onlocalcandidate=function(e){if(!(o.usingBundle&&n>0)){var a=new Event("icecandidate");a.candidate={sdpMid:t,sdpMLineIndex:n};var s=e.candidate,c=!s||0===Object.keys(s).length;if(c)"new"!==i.state&&"gathering"!==i.state||(i.state="completed");else{"new"===i.state&&(i.state="gathering"),s.component=1,s.ufrag=i.getLocalParameters().usernameFragment;var u=r.writeCandidate(s);a.candidate=Object.assign(a.candidate,r.parseCandidate(u)),a.candidate.candidate=u,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var l=r.getMediaSections(o._localDescription.sdp);l[a.candidate.sdpMLineIndex]+=c?"a=end-of-candidates\r\n":"a="+a.candidate.candidate+"\r\n",o._localDescription.sdp=r.getDescription(o._localDescription.sdp)+l.join("");var d=o.transceivers.every((function(e){return e.iceGatherer&&"completed"===e.iceGatherer.state}));"gathering"!==o.iceGatheringState&&(o.iceGatheringState="gathering",o._emitGatheringStateChange()),c||o._dispatchEvent("icecandidate",a),d&&(o._dispatchEvent("icecandidate",new Event("icecandidate")),o.iceGatheringState="complete",o._emitGatheringStateChange())}},e.setTimeout((function(){a.forEach((function(e){i.onlocalcandidate(e)}))}),0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,n=new e.RTCIceTransport(null);n.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var r=new e.RTCDtlsTransport(n);return r.ondtlsstatechange=function(){t._updateConnectionState()},r.onerror=function(){Object.defineProperty(r,"state",{value:"failed",writable:!0}),t._updateConnectionState()},{iceTransport:n,dtlsTransport:r}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var n=this.transceivers[e].iceTransport;n&&(delete n.onicestatechange,delete this.transceivers[e].iceTransport);var r=this.transceivers[e].dtlsTransport;r&&(delete r.ondtlsstatechange,delete r.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,n,o){var a=i(e.localCapabilities,e.remoteCapabilities);n&&e.rtpSender&&(a.encodings=e.sendEncodingParameters,a.rtcp={cname:r.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(a.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(a)),o&&e.rtpReceiver&&a.codecs.length>0&&("video"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach((function(e){delete e.rtx})),e.recvEncodingParameters.length?a.encodings=e.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(a.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(a.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(a))},l.prototype.setLocalDescription=function(e){var t,n,o=this;if(-1===["offer","answer"].indexOf(e.type))return Promise.reject(c("TypeError",'Unsupported type "'+e.type+'"'));if(!a("setLocalDescription",e.type,o.signalingState)||o._isClosed)return Promise.reject(c("InvalidStateError","Can not set local "+e.type+" in state "+o.signalingState));if("offer"===e.type)t=r.splitSections(e.sdp),n=t.shift(),t.forEach((function(e,t){var n=r.parseRtpParameters(e);o.transceivers[t].localCapabilities=n})),o.transceivers.forEach((function(e,t){o._gather(e.mid,t)}));else if("answer"===e.type){t=r.splitSections(o._remoteDescription.sdp),n=t.shift();var s=r.matchPrefix(n,"a=ice-lite").length>0;t.forEach((function(e,t){var a=o.transceivers[t],c=a.iceGatherer,u=a.iceTransport,l=a.dtlsTransport,d=a.localCapabilities,p=a.remoteCapabilities;if(!(r.isRejected(e)&&0===r.matchPrefix(e,"a=bundle-only").length||a.rejected)){var f=r.getIceParameters(e,n),h=r.getDtlsParameters(e,n);s&&(h.role="server"),o.usingBundle&&0!==t||(o._gather(a.mid,t),"new"===u.state&&u.start(c,f,s?"controlling":"controlled"),"new"===l.state&&l.start(h));var m=i(d,p);o._transceive(a,m.codecs.length>0,!1)}}))}return o._localDescription={type:e.type,sdp:e.sdp},"offer"===e.type?o._updateSignalingState("have-local-offer"):o._updateSignalingState("stable"),Promise.resolve()},l.prototype.setRemoteDescription=function(o){var l=this;if(-1===["offer","answer"].indexOf(o.type))return Promise.reject(c("TypeError",'Unsupported type "'+o.type+'"'));if(!a("setRemoteDescription",o.type,l.signalingState)||l._isClosed)return Promise.reject(c("InvalidStateError","Can not set remote "+o.type+" in state "+l.signalingState));var d={};l.remoteStreams.forEach((function(e){d[e.id]=e}));var p=[],f=r.splitSections(o.sdp),h=f.shift(),m=r.matchPrefix(h,"a=ice-lite").length>0,v=r.matchPrefix(h,"a=group:BUNDLE ").length>0;l.usingBundle=v;var y=r.matchPrefix(h,"a=ice-options:")[0];return l.canTrickleIceCandidates=!!y&&y.substr(14).split(" ").indexOf("trickle")>=0,f.forEach((function(a,c){var u=r.splitLines(a),f=r.getKind(a),y=r.isRejected(a)&&0===r.matchPrefix(a,"a=bundle-only").length,g=u[0].substr(2).split(" ")[2],b=r.getDirection(a,h),C=r.parseMsid(a),S=r.getMid(a)||r.generateIdentifier();if(y||"application"===f&&("DTLS/SCTP"===g||"UDP/DTLS/SCTP"===g))l.transceivers[c]={mid:S,kind:f,protocol:g,rejected:!0};else{var w,k,E,T,_,R,x,D,P;!y&&l.transceivers[c]&&l.transceivers[c].rejected&&(l.transceivers[c]=l._createTransceiver(f,!0));var M,O,A=r.parseRtpParameters(a);y||(M=r.getIceParameters(a,h),(O=r.getDtlsParameters(a,h)).role="client"),x=r.parseRtpEncodingParameters(a);var L=r.parseRtcpParameters(a),I=r.matchPrefix(a,"a=end-of-candidates",h).length>0,N=r.matchPrefix(a,"a=candidate:").map((function(e){return r.parseCandidate(e)})).filter((function(e){return 1===e.component}));if(("offer"===o.type||"answer"===o.type)&&!y&&v&&c>0&&l.transceivers[c]&&(l._disposeIceAndDtlsTransports(c),l.transceivers[c].iceGatherer=l.transceivers[0].iceGatherer,l.transceivers[c].iceTransport=l.transceivers[0].iceTransport,l.transceivers[c].dtlsTransport=l.transceivers[0].dtlsTransport,l.transceivers[c].rtpSender&&l.transceivers[c].rtpSender.setTransport(l.transceivers[0].dtlsTransport),l.transceivers[c].rtpReceiver&&l.transceivers[c].rtpReceiver.setTransport(l.transceivers[0].dtlsTransport)),"offer"!==o.type||y)"answer"!==o.type||y||(k=(w=l.transceivers[c]).iceGatherer,E=w.iceTransport,T=w.dtlsTransport,_=w.rtpReceiver,R=w.sendEncodingParameters,D=w.localCapabilities,l.transceivers[c].recvEncodingParameters=x,l.transceivers[c].remoteCapabilities=A,l.transceivers[c].rtcpParameters=L,N.length&&"new"===E.state&&(!m&&!I||v&&0!==c?N.forEach((function(e){s(w.iceTransport,e)})):E.setRemoteCandidates(N)),v&&0!==c||("new"===E.state&&E.start(k,M,"controlling"),"new"===T.state&&T.start(O)),!i(w.localCapabilities,w.remoteCapabilities).codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,l._transceive(w,"sendrecv"===b||"recvonly"===b,"sendrecv"===b||"sendonly"===b),!_||"sendrecv"!==b&&"sendonly"!==b?delete w.rtpReceiver:(P=_.track,C?(d[C.stream]||(d[C.stream]=new e.MediaStream),n(P,d[C.stream]),p.push([P,_,d[C.stream]])):(d.default||(d.default=new e.MediaStream),n(P,d.default),p.push([P,_,d.default]))));else{(w=l.transceivers[c]||l._createTransceiver(f)).mid=S,w.iceGatherer||(w.iceGatherer=l._createIceGatherer(c,v)),N.length&&"new"===w.iceTransport.state&&(!I||v&&0!==c?N.forEach((function(e){s(w.iceTransport,e)})):w.iceTransport.setRemoteCandidates(N)),D=e.RTCRtpReceiver.getCapabilities(f),t<15019&&(D.codecs=D.codecs.filter((function(e){return"rtx"!==e.name}))),R=w.sendEncodingParameters||[{ssrc:1001*(2*c+2)}];var j,F=!1;"sendrecv"===b||"sendonly"===b?(F=!w.rtpReceiver,_=w.rtpReceiver||new e.RTCRtpReceiver(w.dtlsTransport,f),F&&(P=_.track,C&&"-"===C.stream||(C?(d[C.stream]||(d[C.stream]=new e.MediaStream,Object.defineProperty(d[C.stream],"id",{get:function(){return C.stream}})),Object.defineProperty(P,"id",{get:function(){return C.track}}),j=d[C.stream]):(d.default||(d.default=new e.MediaStream),j=d.default)),j&&(n(P,j),w.associatedRemoteMediaStreams.push(j)),p.push([P,_,j]))):w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach((function(t){var n=t.getTracks().find((function(e){return e.id===w.rtpReceiver.track.id}));n&&function(t,n){n.removeTrack(t),n.dispatchEvent(new e.MediaStreamTrackEvent("removetrack",{track:t}))}(n,t)})),w.associatedRemoteMediaStreams=[]),w.localCapabilities=D,w.remoteCapabilities=A,w.rtpReceiver=_,w.rtcpParameters=L,w.sendEncodingParameters=R,w.recvEncodingParameters=x,l._transceive(l.transceivers[c],!1,F)}}})),void 0===l._dtlsRole&&(l._dtlsRole="offer"===o.type?"active":"passive"),l._remoteDescription={type:o.type,sdp:o.sdp},"offer"===o.type?l._updateSignalingState("have-remote-offer"):l._updateSignalingState("stable"),Object.keys(d).forEach((function(t){var n=d[t];if(n.getTracks().length){if(-1===l.remoteStreams.indexOf(n)){l.remoteStreams.push(n);var r=new Event("addstream");r.stream=n,e.setTimeout((function(){l._dispatchEvent("addstream",r)}))}p.forEach((function(e){var t=e[0],r=e[1];n.id===e[2].id&&u(l,t,r,[n])}))}})),p.forEach((function(e){e[2]||u(l,e[0],e[1],[])})),e.setTimeout((function(){l&&l.transceivers&&l.transceivers.forEach((function(e){e.iceTransport&&"new"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),e.iceTransport.addRemoteCandidate({}))}))}),4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach((function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()})),this._isClosed=!0,this._updateSignalingState("closed")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;"stable"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout((function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event("negotiationneeded");t._dispatchEvent("negotiationneeded",e)}}),0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++})),e="new",t.failed>0?e="failed":t.checking>0?e="checking":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0?e="connected":t.completed>0&&(e="completed"),e!==this.iceConnectionState){this.iceConnectionState=e;var n=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",n)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach((function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)})),t.connected+=t.completed,e="new",t.failed>0?e="failed":t.connecting>0?e="connecting":t.disconnected>0?e="disconnected":t.new>0?e="new":t.connected>0&&(e="connected"),e!==this.connectionState){this.connectionState=e;var n=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",n)}},l.prototype.createOffer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createOffer after close"));var i=n.transceivers.filter((function(e){return"audio"===e.kind})).length,a=n.transceivers.filter((function(e){return"video"===e.kind})).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==s.offerToReceiveAudio&&(i=!0===s.offerToReceiveAudio?1:!1===s.offerToReceiveAudio?0:s.offerToReceiveAudio),void 0!==s.offerToReceiveVideo&&(a=!0===s.offerToReceiveVideo?1:!1===s.offerToReceiveVideo?0:s.offerToReceiveVideo)}for(n.transceivers.forEach((function(e){"audio"===e.kind?--i<0&&(e.wantReceive=!1):"video"===e.kind&&--a<0&&(e.wantReceive=!1)}));i>0||a>0;)i>0&&(n._createTransceiver("audio"),i--),a>0&&(n._createTransceiver("video"),a--);var u=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.transceivers.forEach((function(o,i){var a=o.track,s=o.kind,c=o.mid||r.generateIdentifier();o.mid=c,o.iceGatherer||(o.iceGatherer=n._createIceGatherer(i,n.usingBundle));var u=e.RTCRtpSender.getCapabilities(s);t<15019&&(u.codecs=u.codecs.filter((function(e){return"rtx"!==e.name}))),u.codecs.forEach((function(e){"H264"===e.name&&void 0===e.parameters["level-asymmetry-allowed"]&&(e.parameters["level-asymmetry-allowed"]="1"),o.remoteCapabilities&&o.remoteCapabilities.codecs&&o.remoteCapabilities.codecs.forEach((function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)}))})),u.headerExtensions.forEach((function(e){(o.remoteCapabilities&&o.remoteCapabilities.headerExtensions||[]).forEach((function(t){e.uri===t.uri&&(e.id=t.id)}))}));var l=o.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&"video"===s&&!l[0].rtx&&(l[0].rtx={ssrc:l[0].ssrc+1}),o.wantReceive&&(o.rtpReceiver=new e.RTCRtpReceiver(o.dtlsTransport,s)),o.localCapabilities=u,o.sendEncodingParameters=l})),"max-compat"!==n._config.bundlePolicy&&(u+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),u+="a=ice-options:trickle\r\n",n.transceivers.forEach((function(e,t){u+=o(e,e.localCapabilities,"offer",e.stream,n._dtlsRole),u+="a=rtcp-rsize\r\n",!e.iceGatherer||"new"===n.iceGatheringState||0!==t&&n.usingBundle||(e.iceGatherer.getLocalCandidates().forEach((function(e){e.component=1,u+="a="+r.writeCandidate(e)+"\r\n"})),"completed"===e.iceGatherer.state&&(u+="a=end-of-candidates\r\n"))}));var l=new e.RTCSessionDescription({type:"offer",sdp:u});return Promise.resolve(l)},l.prototype.createAnswer=function(){var n=this;if(n._isClosed)return Promise.reject(c("InvalidStateError","Can not call createAnswer after close"));if("have-remote-offer"!==n.signalingState&&"have-local-pranswer"!==n.signalingState)return Promise.reject(c("InvalidStateError","Can not call createAnswer in signalingState "+n.signalingState));var a=r.writeSessionBoilerplate(n._sdpSessionId,n._sdpSessionVersion++);n.usingBundle&&(a+="a=group:BUNDLE "+n.transceivers.map((function(e){return e.mid})).join(" ")+"\r\n"),a+="a=ice-options:trickle\r\n";var s=r.getMediaSections(n._remoteDescription.sdp).length;n.transceivers.forEach((function(e,r){if(!(r+1>s)){if(e.rejected)return"application"===e.kind?"DTLS/SCTP"===e.protocol?a+="m=application 0 DTLS/SCTP 5000\r\n":a+="m=application 0 "+e.protocol+" webrtc-datachannel\r\n":"audio"===e.kind?a+="m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n":"video"===e.kind&&(a+="m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"),void(a+="c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:"+e.mid+"\r\n");var c;e.stream&&("audio"===e.kind?c=e.stream.getAudioTracks()[0]:"video"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&"video"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1}));var u=i(e.localCapabilities,e.remoteCapabilities);!u.codecs.filter((function(e){return"rtx"===e.name.toLowerCase()})).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,a+=o(e,u,"answer",e.stream,n._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(a+="a=rtcp-rsize\r\n")}}));var u=new e.RTCSessionDescription({type:"answer",sdp:a});return Promise.resolve(u)},l.prototype.addIceCandidate=function(e){var t,n=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise((function(o,i){if(!n._remoteDescription)return i(c("InvalidStateError","Can not add ICE candidate without a remote description"));if(e&&""!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var u=0;u<n.transceivers.length;u++)if(n.transceivers[u].mid===e.sdpMid){a=u;break}var l=n.transceivers[a];if(!l)return i(c("OperationError","Can not add ICE candidate"));if(l.rejected)return o();var d=Object.keys(e.candidate).length>0?r.parseCandidate(e.candidate):{};if("tcp"===d.protocol&&(0===d.port||9===d.port))return o();if(d.component&&1!==d.component)return o();if((0===a||a>0&&l.iceTransport!==n.transceivers[0].iceTransport)&&!s(l.iceTransport,d))return i(c("OperationError","Can not add ICE candidate"));var p=e.candidate.trim();0===p.indexOf("a=")&&(p=p.substr(2)),(t=r.getMediaSections(n._remoteDescription.sdp))[a]+="a="+(d.type?p:"end-of-candidates")+"\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join("")}else for(var f=0;f<n.transceivers.length&&(n.transceivers[f].rejected||(n.transceivers[f].iceTransport.addRemoteCandidate({}),(t=r.getMediaSections(n._remoteDescription.sdp))[f]+="a=end-of-candidates\r\n",n._remoteDescription.sdp=r.getDescription(n._remoteDescription.sdp)+t.join(""),!n.usingBundle));f++);o()}))},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var n=null;if(this.transceivers.forEach((function(e){e.rtpSender&&e.rtpSender.track===t?n=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(n=e.rtpReceiver)})),!n)throw c("InvalidAccessError","Invalid selector.");return n.getStats()}var r=[];return this.transceivers.forEach((function(e){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach((function(t){e[t]&&r.push(e[t].getStats())}))})),Promise.all(r).then((function(e){var t=new Map;return e.forEach((function(e){e.forEach((function(e){t.set(e.id,e)}))})),t}))},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach((function(t){var n=e[t];if(n&&n.prototype&&n.prototype.getStats){var r=n.prototype.getStats;n.prototype.getStats=function(){return r.apply(this).then((function(e){var t=new Map;return Object.keys(e).forEach((function(n){var r;e[n].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[(r=e[n]).type]||r.type,t.set(n,e[n])})),t}))}}}));var d=["createOffer","createAnswer"];return d.forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[0]||"function"==typeof e[1]?t.apply(this,[arguments[2]]).then((function(t){"function"==typeof e[0]&&e[0].apply(null,[t])}),(function(t){"function"==typeof e[1]&&e[1].apply(null,[t])})):t.apply(this,arguments)}})),(d=["setLocalDescription","setRemoteDescription","addIceCandidate"]).forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]||"function"==typeof e[2]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)}),(function(t){"function"==typeof e[2]&&e[2].apply(null,[t])})):t.apply(this,arguments)}})),["getStats"].forEach((function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return"function"==typeof e[1]?t.apply(this,arguments).then((function(){"function"==typeof e[1]&&e[1].apply(null)})):t.apply(this,arguments)}})),l}},7539:e=>{"use strict";var t={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},t.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},t.getDescription=function(e){var n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){var n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((function(e){return 0===e.indexOf(n)}))},t.parseCandidate=function(e){for(var t,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:n[t[r]]=t[r+1]}return n},t.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var n=e.type;return t.push("typ"),t.push(n),"host"!==n&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substr(14).split(" ")},t.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},t.parseFmtp=function(e){for(var t,n={},r=e.substr(e.indexOf(" ")+1).split(";"),o=0;o<r.length;o++)n[(t=r[o].trim().split("="))[0].trim()]=t[1];return n},t.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},t.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},t.getMid=function(e){var n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substr(6)},t.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){var r=t.matchPrefix(e+n,"a=ice-ufrag:")[0],o=t.matchPrefix(e+n,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substr(12),password:o.substr(10)}:null},t.writeIceParameters=function(e){return"a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n"},t.parseRtpParameters=function(e){for(var n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" "),o=3;o<r.length;o++){var i=r[o],a=t.matchPrefix(e,"a=rtpmap:"+i+" ")[0];if(a){var s=t.parseRtpMap(a),c=t.matchPrefix(e,"a=fmtp:"+i+" ");switch(s.parameters=c.length?t.parseFmtp(c[0]):{},s.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+i+" ").map(t.parseRtcpFb),n.codecs.push(s),s.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(s.name.toUpperCase())}}}return t.matchPrefix(e,"a=extmap:").forEach((function(e){n.headerExtensions.push(t.parseExtmap(e))})),n},t.writeRtpDescription=function(e,n){var r="";r+="m="+e+" ",r+=n.codecs.length>0?"9":"0",r+=" UDP/TLS/RTP/SAVPF ",r+=n.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((function(e){r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));var o=0;return n.codecs.forEach((function(e){e.maxptime>o&&(o=e.maxptime)})),o>0&&(r+="a=maxptime:"+o+"\r\n"),r+="a=rtcp-mux\r\n",n.headerExtensions&&n.headerExtensions.forEach((function(e){r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){var n,r=[],o=t.parseRtpParameters(e),i=-1!==o.fecMechanisms.indexOf("RED"),a=-1!==o.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=s.length>0&&s[0].ssrc,u=t.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));u.length>0&&u[0].length>1&&u[0][0]===c&&(n=u[0][1]),o.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var t={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&n&&(t.rtx={ssrc:n}),r.push(t),i&&((t=JSON.parse(JSON.stringify(t))).fec={ssrc:c,mechanism:a?"red+ulpfec":"red"},r.push(t))}})),0===r.length&&c&&r.push({ssrc:c});var l=t.matchPrefix(e,"b=");return l.length&&(l=0===l[0].indexOf("b=TIAS:")?parseInt(l[0].substr(7),10):0===l[0].indexOf("b=AS:")?1e3*parseInt(l[0].substr(5),10)*.95-16e3:void 0,r.forEach((function(e){e.maxBitrate=l}))),r},t.parseRtcpParameters=function(e){var n={},r=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);var o=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=0===o.length;var i=t.matchPrefix(e,"a=rtcp-mux");return n.mux=i.length>0,n},t.parseMsid=function(e){var n,r=t.matchPrefix(e,"a=msid:");if(1===r.length)return{stream:(n=r[0].substr(7).split(" "))[0],track:n[1]};var o=t.matchPrefix(e,"a=ssrc:").map((function(e){return t.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return o.length>0?{stream:(n=o[0].value.split(" "))[0],track:n[1]}:void 0},t.parseSctpDescription=function(e){var n,r=t.parseMLine(e),o=t.matchPrefix(e,"a=max-message-size:");o.length>0&&(n=parseInt(o[0].substr(19),10)),isNaN(n)&&(n=65536);var i=t.matchPrefix(e,"a=sctp-port:");if(i.length>0)return{port:parseInt(i[0].substr(12),10),protocol:r.fmt,maxMessageSize:n};if(t.matchPrefix(e,"a=sctpmap:").length>0){var a=t.matchPrefix(e,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,21)},t.writeSessionBoilerplate=function(e,n,r){var o=void 0!==n?n:2;return"v=0\r\no="+(r||"thisisadapterortc")+" "+(e||t.generateSessionId())+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.writeMediaSection=function(e,n,r,o){var i=t.writeRtpDescription(e.kind,n);if(i+=t.writeIceParameters(e.iceGatherer.getLocalParameters()),i+=t.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),"offer"===r?"actpass":"active"),i+="a=mid:"+e.mid+"\r\n",e.direction?i+="a="+e.direction+"\r\n":e.rtpSender&&e.rtpReceiver?i+="a=sendrecv\r\n":e.rtpSender?i+="a=sendonly\r\n":e.rtpReceiver?i+="a=recvonly\r\n":i+="a=inactive\r\n",e.rtpSender){var a="msid:"+o.id+" "+e.rtpSender.track.id+"\r\n";i+="a="+a,i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" "+a,e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" "+a,i+="a=ssrc-group:FID "+e.sendEncodingParameters[0].ssrc+" "+e.sendEncodingParameters[0].rtx.ssrc+"\r\n")}return i+="a=ssrc:"+e.sendEncodingParameters[0].ssrc+" cname:"+t.localCName+"\r\n",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(i+="a=ssrc:"+e.sendEncodingParameters[0].rtx.ssrc+" cname:"+t.localCName+"\r\n"),i},t.getDirection=function(e,n){for(var r=t.splitLines(e),o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substr(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substr(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){var n=t.splitLines(e)[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){var n=t.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var n=t.splitLines(e),r=0;r<n.length;r++)if(n[r].length<2||"="!==n[r].charAt(1))return!1;return!0},e.exports=t},8117:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>fe});var r={};n.r(r),n.d(r,{fixNegotiationNeeded:()=>M,shimAddTrackRemoveTrack:()=>D,shimAddTrackRemoveTrackWithNative:()=>x,shimGetDisplayMedia:()=>w,shimGetSendersWithDtmf:()=>T,shimGetStats:()=>_,shimGetUserMedia:()=>S,shimMediaStream:()=>k,shimOnTrack:()=>E,shimPeerConnection:()=>P,shimSenderReceiverGetStats:()=>R});var o={};n.r(o),n.d(o,{shimGetDisplayMedia:()=>I,shimGetUserMedia:()=>L,shimPeerConnection:()=>N,shimReplaceTrack:()=>j});var i={};n.r(i),n.d(i,{shimAddTransceiver:()=>V,shimCreateAnswer:()=>X,shimCreateOffer:()=>Y,shimGetDisplayMedia:()=>B,shimGetParameters:()=>z,shimGetUserMedia:()=>F,shimOnTrack:()=>q,shimPeerConnection:()=>G,shimRTCDataChannel:()=>W,shimReceiverGetStats:()=>H,shimRemoveStream:()=>K,shimSenderGetStats:()=>U});var a={};n.r(a),n.d(a,{shimAudioContext:()=>oe,shimCallbacksAPI:()=>Z,shimConstraints:()=>ee,shimCreateOfferLegacy:()=>re,shimGetUserMedia:()=>Q,shimLocalStreamsAPI:()=>J,shimRTCIceServerUrls:()=>te,shimRemoteStreamsAPI:()=>$,shimTrackEventTransceiver:()=>ne});var s={};n.r(s),n.d(s,{removeExtmapAllowMixed:()=>de,shimAddIceCandidateNullOrEmpty:()=>pe,shimConnectionState:()=>le,shimMaxMessageSize:()=>ce,shimRTCIceCandidate:()=>se,shimSendThrowTypeError:()=>ue});let c=!0,u=!0;function l(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function d(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,o=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return o.apply(this,arguments);const i=e=>{const t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,i),o.apply(this,[e,i])};const i=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return i.apply(this,arguments);if(!this._eventMap[t].has(n))return i.apply(this,arguments);const r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,i.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function p(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(c=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function f(e){return"boolean"!=typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(u=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function h(){if("object"==typeof window){if(c)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function m(e,t){u&&console.warn(e+" is deprecated, please use "+t+" instead.")}function v(e){return"[object Object]"===Object.prototype.toString.call(e)}function y(e){return v(e)?Object.keys(e).reduce((function(t,n){const r=v(e[n]),o=r?y(e[n]):e[n],i=r&&!Object.keys(o).length;return void 0===o||i?t:Object.assign(t,{[n]:o})}),{}):e}function g(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((r=>{r.endsWith("Id")?g(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((t=>{g(e,e.get(t),n)}))})))}function b(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",o=new Map;if(null===t)return o;const i=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&i.push(e)})),i.forEach((t=>{e.forEach((n=>{n.type===r&&n.trackId===t.id&&g(e,n,o)}))})),o}const C=h;function S(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const r="object"==typeof e[n]?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];let e={};"number"==typeof r.ideal?(e[o("min",n)]=r.ideal,t.optional.push(e),e={},e[o("max",n)]=r.ideal,t.optional.push(e)):(e[o("",n)]=r.ideal,t.optional.push(e))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((e=>{void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},o=function(e,o){if(t.version>=61)return o(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"==typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"==typeof e.video){let i=e.video.facingMode;i=i&&("object"==typeof i?i:{ideal:i});const a=t.version<66;if(i&&("user"===i.exact||"environment"===i.exact||"user"===i.ideal||"environment"===i.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||a)){let t;if(delete e.video.facingMode,"environment"===i.exact||"environment"===i.ideal?t=["back","rear"]:"user"!==i.exact&&"user"!==i.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let a=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!a&&n.length&&t.includes("back")&&(a=n[n.length-1]),a&&(e.video.deviceId=i.exact?{exact:a.deviceId}:{ideal:a.deviceId}),e.video=r(e.video),C("chrome: "+JSON.stringify(e)),o(e)}))}e.video=r(e.video)}return C("chrome: "+JSON.stringify(e)),o(e)},i=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){o(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{r&&r(i(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return o(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(i(e))))))}}}function w(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((t=>{const r=n.video&&n.video.width,o=n.video&&n.video.height,i=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:i||3}},r&&(n.video.mandatory.maxWidth=r),o&&(n.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}function k(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function E(e){if("object"==typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const o=new Event("track");o.track=n.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)})),t.stream.getTracks().forEach((n=>{let r;r=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const o=new Event("track");o.track=n,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],this.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else d(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function T(e){if("object"==typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){let o=n.apply(this,arguments);return o||(o=t(this,e),this._senders.push(o)),o};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],r.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"==typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function _(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,n,r]=arguments;if(arguments.length>0&&"function"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof e))return t.apply(this,[]);const o=function(e){const t={};return e.result().forEach((e=>{const n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((t=>{n[t]=e.stat(t)})),t[n.id]=n})),t},i=function(e){return new Map(Object.keys(e).map((t=>[t,e[t]])))};if(arguments.length>=2){const r=function(e){n(i(o(e)))};return t.apply(this,[r,e])}return new Promise(((e,n)=>{t.apply(this,[function(t){e(i(o(t)))},n])})).then(n,r)}}function R(e){if(!("object"==typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>b(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),d(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>b(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,r;return this.getSenders().forEach((n=>{n.track===e&&(t?r=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?r=!0:n=t),t.track===e))),r||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function x(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const r=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(r)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),o.apply(this,arguments)}}function D(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return x(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}r.apply(this,[t])};const o=e.RTCPeerConnection.prototype.removeStream;function i(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(o.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function a(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const r=e._reverseStreams[t],o=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),o.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},o.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");const o=this.getSenders().find((e=>e.track===t));if(o)throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const i=this._streams[n.id];if(i)i.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const r=new e.MediaStream([t]);this._streams[n.id]=r,this._reverseStreams[r.id]=n,this.addStream(r)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){const e=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[t=>{const n=i(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>i(this,e)))}};e.RTCPeerConnection.prototype[t]=r[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=a(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=c.get.apply(this);return""===e.type?e:i(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function P(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}))}function M(e,t){d(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var O=n(2539),A=n.n(O);function L(e){const t=e&&e.navigator,n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch((e=>Promise.reject(function(e){return{name:{PermissionDeniedError:"NotAllowedError"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString(){return this.name}}}(e))))}}function I(e){"getDisplayMedia"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}function N(e,t){if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){const t=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,"enabled");Object.defineProperty(e.MediaStreamTrack.prototype,"enabled",{set(e){t.set.call(this,e);const n=new Event("enabled");n.enabled=e,this.dispatchEvent(n)}})}e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)&&Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):"video"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);const n=A()(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=function(e,t){let n=!1;return(e=JSON.parse(JSON.stringify(e))).filter((e=>{if(e&&(e.urls||e.url)){let t=e.urls||e.url;e.url&&!e.urls&&m("RTCIceServer.url","RTCIceServer.urls");const r="string"==typeof t;return r&&(t=[t]),t=t.filter((e=>{if(0===e.indexOf("stun:"))return!1;const t=e.startsWith("turn")&&!e.startsWith("turn:[")&&e.includes("transport=udp");return t&&!n?(n=!0,!0):t&&!n})),delete e.url,e.urls=r?t[0]:t,!!t.length}}))}(e.iceServers,t.version),h("ICE servers after filtering:",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype}function j(e){e.RTCRtpSender&&!("replaceTrack"in e.RTCRtpSender.prototype)&&(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)}function F(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){m("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"==typeof n&&"object"==typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},r&&r.prototype.getSettings){const t=r.prototype.getSettings;r.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(r&&r.prototype.applyConstraints){const t=r.prototype.applyConstraints;r.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"==typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function B(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}function q(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function G(e,t){if("object"!=typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=r[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,o,i]=arguments;return r.apply(this,[e||null]).then((e=>{if(t.version<53&&!o)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach(((t,r)=>{e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,i)}}function U(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function H(e){if("object"!=typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),d(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function K(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){m("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function W(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function V(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((e=>{if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const r=t.apply(this,arguments);if(n){const{sender:t}=r,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e.sendEncodings,t.sendEncodings=e.sendEncodings,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return r})}function z(e){if("object"!=typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function Y(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function X(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function J(e){if("object"==typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e,...n){return n&&n.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function $(e){if("object"==typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function Z(e){if("object"!=typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,i=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){const r=arguments.length>=2?arguments[2]:arguments[0],o=n.apply(this,[r]);return t?(o.then(e,t),Promise.resolve()):o},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],o=r.apply(this,[n]);return t?(o.then(e,t),Promise.resolve()):o};let s=function(e,t,n){const r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){const r=i.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){const r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}function Q(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(ee(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))}function ee(e){return e&&void 0!==e.video?Object.assign({},e,{video:y(e.video)}):e}function te(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let r=e.iceServers[n];!r.hasOwnProperty("urls")&&r.hasOwnProperty("url")?(m("RTCIceServer.url","RTCIceServer.urls"),r=JSON.parse(JSON.stringify(r)),r.urls=r.url,delete r.url,t.push(r)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function ne(e){"object"==typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function re(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video")}return t.apply(this,arguments)}}function oe(e){"object"!=typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ie=n(7539),ae=n.n(ie);function se(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"==typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){const n=new t(e),r=ae().parseCandidate(e.candidate),o=Object.assign(n,r);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,d(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function ce(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const n=function(e){if(!e||!e.sdp)return!1;const t=ae().splitSections(e.sdp);return t.shift(),t.some((e=>{const t=ae().parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},r=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},i=function(e,n){let r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);const o=ae().matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?r=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const e=r(arguments[0]),t=o(e),n=i(arguments[0],e);let a;a=0===t&&0===n?Number.POSITIVE_INFINITY:0===t||0===n?Math.max(t,n):Math.min(t,n);const s={};Object.defineProperty(s,"maxMessageSize",{get:()=>a}),this._sctp=s}return a.apply(this,arguments)}}function ue(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const r=arguments[0],o=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&o>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},d(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function le(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function de(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function pe(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const fe=function({window:e}={},t={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=h,c=function(e){const t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=l(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=l(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))t.browser="edge",t.version=l(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=l(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),u={browserDetails:c,commonShim:s,extractVersion:l,disableLog:p,disableWarnings:f};switch(c.browser){case"chrome":if(!r||!P||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),u;if(null===c.version)return n("Chrome shim can not determine version, not shimming."),u;n("adapter.js shimming chrome."),u.browserShim=r,pe(e,c),S(e,c),k(e),P(e,c),E(e),D(e,c),T(e),_(e),R(e),M(e,c),se(e),le(e),ce(e,c),ue(e),de(e,c);break;case"firefox":if(!i||!G||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=i,pe(e,c),F(e,c),G(e,c),q(e),K(e),U(e),H(e),W(e),V(e),z(e),Y(e),X(e),se(e),le(e),ce(e,c),ue(e);break;case"edge":if(!o||!N||!t.shimEdge)return n("MS edge shim is not included in this adapter release."),u;n("adapter.js shimming edge."),u.browserShim=o,L(e),I(e),N(e,c),j(e),ce(e,c),ue(e);break;case"safari":if(!a||!t.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=a,pe(e,c),te(e),re(e),Z(e),J(e),$(e),ne(e),Q(e),oe(e),se(e),ce(e,c),ue(e),de(e,c);break;default:n("Unsupported browser!")}return u}({window:"undefined"==typeof window?void 0:window})},2480:()=>{}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(7278)})()}));